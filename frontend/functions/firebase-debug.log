[debug] [2025-04-28T12:44:26.050Z] ----------------------------------------------------------------------
[debug] [2025-04-28T12:44:26.051Z] Command:       /Users/dhruvpatel/.nvm/versions/node/v22.11.0/bin/node /Users/dhruvpatel/.nvm/versions/node/v22.11.0/bin/firebase emulators:start
[debug] [2025-04-28T12:44:26.051Z] CLI Version:   13.29.1
[debug] [2025-04-28T12:44:26.051Z] Platform:      darwin
[debug] [2025-04-28T12:44:26.052Z] Node Version:  v22.11.0
[debug] [2025-04-28T12:44:26.052Z] Time:          Mon Apr 28 2025 18:14:26 GMT+0530 (India Standard Time)
[debug] [2025-04-28T12:44:26.052Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-04-28T12:44:26.095Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-04-28T12:44:26.095Z] > authorizing via signed-in user (dhruvpatel13210@gmail.com)
[info] i  emulators: Starting emulators: functions, hosting, extensions {"metadata":{"emulator":{"name":"hub"},"message":"Starting emulators: functions, hosting, extensions"}}
[debug] [2025-04-28T12:44:26.096Z] Checked if tokens are valid: true, expires at: 1745847856487
[debug] [2025-04-28T12:44:26.096Z] Checked if tokens are valid: true, expires at: 1745847856487
[debug] [2025-04-28T12:44:26.097Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/clone-f330b [none]
[debug] [2025-04-28T12:44:27.604Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/clone-f330b 200
[debug] [2025-04-28T12:44:27.604Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/clone-f330b {"projectNumber":"151485167085","projectId":"clone-f330b","lifecycleState":"ACTIVE","name":"amazon-clone","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2025-01-01T07:48:43.860289Z"}
[debug] [2025-04-28T12:44:27.858Z] [logging] Logging Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[warn] ⚠  hosting: Hosting Emulator unable to start on port 5000, starting on 5002 instead. {"metadata":{"emulator":{"name":"hosting"},"message":"Hosting Emulator unable to start on port 5000, starting on 5002 instead."}}
[debug] [2025-04-28T12:44:27.858Z] [hosting] Hosting Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2025-04-28T12:44:27.858Z] assigned listening specs for emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400},{"address":"::1","family":"IPv6","port":4400}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4000},{"address":"::1","family":"IPv6","port":4000}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}],"hosting":[{"address":"127.0.0.1","family":"IPv4","port":5002}]},"metadata":{"message":"assigned listening specs for emulators"}}
[debug] [2025-04-28T12:44:27.860Z] [hub] writing locator at /var/folders/b8/2ktxw5yj1xz8mylspf3xppwr0000gn/T/hub-clone-f330b.json
[debug] [2025-04-28T12:44:27.862Z] [Extensions] Started Extensions emulator, this is a noop.
[debug] [2025-04-28T12:44:28.007Z] [functions] Functions Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2025-04-28T12:44:28.007Z] [eventarc] Eventarc Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2025-04-28T12:44:28.007Z] [tasks] Cloud Tasks Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2025-04-28T12:44:28.007Z] late-assigned ports for functions and eventarc emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400},{"address":"::1","family":"IPv6","port":4400}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4000},{"address":"::1","family":"IPv6","port":4000}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}],"hosting":[{"address":"127.0.0.1","family":"IPv4","port":5002}],"functions":[{"address":"127.0.0.1","family":"IPv4","port":5001}],"eventarc":[{"address":"127.0.0.1","family":"IPv4","port":9299}],"tasks":[{"address":"127.0.0.1","family":"IPv4","port":9499}]},"metadata":{"message":"late-assigned ports for functions and eventarc emulators"}}
[warn] ⚠  functions: The following emulators are not running, calls to these services from the Functions emulator will affect production: apphosting, auth, firestore, database, pubsub, storage, dataconnect {"metadata":{"emulator":{"name":"functions"},"message":"The following emulators are not running, calls to these services from the Functions emulator will affect production: \u001b[1mapphosting, auth, firestore, database, pubsub, storage, dataconnect\u001b[22m"}}
[debug] [2025-04-28T12:44:28.008Z] defaultcredentials: writing to file /Users/dhruvpatel/.config/firebase/dhruvpatel13210_gmail_com_application_default_credentials.json
[debug] [2025-04-28T12:44:28.009Z] Setting GAC to /Users/dhruvpatel/.config/firebase/dhruvpatel13210_gmail_com_application_default_credentials.json {"metadata":{"emulator":{"name":"functions"},"message":"Setting GAC to /Users/dhruvpatel/.config/firebase/dhruvpatel13210_gmail_com_application_default_credentials.json"}}
[debug] [2025-04-28T12:44:28.009Z] Checked if tokens are valid: true, expires at: 1745847856487
[debug] [2025-04-28T12:44:28.009Z] Checked if tokens are valid: true, expires at: 1745847856487
[debug] [2025-04-28T12:44:28.009Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/clone-f330b/adminSdkConfig [none]
[debug] [2025-04-28T12:44:28.522Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/clone-f330b/adminSdkConfig 200
[debug] [2025-04-28T12:44:28.522Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/clone-f330b/adminSdkConfig {"projectId":"clone-f330b","storageBucket":"clone-f330b.firebasestorage.app"}
[debug] [2025-04-28T12:44:28.533Z] Checked if tokens are valid: true, expires at: 1745847856487
[debug] [2025-04-28T12:44:28.533Z] Checked if tokens are valid: true, expires at: 1745847856487
[debug] [2025-04-28T12:44:28.533Z] >>> [apiv2][query] GET https://firebasehosting.googleapis.com/v1beta1/projects/clone-f330b/sites 
[debug] [2025-04-28T12:44:29.814Z] <<< [apiv2][status] GET https://firebasehosting.googleapis.com/v1beta1/projects/clone-f330b/sites 200
[debug] [2025-04-28T12:44:29.815Z] <<< [apiv2][body] GET https://firebasehosting.googleapis.com/v1beta1/projects/clone-f330b/sites {"sites":[{"name":"projects/clone-f330b/sites/clone-f330b","defaultUrl":"https://clone-f330b.web.app","appId":"1:151485167085:web:cac6be40ffdb94ffeaa3e4","type":"DEFAULT_SITE"}]}
[debug] [2025-04-28T12:44:29.815Z] Checked if tokens are valid: true, expires at: 1745847856487
[debug] [2025-04-28T12:44:29.815Z] Checked if tokens are valid: true, expires at: 1745847856487
[debug] [2025-04-28T12:44:29.815Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/clone-f330b/webApps/1:151485167085:web:cac6be40ffdb94ffeaa3e4/config [none]
[debug] [2025-04-28T12:44:30.347Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/clone-f330b/webApps/1:151485167085:web:cac6be40ffdb94ffeaa3e4/config 200
[debug] [2025-04-28T12:44:30.347Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/clone-f330b/webApps/1:151485167085:web:cac6be40ffdb94ffeaa3e4/config {"projectId":"clone-f330b","appId":"1:151485167085:web:cac6be40ffdb94ffeaa3e4","storageBucket":"clone-f330b.firebasestorage.app","apiKey":"AIzaSyCU6R-8UusO-g2qhqxmfC19nkS92gMHcEw","authDomain":"clone-f330b.firebaseapp.com","messagingSenderId":"151485167085","measurementId":"G-GFLH8F5C5P"}
[debug] [2025-04-28T12:44:30.355Z] Checked if tokens are valid: true, expires at: 1745847856487
[debug] [2025-04-28T12:44:30.356Z] Checked if tokens are valid: true, expires at: 1745847856487
[debug] [2025-04-28T12:44:30.356Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/clone-f330b [none]
[debug] [2025-04-28T12:44:30.716Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/clone-f330b 200
[debug] [2025-04-28T12:44:30.717Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/clone-f330b {"projectId":"clone-f330b","projectNumber":"151485167085","displayName":"amazon-clone","name":"projects/clone-f330b","resources":{"hostingSite":"clone-f330b"},"state":"ACTIVE","etag":"1_23dc33b9-2c15-4934-aac6-ea087366d081"}
[info] i  hosting[clone-f330b]: Serving hosting files from: build {"metadata":{"emulator":{"name":"hosting"},"message":"Serving hosting files from: \u001b[1mbuild\u001b[22m"}}
[info] ✔  hosting[clone-f330b]: Local server: http://127.0.0.1:5002 {"metadata":{"emulator":{"name":"hosting"},"message":"Local server: \u001b[4m\u001b[1mhttp://127.0.0.1:5002\u001b[22m\u001b[24m"}}
[debug] [2025-04-28T12:44:30.772Z] [Extensions] Connecting Extensions emulator, this is a noop.
[info] i  functions: Watching "/Users/dhruvpatel/Projects/amazon-clone/frontend/functions" for Cloud Functions... {"metadata":{"emulator":{"name":"functions"},"message":"Watching \"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions\" for Cloud Functions..."}}
[debug] [2025-04-28T12:44:30.774Z] Validating nodejs source
[warn] ⚠  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[warn] ⚠  functions: Please note that there will be breaking changes when you upgrade. 
[debug] [2025-04-28T12:44:31.252Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint .",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "10"
  },
  "main": "index.js",
  "dependencies": {
    "cors": "^2.8.5",
    "express": "^4.17.1",
    "firebase-admin": "^8.10.0",
    "firebase-functions": "^3.6.1",
    "stripe": "^8.94.0"
  },
  "devDependencies": {
    "eslint": "^5.12.0",
    "eslint-plugin-promise": "^4.0.1",
    "firebase-functions-test": "^0.2.0"
  },
  "private": true
}
[debug] [2025-04-28T12:44:31.252Z] Building nodejs source
[debug] [2025-04-28T12:44:31.252Z] Failed to find version of module node: reached end of search path /Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules
[warn] ⚠  functions: Your requested "node" version "10" doesn't match your global version "22". Using node@22 from host. 
[warn] ⚠  functions: You are using an old version of firebase-functions SDK (3.11.0). Please update firebase-functions SDK to >=3.20.0 
[info] ✔  functions: Loaded functions definitions from source: api. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: api."}}
[info] ✔  functions[us-central1-api]: http function initialized (http://127.0.0.1:5001/clone-f330b/us-central1/api). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/clone-f330b/us-central1/api)."}}
[debug] [2025-04-28T12:44:31.393Z] Could not find VSCode notification endpoint: FetchError: request to http://localhost:40001/vscode/notify failed, reason: . If you are not running the Firebase Data Connect VSCode extension, this is expected and not an issue.
[info] 
┌─────────────────────────────────────────────────────────────┐
│ ✔  All emulators ready! It is now safe to connect your app. │
│ i  View Emulator UI at http://127.0.0.1:4000/               │
└─────────────────────────────────────────────────────────────┘

┌────────────┬────────────────┬──────────────────────────────────┐
│ Emulator   │ Host:Port      │ View in Emulator UI              │
├────────────┼────────────────┼──────────────────────────────────┤
│ Functions  │ 127.0.0.1:5001 │ http://127.0.0.1:4000/functions  │
├────────────┼────────────────┼──────────────────────────────────┤
│ Hosting    │ 127.0.0.1:5002 │ n/a                              │
├────────────┼────────────────┼──────────────────────────────────┤
│ Extensions │ 127.0.0.1:5001 │ http://127.0.0.1:4000/extensions │
└────────────┴────────────────┴──────────────────────────────────┘
  Emulator Hub running at 127.0.0.1:4400
  Other reserved ports: 4500
┌─────────────────────────┬───────────────┬─────────────────────┐
│ Extension Instance Name │ Extension Ref │ View in Emulator UI │
└─────────────────────────┴───────────────┴─────────────────────┘
Issues? Report them at https://github.com/firebase/firebase-tools/issues and attach the *-debug.log files.
 
[debug] [2025-04-28T12:45:00.910Z] [work-queue] {"queuedWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T12:45:00.910Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T12:45:00.910Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T12:45:00.910Z"],"workRunningCount":1}
[debug] [2025-04-28T12:45:00.911Z] Accepted request POST /clone-f330b/us-central1/api/payments/create?total=0 --> us-central1-api
[debug] [2025-04-28T12:45:00.915Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-04-28T12:45:00.915Z] [functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0"}}
[debug] [2025-04-28T12:45:00.919Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2025-04-28T12:45:00.920Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[info] >  (node:60322) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead. {"user":"(node:60322) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m (node:60322) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead."}}
[info] >  (Use `node --trace-deprecation ...` to show where the warning was created) {"user":"(Use `node --trace-deprecation ...` to show where the warning was created)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m (Use `node --trace-deprecation ...` to show where the warning was created)"}}
[debug] [2025-04-28T12:45:01.579Z] [runtime-status] [60322] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.13.0","resolution":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [60322] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"8.13.0\",\"resolution\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-04-28T12:45:01.580Z] [runtime-status] [60322] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.11.0","resolution":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-functions/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [60322] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.11.0\",\"resolution\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-functions/lib/index.js\"}"}}
[warn] ⚠  The Cloud Functions emulator requires the module "firebase-functions" to be version >3.13.1 so your version is too old. You can probably fix this by running "npm install firebase-functions@latest" in your functions directory. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"The Cloud Functions emulator requires the module \"firebase-functions\" to be version >3.13.1 so your version is too old. You can probably fix this by running \"npm install firebase-functions@latest\" in your functions directory."}}
[info] i  functions: Your functions could not be parsed due to an issue with your node_modules (see above) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Your functions could not be parsed due to an issue with your node_modules (see above)"}}
[debug] [2025-04-28T12:45:01.659Z] [runtime-status] [60322] Functions runtime initialized. {"cwd":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions","node_version":"22.11.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [60322] Functions runtime initialized. {\"cwd\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions\",\"node_version\":\"22.11.0\"}"}}
[debug] [2025-04-28T12:45:01.659Z] [runtime-status] [60322] Listening to port: /var/folders/b8/2ktxw5yj1xz8mylspf3xppwr0000gn/T/fire_emu_2a0656de4c9d3969.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [60322] Listening to port: /var/folders/b8/2ktxw5yj1xz8mylspf3xppwr0000gn/T/fire_emu_2a0656de4c9d3969.sock"}}
[debug] [2025-04-28T12:45:01.734Z] [worker-us-central1-api-c09c2139-960f-4dd1-ba3d-ccfc6470a553]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-c09c2139-960f-4dd1-ba3d-ccfc6470a553]: IDLE"}}
[debug] [2025-04-28T12:45:01.734Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-04-28T12:45:01.735Z] [worker-us-central1-api-c09c2139-960f-4dd1-ba3d-ccfc6470a553]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-c09c2139-960f-4dd1-ba3d-ccfc6470a553]: BUSY"}}
[info] >  Payment Request Recieved BOOM!!! for this amount >>>  0 {"user":"Payment Request Recieved BOOM!!! for this amount >>>  0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment Request Recieved BOOM!!! for this amount >>>  0"}}
[info] >  /Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39 {"user":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m /Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39"}}
[info] >          return new StripeInvalidRequestError(rawStripeError); {"user":"        return new StripeInvalidRequestError(rawStripeError);","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         return new StripeInvalidRequestError(rawStripeError);"}}
[info] >                 ^ {"user":"               ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents {"user":"StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents"}}
[info] >      at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16) {"user":"    at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16)"}}
[info] >      at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33) {"user":"    at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33)"}}
[info] >      at Object.onceWrapper (node:events:632:28) {"user":"    at Object.onceWrapper (node:events:632:28)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Object.onceWrapper (node:events:632:28)"}}
[info] >      at IncomingMessage.emit (node:events:530:35) {"user":"    at IncomingMessage.emit (node:events:530:35)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.emit (node:events:530:35)"}}
[info] >      at endReadableNT (node:internal/streams/readable:1698:12) {"user":"    at endReadableNT (node:internal/streams/readable:1698:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at endReadableNT (node:internal/streams/readable:1698:12)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:90:21) { {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {"}}
[info] >    type: 'StripeInvalidRequestError', {"user":"  type: 'StripeInvalidRequestError',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'StripeInvalidRequestError',"}}
[info] >    raw: { {"user":"  raw: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   raw: {"}}
[info] >      code: 'parameter_invalid_integer', {"user":"    code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 'parameter_invalid_integer',"}}
[info] >      doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >      message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents', {"user":"    message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents',"}}
[info] >      param: 'amount', {"user":"    param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     param: 'amount',"}}
[info] >      request_log_url: 'https://dashboard.stripe.com/test/logs/req_La2InOJtn1SYst?t=1745844302', {"user":"    request_log_url: 'https://dashboard.stripe.com/test/logs/req_La2InOJtn1SYst?t=1745844302',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     request_log_url: 'https://dashboard.stripe.com/test/logs/req_La2InOJtn1SYst?t=1745844302',"}}
[info] >      type: 'invalid_request_error', {"user":"    type: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     type: 'invalid_request_error',"}}
[info] >      headers: { {"user":"    headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     headers: {"}}
[info] >        server: 'nginx', {"user":"      server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       server: 'nginx',"}}
[info] >        date: 'Mon, 28 Apr 2025 12:45:02 GMT', {"user":"      date: 'Mon, 28 Apr 2025 12:45:02 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       date: 'Mon, 28 Apr 2025 12:45:02 GMT',"}}
[info] >        'content-type': 'application/json', {"user":"      'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-type': 'application/json',"}}
[info] >        'content-length': '663', {"user":"      'content-length': '663',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-length': '663',"}}
[info] >        connection: 'keep-alive', {"user":"      connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       connection: 'keep-alive',"}}
[info] >        'access-control-allow-credentials': 'true', {"user":"      'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-credentials': 'true',"}}
[info] >        'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE', {"user":"      'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',"}}
[info] >        'access-control-allow-origin': '*', {"user":"      'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-origin': '*',"}}
[info] >        'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >        'access-control-max-age': '300', {"user":"      'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-max-age': '300',"}}
[info] >        'cache-control': 'no-cache, no-store', {"user":"      'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cache-control': 'no-cache, no-store',"}}
[info] >        'content-security-policy': "base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=NWuD0q6lVLZgVGSowOr4Jk2BBrJaGWtXwtp_h3i8WQT1AJg8h2ShYPkLqF9NXdOqhQ3R1XHXNz48gVi-", {"user":"      'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=NWuD0q6lVLZgVGSowOr4Jk2BBrJaGWtXwtp_h3i8WQT1AJg8h2ShYPkLqF9NXdOqhQ3R1XHXNz48gVi-\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=NWuD0q6lVLZgVGSowOr4Jk2BBrJaGWtXwtp_h3i8WQT1AJg8h2ShYPkLqF9NXdOqhQ3R1XHXNz48gVi-\","}}
[info] >        'idempotency-key': '9c620824-f77a-4eeb-b169-dedbdb437ca8', {"user":"      'idempotency-key': '9c620824-f77a-4eeb-b169-dedbdb437ca8',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'idempotency-key': '9c620824-f77a-4eeb-b169-dedbdb437ca8',"}}
[info] >        'original-request': 'req_La2InOJtn1SYst', {"user":"      'original-request': 'req_La2InOJtn1SYst',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'original-request': 'req_La2InOJtn1SYst',"}}
[info] >        'request-id': 'req_La2InOJtn1SYst', {"user":"      'request-id': 'req_La2InOJtn1SYst',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'request-id': 'req_La2InOJtn1SYst',"}}
[info] >        'stripe-version': '2025-02-24.acacia', {"user":"      'stripe-version': '2025-02-24.acacia',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'stripe-version': '2025-02-24.acacia',"}}
[info] >        vary: 'Origin', {"user":"      vary: 'Origin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       vary: 'Origin',"}}
[info] >        'x-stripe-priority-routing-enabled': 'true', {"user":"      'x-stripe-priority-routing-enabled': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-priority-routing-enabled': 'true',"}}
[info] >        'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"      'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >        'x-wc': 'ABGHI', {"user":"      'x-wc': 'ABGHI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-wc': 'ABGHI',"}}
[info] >        'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      statusCode: 400, {"user":"    statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     statusCode: 400,"}}
[info] >      requestId: 'req_La2InOJtn1SYst' {"user":"    requestId: 'req_La2InOJtn1SYst'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     requestId: 'req_La2InOJtn1SYst'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    rawType: 'invalid_request_error', {"user":"  rawType: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   rawType: 'invalid_request_error',"}}
[info] >    code: 'parameter_invalid_integer', {"user":"  code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'parameter_invalid_integer',"}}
[info] >    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"  doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >    param: 'amount', {"user":"  param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   param: 'amount',"}}
[info] >    detail: undefined, {"user":"  detail: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   detail: undefined,"}}
[info] >    headers: { {"user":"  headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   headers: {"}}
[info] >      server: 'nginx', {"user":"    server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     server: 'nginx',"}}
[info] >      date: 'Mon, 28 Apr 2025 12:45:02 GMT', {"user":"    date: 'Mon, 28 Apr 2025 12:45:02 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     date: 'Mon, 28 Apr 2025 12:45:02 GMT',"}}
[info] >      'content-type': 'application/json', {"user":"    'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-type': 'application/json',"}}
[info] >      'content-length': '663', {"user":"    'content-length': '663',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-length': '663',"}}
[info] >      connection: 'keep-alive', {"user":"    connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     connection: 'keep-alive',"}}
[info] >      'access-control-allow-credentials': 'true', {"user":"    'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-credentials': 'true',"}}
[info] >      'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE', {"user":"    'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',"}}
[info] >      'access-control-allow-origin': '*', {"user":"    'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-origin': '*',"}}
[info] >      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"    'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >      'access-control-max-age': '300', {"user":"    'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-max-age': '300',"}}
[info] >      'cache-control': 'no-cache, no-store', {"user":"    'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'cache-control': 'no-cache, no-store',"}}
[info] >      'content-security-policy': "base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=NWuD0q6lVLZgVGSowOr4Jk2BBrJaGWtXwtp_h3i8WQT1AJg8h2ShYPkLqF9NXdOqhQ3R1XHXNz48gVi-", {"user":"    'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=NWuD0q6lVLZgVGSowOr4Jk2BBrJaGWtXwtp_h3i8WQT1AJg8h2ShYPkLqF9NXdOqhQ3R1XHXNz48gVi-\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=NWuD0q6lVLZgVGSowOr4Jk2BBrJaGWtXwtp_h3i8WQT1AJg8h2ShYPkLqF9NXdOqhQ3R1XHXNz48gVi-\","}}
[info] >      'idempotency-key': '9c620824-f77a-4eeb-b169-dedbdb437ca8', {"user":"    'idempotency-key': '9c620824-f77a-4eeb-b169-dedbdb437ca8',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'idempotency-key': '9c620824-f77a-4eeb-b169-dedbdb437ca8',"}}
[info] >      'original-request': 'req_La2InOJtn1SYst', {"user":"    'original-request': 'req_La2InOJtn1SYst',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'original-request': 'req_La2InOJtn1SYst',"}}
[info] >      'request-id': 'req_La2InOJtn1SYst', {"user":"    'request-id': 'req_La2InOJtn1SYst',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'request-id': 'req_La2InOJtn1SYst',"}}
[info] >      'stripe-version': '2025-02-24.acacia', {"user":"    'stripe-version': '2025-02-24.acacia',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'stripe-version': '2025-02-24.acacia',"}}
[info] >      vary: 'Origin', {"user":"    vary: 'Origin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     vary: 'Origin',"}}
[info] >      'x-stripe-priority-routing-enabled': 'true', {"user":"    'x-stripe-priority-routing-enabled': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-priority-routing-enabled': 'true',"}}
[info] >      'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"    'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >      'x-wc': 'ABGHI', {"user":"    'x-wc': 'ABGHI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-wc': 'ABGHI',"}}
[info] >      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"    'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    requestId: 'req_La2InOJtn1SYst', {"user":"  requestId: 'req_La2InOJtn1SYst',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   requestId: 'req_La2InOJtn1SYst',"}}
[info] >    statusCode: 400, {"user":"  statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statusCode: 400,"}}
[info] >    charge: undefined, {"user":"  charge: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   charge: undefined,"}}
[info] >    decline_code: undefined, {"user":"  decline_code: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   decline_code: undefined,"}}
[info] >    payment_intent: undefined, {"user":"  payment_intent: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_intent: undefined,"}}
[info] >    payment_method: undefined, {"user":"  payment_method: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method: undefined,"}}
[info] >    setup_intent: undefined, {"user":"  setup_intent: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   setup_intent: undefined,"}}
[info] >    source: undefined {"user":"  source: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   source: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v22.11.0 {"user":"Node.js v22.11.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v22.11.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2025-04-28T12:45:02.319Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T12:45:02.319Z] [worker-us-central1-api-c09c2139-960f-4dd1-ba3d-ccfc6470a553]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-c09c2139-960f-4dd1-ba3d-ccfc6470a553]: exited"}}
[debug] [2025-04-28T12:45:02.319Z] [worker-us-central1-api-c09c2139-960f-4dd1-ba3d-ccfc6470a553]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-c09c2139-960f-4dd1-ba3d-ccfc6470a553]: FINISHED"}}
[debug] [2025-04-28T12:45:06.680Z] [work-queue] {"queuedWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T12:45:06.680Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T12:45:06.681Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T12:45:06.680Z"],"workRunningCount":1}
[debug] [2025-04-28T12:45:06.681Z] Accepted request POST /clone-f330b/us-central1/api/payments/create?total=47800 --> us-central1-api
[debug] [2025-04-28T12:45:06.684Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-04-28T12:45:06.685Z] [functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=47800, mapping to path=/payments/create?total=47800 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=47800, mapping to path=/payments/create?total=47800"}}
[debug] [2025-04-28T12:45:06.685Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2025-04-28T12:45:06.687Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2025-04-28T12:45:06.687Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[info] >  (node:60341) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead. {"user":"(node:60341) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m (node:60341) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead."}}
[info] >  (Use `node --trace-deprecation ...` to show where the warning was created) {"user":"(Use `node --trace-deprecation ...` to show where the warning was created)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m (Use `node --trace-deprecation ...` to show where the warning was created)"}}
[debug] [2025-04-28T12:45:07.244Z] [runtime-status] [60341] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.13.0","resolution":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [60341] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"8.13.0\",\"resolution\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-04-28T12:45:07.245Z] [runtime-status] [60341] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.11.0","resolution":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-functions/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [60341] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.11.0\",\"resolution\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-functions/lib/index.js\"}"}}
[warn] ⚠  The Cloud Functions emulator requires the module "firebase-functions" to be version >3.13.1 so your version is too old. You can probably fix this by running "npm install firebase-functions@latest" in your functions directory. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"The Cloud Functions emulator requires the module \"firebase-functions\" to be version >3.13.1 so your version is too old. You can probably fix this by running \"npm install firebase-functions@latest\" in your functions directory."}}
[info] i  functions: Your functions could not be parsed due to an issue with your node_modules (see above) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Your functions could not be parsed due to an issue with your node_modules (see above)"}}
[debug] [2025-04-28T12:45:07.312Z] [runtime-status] [60341] Functions runtime initialized. {"cwd":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions","node_version":"22.11.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [60341] Functions runtime initialized. {\"cwd\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions\",\"node_version\":\"22.11.0\"}"}}
[debug] [2025-04-28T12:45:07.312Z] [runtime-status] [60341] Listening to port: /var/folders/b8/2ktxw5yj1xz8mylspf3xppwr0000gn/T/fire_emu_dfc5b13ebf53ee85.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [60341] Listening to port: /var/folders/b8/2ktxw5yj1xz8mylspf3xppwr0000gn/T/fire_emu_dfc5b13ebf53ee85.sock"}}
[debug] [2025-04-28T12:45:07.399Z] [worker-us-central1-api-72a76f53-06d7-4f0b-89c1-05fcf3582488]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-72a76f53-06d7-4f0b-89c1-05fcf3582488]: IDLE"}}
[debug] [2025-04-28T12:45:07.399Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-04-28T12:45:07.400Z] [worker-us-central1-api-72a76f53-06d7-4f0b-89c1-05fcf3582488]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-72a76f53-06d7-4f0b-89c1-05fcf3582488]: BUSY"}}
[info] >  Payment Request Recieved BOOM!!! for this amount >>>  47800 {"user":"Payment Request Recieved BOOM!!! for this amount >>>  47800","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment Request Recieved BOOM!!! for this amount >>>  47800"}}
[info] >  paymentRECEIVED >>>  { {"user":"paymentRECEIVED >>>  {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m paymentRECEIVED >>>  {"}}
[info] >    id: 'pi_3RIr3XJlvCjqT1Et0jcb12hi', {"user":"  id: 'pi_3RIr3XJlvCjqT1Et0jcb12hi',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   id: 'pi_3RIr3XJlvCjqT1Et0jcb12hi',"}}
[info] >    object: 'payment_intent', {"user":"  object: 'payment_intent',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   object: 'payment_intent',"}}
[info] >    amount: 47800, {"user":"  amount: 47800,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   amount: 47800,"}}
[info] >    amount_capturable: 0, {"user":"  amount_capturable: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   amount_capturable: 0,"}}
[info] >    amount_details: { tip: {} }, {"user":"  amount_details: { tip: {} },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   amount_details: { tip: {} },"}}
[info] >    amount_received: 0, {"user":"  amount_received: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   amount_received: 0,"}}
[info] >    application: null, {"user":"  application: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   application: null,"}}
[info] >    application_fee_amount: null, {"user":"  application_fee_amount: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   application_fee_amount: null,"}}
[info] >    automatic_payment_methods: { allow_redirects: 'always', enabled: true }, {"user":"  automatic_payment_methods: { allow_redirects: 'always', enabled: true },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   automatic_payment_methods: { allow_redirects: 'always', enabled: true },"}}
[info] >    canceled_at: null, {"user":"  canceled_at: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   canceled_at: null,"}}
[info] >    cancellation_reason: null, {"user":"  cancellation_reason: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   cancellation_reason: null,"}}
[info] >    capture_method: 'automatic_async', {"user":"  capture_method: 'automatic_async',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   capture_method: 'automatic_async',"}}
[info] >    client_secret: 'pi_3RIr3XJlvCjqT1Et0jcb12hi_secret_6Os1Eay9HJ9STXgXYIUOBHY0B', {"user":"  client_secret: 'pi_3RIr3XJlvCjqT1Et0jcb12hi_secret_6Os1Eay9HJ9STXgXYIUOBHY0B',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   client_secret: 'pi_3RIr3XJlvCjqT1Et0jcb12hi_secret_6Os1Eay9HJ9STXgXYIUOBHY0B',"}}
[info] >    confirmation_method: 'automatic', {"user":"  confirmation_method: 'automatic',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   confirmation_method: 'automatic',"}}
[info] >    created: 1745844307, {"user":"  created: 1745844307,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   created: 1745844307,"}}
[info] >    currency: 'usd', {"user":"  currency: 'usd',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   currency: 'usd',"}}
[info] >    customer: null, {"user":"  customer: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   customer: null,"}}
[info] >    description: null, {"user":"  description: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   description: null,"}}
[info] >    invoice: null, {"user":"  invoice: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   invoice: null,"}}
[info] >    last_payment_error: null, {"user":"  last_payment_error: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   last_payment_error: null,"}}
[info] >    latest_charge: null, {"user":"  latest_charge: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   latest_charge: null,"}}
[info] >    livemode: false, {"user":"  livemode: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   livemode: false,"}}
[info] >    metadata: {}, {"user":"  metadata: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   metadata: {},"}}
[info] >    next_action: null, {"user":"  next_action: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   next_action: null,"}}
[info] >    on_behalf_of: null, {"user":"  on_behalf_of: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   on_behalf_of: null,"}}
[info] >    payment_method: null, {"user":"  payment_method: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method: null,"}}
[info] >    payment_method_configuration_details: { id: 'pmc_1R1R5nJlvCjqT1EtYHXN7Kcf', parent: null }, {"user":"  payment_method_configuration_details: { id: 'pmc_1R1R5nJlvCjqT1EtYHXN7Kcf', parent: null },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method_configuration_details: { id: 'pmc_1R1R5nJlvCjqT1EtYHXN7Kcf', parent: null },"}}
[info] >    payment_method_options: { {"user":"  payment_method_options: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method_options: {"}}
[info] >      affirm: {}, {"user":"    affirm: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     affirm: {},"}}
[info] >      amazon_pay: { express_checkout_element_session_id: null }, {"user":"    amazon_pay: { express_checkout_element_session_id: null },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     amazon_pay: { express_checkout_element_session_id: null },"}}
[info] >      card: { {"user":"    card: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     card: {"}}
[info] >        installments: null, {"user":"      installments: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       installments: null,"}}
[info] >        mandate_options: null, {"user":"      mandate_options: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       mandate_options: null,"}}
[info] >        network: null, {"user":"      network: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       network: null,"}}
[info] >        request_three_d_secure: 'automatic' {"user":"      request_three_d_secure: 'automatic'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       request_three_d_secure: 'automatic'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      cashapp: {}, {"user":"    cashapp: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     cashapp: {},"}}
[info] >      klarna: { preferred_locale: null }, {"user":"    klarna: { preferred_locale: null },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     klarna: { preferred_locale: null },"}}
[info] >      link: { persistent_token: null } {"user":"    link: { persistent_token: null }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     link: { persistent_token: null }"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    payment_method_types: [ 'card', 'klarna', 'link', 'affirm', 'cashapp', 'amazon_pay' ], {"user":"  payment_method_types: [ 'card', 'klarna', 'link', 'affirm', 'cashapp', 'amazon_pay' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method_types: [ 'card', 'klarna', 'link', 'affirm', 'cashapp', 'amazon_pay' ],"}}
[info] >    processing: null, {"user":"  processing: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   processing: null,"}}
[info] >    receipt_email: null, {"user":"  receipt_email: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   receipt_email: null,"}}
[info] >    review: null, {"user":"  review: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   review: null,"}}
[info] >    setup_future_usage: null, {"user":"  setup_future_usage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   setup_future_usage: null,"}}
[info] >    shipping: null, {"user":"  shipping: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   shipping: null,"}}
[info] >    source: null, {"user":"  source: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   source: null,"}}
[info] >    statement_descriptor: null, {"user":"  statement_descriptor: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statement_descriptor: null,"}}
[info] >    statement_descriptor_suffix: null, {"user":"  statement_descriptor_suffix: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statement_descriptor_suffix: null,"}}
[info] >    status: 'requires_payment_method', {"user":"  status: 'requires_payment_method',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   status: 'requires_payment_method',"}}
[info] >    transfer_data: null, {"user":"  transfer_data: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   transfer_data: null,"}}
[info] >    transfer_group: null {"user":"  transfer_group: null","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   transfer_group: null"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2025-04-28T12:45:08.095Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 695.252917ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 695.252917ms"}}
[debug] [2025-04-28T12:45:08.095Z] [worker-us-central1-api-72a76f53-06d7-4f0b-89c1-05fcf3582488]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-72a76f53-06d7-4f0b-89c1-05fcf3582488]: IDLE"}}
[debug] [2025-04-28T12:45:08.095Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-04-28T12:45:08.095Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-04-28T12:45:08.095Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T12:46:42.130Z] [work-queue] {"queuedWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T12:46:42.130Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T12:46:42.131Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T12:46:42.130Z"],"workRunningCount":1}
[debug] [2025-04-28T12:46:42.131Z] Accepted request POST /clone-f330b/us-central1/api/payments/create?total=0 --> us-central1-api
[debug] [2025-04-28T12:46:42.134Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-04-28T12:46:42.135Z] [functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0"}}
[debug] [2025-04-28T12:46:42.135Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-04-28T12:46:42.135Z] [worker-us-central1-api-72a76f53-06d7-4f0b-89c1-05fcf3582488]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-72a76f53-06d7-4f0b-89c1-05fcf3582488]: BUSY"}}
[info] >  Payment Request Recieved BOOM!!! for this amount >>>  0 {"user":"Payment Request Recieved BOOM!!! for this amount >>>  0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment Request Recieved BOOM!!! for this amount >>>  0"}}
[info] >  /Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39 {"user":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m /Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39"}}
[info] >          return new StripeInvalidRequestError(rawStripeError); {"user":"        return new StripeInvalidRequestError(rawStripeError);","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         return new StripeInvalidRequestError(rawStripeError);"}}
[info] >                 ^ {"user":"               ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents {"user":"StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents"}}
[info] >      at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16) {"user":"    at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16)"}}
[info] >      at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33) {"user":"    at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33)"}}
[info] >      at Object.onceWrapper (node:events:632:28) {"user":"    at Object.onceWrapper (node:events:632:28)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Object.onceWrapper (node:events:632:28)"}}
[info] >      at IncomingMessage.emit (node:events:530:35) {"user":"    at IncomingMessage.emit (node:events:530:35)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.emit (node:events:530:35)"}}
[info] >      at endReadableNT (node:internal/streams/readable:1698:12) {"user":"    at endReadableNT (node:internal/streams/readable:1698:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at endReadableNT (node:internal/streams/readable:1698:12)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:90:21) { {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {"}}
[info] >    type: 'StripeInvalidRequestError', {"user":"  type: 'StripeInvalidRequestError',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'StripeInvalidRequestError',"}}
[info] >    raw: { {"user":"  raw: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   raw: {"}}
[info] >      code: 'parameter_invalid_integer', {"user":"    code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 'parameter_invalid_integer',"}}
[info] >      doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >      message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents', {"user":"    message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents',"}}
[info] >      param: 'amount', {"user":"    param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     param: 'amount',"}}
[info] >      request_log_url: 'https://dashboard.stripe.com/test/logs/req_YRrIqd8XW7a9mQ?t=1745844402', {"user":"    request_log_url: 'https://dashboard.stripe.com/test/logs/req_YRrIqd8XW7a9mQ?t=1745844402',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     request_log_url: 'https://dashboard.stripe.com/test/logs/req_YRrIqd8XW7a9mQ?t=1745844402',"}}
[info] >      type: 'invalid_request_error', {"user":"    type: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     type: 'invalid_request_error',"}}
[info] >      headers: { {"user":"    headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     headers: {"}}
[info] >        server: 'nginx', {"user":"      server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       server: 'nginx',"}}
[info] >        date: 'Mon, 28 Apr 2025 12:46:42 GMT', {"user":"      date: 'Mon, 28 Apr 2025 12:46:42 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       date: 'Mon, 28 Apr 2025 12:46:42 GMT',"}}
[info] >        'content-type': 'application/json', {"user":"      'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-type': 'application/json',"}}
[info] >        'content-length': '663', {"user":"      'content-length': '663',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-length': '663',"}}
[info] >        connection: 'keep-alive', {"user":"      connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       connection: 'keep-alive',"}}
[info] >        'access-control-allow-credentials': 'true', {"user":"      'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-credentials': 'true',"}}
[info] >        'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE', {"user":"      'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',"}}
[info] >        'access-control-allow-origin': '*', {"user":"      'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-origin': '*',"}}
[info] >        'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >        'access-control-max-age': '300', {"user":"      'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-max-age': '300',"}}
[info] >        'cache-control': 'no-cache, no-store', {"user":"      'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cache-control': 'no-cache, no-store',"}}
[info] >        'content-security-policy': "base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=NWuD0q6lVLZgVGSowOr4Jk2BBrJaGWtXwtp_h3i8WQT1AJg8h2ShYPkLqF9NXdOqhQ3R1XHXNz48gVi-", {"user":"      'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=NWuD0q6lVLZgVGSowOr4Jk2BBrJaGWtXwtp_h3i8WQT1AJg8h2ShYPkLqF9NXdOqhQ3R1XHXNz48gVi-\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=NWuD0q6lVLZgVGSowOr4Jk2BBrJaGWtXwtp_h3i8WQT1AJg8h2ShYPkLqF9NXdOqhQ3R1XHXNz48gVi-\","}}
[info] >        'idempotency-key': '6952aa9f-38d8-45ea-90bb-ff1c8a23ade5', {"user":"      'idempotency-key': '6952aa9f-38d8-45ea-90bb-ff1c8a23ade5',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'idempotency-key': '6952aa9f-38d8-45ea-90bb-ff1c8a23ade5',"}}
[info] >        'original-request': 'req_YRrIqd8XW7a9mQ', {"user":"      'original-request': 'req_YRrIqd8XW7a9mQ',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'original-request': 'req_YRrIqd8XW7a9mQ',"}}
[info] >        'request-id': 'req_YRrIqd8XW7a9mQ', {"user":"      'request-id': 'req_YRrIqd8XW7a9mQ',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'request-id': 'req_YRrIqd8XW7a9mQ',"}}
[info] >        'stripe-version': '2025-02-24.acacia', {"user":"      'stripe-version': '2025-02-24.acacia',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'stripe-version': '2025-02-24.acacia',"}}
[info] >        vary: 'Origin', {"user":"      vary: 'Origin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       vary: 'Origin',"}}
[info] >        'x-stripe-priority-routing-enabled': 'true', {"user":"      'x-stripe-priority-routing-enabled': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-priority-routing-enabled': 'true',"}}
[info] >        'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"      'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >        'x-wc': 'ABGHI', {"user":"      'x-wc': 'ABGHI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-wc': 'ABGHI',"}}
[info] >        'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      statusCode: 400, {"user":"    statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     statusCode: 400,"}}
[info] >      requestId: 'req_YRrIqd8XW7a9mQ' {"user":"    requestId: 'req_YRrIqd8XW7a9mQ'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     requestId: 'req_YRrIqd8XW7a9mQ'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    rawType: 'invalid_request_error', {"user":"  rawType: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   rawType: 'invalid_request_error',"}}
[info] >    code: 'parameter_invalid_integer', {"user":"  code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'parameter_invalid_integer',"}}
[info] >    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"  doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >    param: 'amount', {"user":"  param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   param: 'amount',"}}
[info] >    detail: undefined, {"user":"  detail: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   detail: undefined,"}}
[info] >    headers: { {"user":"  headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   headers: {"}}
[info] >      server: 'nginx', {"user":"    server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     server: 'nginx',"}}
[info] >      date: 'Mon, 28 Apr 2025 12:46:42 GMT', {"user":"    date: 'Mon, 28 Apr 2025 12:46:42 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     date: 'Mon, 28 Apr 2025 12:46:42 GMT',"}}
[info] >      'content-type': 'application/json', {"user":"    'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-type': 'application/json',"}}
[info] >      'content-length': '663', {"user":"    'content-length': '663',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-length': '663',"}}
[info] >      connection: 'keep-alive', {"user":"    connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     connection: 'keep-alive',"}}
[info] >      'access-control-allow-credentials': 'true', {"user":"    'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-credentials': 'true',"}}
[info] >      'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE', {"user":"    'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',"}}
[info] >      'access-control-allow-origin': '*', {"user":"    'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-origin': '*',"}}
[info] >      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"    'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >      'access-control-max-age': '300', {"user":"    'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-max-age': '300',"}}
[info] >      'cache-control': 'no-cache, no-store', {"user":"    'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'cache-control': 'no-cache, no-store',"}}
[info] >      'content-security-policy': "base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=NWuD0q6lVLZgVGSowOr4Jk2BBrJaGWtXwtp_h3i8WQT1AJg8h2ShYPkLqF9NXdOqhQ3R1XHXNz48gVi-", {"user":"    'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=NWuD0q6lVLZgVGSowOr4Jk2BBrJaGWtXwtp_h3i8WQT1AJg8h2ShYPkLqF9NXdOqhQ3R1XHXNz48gVi-\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=NWuD0q6lVLZgVGSowOr4Jk2BBrJaGWtXwtp_h3i8WQT1AJg8h2ShYPkLqF9NXdOqhQ3R1XHXNz48gVi-\","}}
[info] >      'idempotency-key': '6952aa9f-38d8-45ea-90bb-ff1c8a23ade5', {"user":"    'idempotency-key': '6952aa9f-38d8-45ea-90bb-ff1c8a23ade5',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'idempotency-key': '6952aa9f-38d8-45ea-90bb-ff1c8a23ade5',"}}
[info] >      'original-request': 'req_YRrIqd8XW7a9mQ', {"user":"    'original-request': 'req_YRrIqd8XW7a9mQ',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'original-request': 'req_YRrIqd8XW7a9mQ',"}}
[info] >      'request-id': 'req_YRrIqd8XW7a9mQ', {"user":"    'request-id': 'req_YRrIqd8XW7a9mQ',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'request-id': 'req_YRrIqd8XW7a9mQ',"}}
[info] >      'stripe-version': '2025-02-24.acacia', {"user":"    'stripe-version': '2025-02-24.acacia',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'stripe-version': '2025-02-24.acacia',"}}
[info] >      vary: 'Origin', {"user":"    vary: 'Origin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     vary: 'Origin',"}}
[info] >      'x-stripe-priority-routing-enabled': 'true', {"user":"    'x-stripe-priority-routing-enabled': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-priority-routing-enabled': 'true',"}}
[info] >      'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"    'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >      'x-wc': 'ABGHI', {"user":"    'x-wc': 'ABGHI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-wc': 'ABGHI',"}}
[info] >      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"    'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    requestId: 'req_YRrIqd8XW7a9mQ', {"user":"  requestId: 'req_YRrIqd8XW7a9mQ',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   requestId: 'req_YRrIqd8XW7a9mQ',"}}
[info] >    statusCode: 400, {"user":"  statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statusCode: 400,"}}
[info] >    charge: undefined, {"user":"  charge: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   charge: undefined,"}}
[info] >    decline_code: undefined, {"user":"  decline_code: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   decline_code: undefined,"}}
[info] >    payment_intent: undefined, {"user":"  payment_intent: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_intent: undefined,"}}
[info] >    payment_method: undefined, {"user":"  payment_method: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method: undefined,"}}
[info] >    setup_intent: undefined, {"user":"  setup_intent: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   setup_intent: undefined,"}}
[info] >    source: undefined {"user":"  source: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   source: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v22.11.0 {"user":"Node.js v22.11.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v22.11.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2025-04-28T12:46:42.701Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T12:46:42.701Z] [worker-us-central1-api-72a76f53-06d7-4f0b-89c1-05fcf3582488]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-72a76f53-06d7-4f0b-89c1-05fcf3582488]: exited"}}
[debug] [2025-04-28T12:46:42.702Z] [worker-us-central1-api-72a76f53-06d7-4f0b-89c1-05fcf3582488]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-72a76f53-06d7-4f0b-89c1-05fcf3582488]: FINISHED"}}
[debug] [2025-04-28T12:46:49.827Z] [work-queue] {"queuedWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T12:46:49.827Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T12:46:49.828Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T12:46:49.827Z"],"workRunningCount":1}
[debug] [2025-04-28T12:46:49.828Z] Accepted request POST /clone-f330b/us-central1/api/payments/create?total=0 --> us-central1-api
[debug] [2025-04-28T12:46:49.832Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-04-28T12:46:49.832Z] [functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0"}}
[debug] [2025-04-28T12:46:49.832Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2025-04-28T12:46:49.834Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2025-04-28T12:46:49.834Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[info] >  (node:60598) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead. {"user":"(node:60598) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m (node:60598) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead."}}
[info] >  (Use `node --trace-deprecation ...` to show where the warning was created) {"user":"(Use `node --trace-deprecation ...` to show where the warning was created)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m (Use `node --trace-deprecation ...` to show where the warning was created)"}}
[debug] [2025-04-28T12:46:50.541Z] [runtime-status] [60598] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.13.0","resolution":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [60598] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"8.13.0\",\"resolution\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-04-28T12:46:50.542Z] [runtime-status] [60598] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.11.0","resolution":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-functions/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [60598] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.11.0\",\"resolution\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-functions/lib/index.js\"}"}}
[warn] ⚠  The Cloud Functions emulator requires the module "firebase-functions" to be version >3.13.1 so your version is too old. You can probably fix this by running "npm install firebase-functions@latest" in your functions directory. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"The Cloud Functions emulator requires the module \"firebase-functions\" to be version >3.13.1 so your version is too old. You can probably fix this by running \"npm install firebase-functions@latest\" in your functions directory."}}
[info] i  functions: Your functions could not be parsed due to an issue with your node_modules (see above) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Your functions could not be parsed due to an issue with your node_modules (see above)"}}
[debug] [2025-04-28T12:46:50.638Z] [runtime-status] [60598] Functions runtime initialized. {"cwd":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions","node_version":"22.11.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [60598] Functions runtime initialized. {\"cwd\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions\",\"node_version\":\"22.11.0\"}"}}
[debug] [2025-04-28T12:46:50.638Z] [runtime-status] [60598] Listening to port: /var/folders/b8/2ktxw5yj1xz8mylspf3xppwr0000gn/T/fire_emu_166f9199dd974034.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [60598] Listening to port: /var/folders/b8/2ktxw5yj1xz8mylspf3xppwr0000gn/T/fire_emu_166f9199dd974034.sock"}}
[debug] [2025-04-28T12:46:50.646Z] [worker-us-central1-api-94cd3559-d0d7-43b7-b6aa-cdeffc78f1ae]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-94cd3559-d0d7-43b7-b6aa-cdeffc78f1ae]: IDLE"}}
[debug] [2025-04-28T12:46:50.646Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-04-28T12:46:50.647Z] [worker-us-central1-api-94cd3559-d0d7-43b7-b6aa-cdeffc78f1ae]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-94cd3559-d0d7-43b7-b6aa-cdeffc78f1ae]: BUSY"}}
[info] >  Payment Request Recieved BOOM!!! for this amount >>>  0 {"user":"Payment Request Recieved BOOM!!! for this amount >>>  0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment Request Recieved BOOM!!! for this amount >>>  0"}}
[info] >  /Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39 {"user":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m /Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39"}}
[info] >          return new StripeInvalidRequestError(rawStripeError); {"user":"        return new StripeInvalidRequestError(rawStripeError);","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         return new StripeInvalidRequestError(rawStripeError);"}}
[info] >                 ^ {"user":"               ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents {"user":"StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents"}}
[info] >      at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16) {"user":"    at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16)"}}
[info] >      at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33) {"user":"    at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33)"}}
[info] >      at Object.onceWrapper (node:events:632:28) {"user":"    at Object.onceWrapper (node:events:632:28)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Object.onceWrapper (node:events:632:28)"}}
[info] >      at IncomingMessage.emit (node:events:530:35) {"user":"    at IncomingMessage.emit (node:events:530:35)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.emit (node:events:530:35)"}}
[info] >      at endReadableNT (node:internal/streams/readable:1698:12) {"user":"    at endReadableNT (node:internal/streams/readable:1698:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at endReadableNT (node:internal/streams/readable:1698:12)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:90:21) { {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {"}}
[info] >    type: 'StripeInvalidRequestError', {"user":"  type: 'StripeInvalidRequestError',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'StripeInvalidRequestError',"}}
[info] >    raw: { {"user":"  raw: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   raw: {"}}
[info] >      code: 'parameter_invalid_integer', {"user":"    code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 'parameter_invalid_integer',"}}
[info] >      doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >      message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents', {"user":"    message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents',"}}
[info] >      param: 'amount', {"user":"    param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     param: 'amount',"}}
[info] >      request_log_url: 'https://dashboard.stripe.com/test/logs/req_mVTYGDfvvRDKie?t=1745844411', {"user":"    request_log_url: 'https://dashboard.stripe.com/test/logs/req_mVTYGDfvvRDKie?t=1745844411',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     request_log_url: 'https://dashboard.stripe.com/test/logs/req_mVTYGDfvvRDKie?t=1745844411',"}}
[info] >      type: 'invalid_request_error', {"user":"    type: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     type: 'invalid_request_error',"}}
[info] >      headers: { {"user":"    headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     headers: {"}}
[info] >        server: 'nginx', {"user":"      server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       server: 'nginx',"}}
[info] >        date: 'Mon, 28 Apr 2025 12:46:51 GMT', {"user":"      date: 'Mon, 28 Apr 2025 12:46:51 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       date: 'Mon, 28 Apr 2025 12:46:51 GMT',"}}
[info] >        'content-type': 'application/json', {"user":"      'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-type': 'application/json',"}}
[info] >        'content-length': '663', {"user":"      'content-length': '663',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-length': '663',"}}
[info] >        connection: 'keep-alive', {"user":"      connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       connection: 'keep-alive',"}}
[info] >        'access-control-allow-credentials': 'true', {"user":"      'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-credentials': 'true',"}}
[info] >        'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE', {"user":"      'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',"}}
[info] >        'access-control-allow-origin': '*', {"user":"      'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-origin': '*',"}}
[info] >        'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >        'access-control-max-age': '300', {"user":"      'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-max-age': '300',"}}
[info] >        'cache-control': 'no-cache, no-store', {"user":"      'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cache-control': 'no-cache, no-store',"}}
[info] >        'content-security-policy': "base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=n8vvE8gqjKcYIHuTDovkpCSKFm1gCb0j0IIS0NuoCs68DhdGfLqntVBnWaQjRTaMbDV-pprzc1UmA1ws", {"user":"      'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=n8vvE8gqjKcYIHuTDovkpCSKFm1gCb0j0IIS0NuoCs68DhdGfLqntVBnWaQjRTaMbDV-pprzc1UmA1ws\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=n8vvE8gqjKcYIHuTDovkpCSKFm1gCb0j0IIS0NuoCs68DhdGfLqntVBnWaQjRTaMbDV-pprzc1UmA1ws\","}}
[info] >        'idempotency-key': 'c7e5997f-5c34-459d-b87d-b7c4afe1f0f8', {"user":"      'idempotency-key': 'c7e5997f-5c34-459d-b87d-b7c4afe1f0f8',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'idempotency-key': 'c7e5997f-5c34-459d-b87d-b7c4afe1f0f8',"}}
[info] >        'original-request': 'req_mVTYGDfvvRDKie', {"user":"      'original-request': 'req_mVTYGDfvvRDKie',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'original-request': 'req_mVTYGDfvvRDKie',"}}
[info] >        'request-id': 'req_mVTYGDfvvRDKie', {"user":"      'request-id': 'req_mVTYGDfvvRDKie',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'request-id': 'req_mVTYGDfvvRDKie',"}}
[info] >        'stripe-version': '2025-02-24.acacia', {"user":"      'stripe-version': '2025-02-24.acacia',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'stripe-version': '2025-02-24.acacia',"}}
[info] >        vary: 'Origin', {"user":"      vary: 'Origin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       vary: 'Origin',"}}
[info] >        'x-stripe-priority-routing-enabled': 'true', {"user":"      'x-stripe-priority-routing-enabled': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-priority-routing-enabled': 'true',"}}
[info] >        'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"      'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >        'x-wc': 'ABGHI', {"user":"      'x-wc': 'ABGHI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-wc': 'ABGHI',"}}
[info] >        'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      statusCode: 400, {"user":"    statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     statusCode: 400,"}}
[info] >      requestId: 'req_mVTYGDfvvRDKie' {"user":"    requestId: 'req_mVTYGDfvvRDKie'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     requestId: 'req_mVTYGDfvvRDKie'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    rawType: 'invalid_request_error', {"user":"  rawType: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   rawType: 'invalid_request_error',"}}
[info] >    code: 'parameter_invalid_integer', {"user":"  code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'parameter_invalid_integer',"}}
[info] >    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"  doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >    param: 'amount', {"user":"  param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   param: 'amount',"}}
[info] >    detail: undefined, {"user":"  detail: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   detail: undefined,"}}
[info] >    headers: { {"user":"  headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   headers: {"}}
[info] >      server: 'nginx', {"user":"    server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     server: 'nginx',"}}
[info] >      date: 'Mon, 28 Apr 2025 12:46:51 GMT', {"user":"    date: 'Mon, 28 Apr 2025 12:46:51 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     date: 'Mon, 28 Apr 2025 12:46:51 GMT',"}}
[info] >      'content-type': 'application/json', {"user":"    'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-type': 'application/json',"}}
[info] >      'content-length': '663', {"user":"    'content-length': '663',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-length': '663',"}}
[info] >      connection: 'keep-alive', {"user":"    connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     connection: 'keep-alive',"}}
[info] >      'access-control-allow-credentials': 'true', {"user":"    'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-credentials': 'true',"}}
[info] >      'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE', {"user":"    'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',"}}
[info] >      'access-control-allow-origin': '*', {"user":"    'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-origin': '*',"}}
[info] >      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"    'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >      'access-control-max-age': '300', {"user":"    'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-max-age': '300',"}}
[info] >      'cache-control': 'no-cache, no-store', {"user":"    'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'cache-control': 'no-cache, no-store',"}}
[info] >      'content-security-policy': "base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=n8vvE8gqjKcYIHuTDovkpCSKFm1gCb0j0IIS0NuoCs68DhdGfLqntVBnWaQjRTaMbDV-pprzc1UmA1ws", {"user":"    'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=n8vvE8gqjKcYIHuTDovkpCSKFm1gCb0j0IIS0NuoCs68DhdGfLqntVBnWaQjRTaMbDV-pprzc1UmA1ws\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=n8vvE8gqjKcYIHuTDovkpCSKFm1gCb0j0IIS0NuoCs68DhdGfLqntVBnWaQjRTaMbDV-pprzc1UmA1ws\","}}
[info] >      'idempotency-key': 'c7e5997f-5c34-459d-b87d-b7c4afe1f0f8', {"user":"    'idempotency-key': 'c7e5997f-5c34-459d-b87d-b7c4afe1f0f8',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'idempotency-key': 'c7e5997f-5c34-459d-b87d-b7c4afe1f0f8',"}}
[info] >      'original-request': 'req_mVTYGDfvvRDKie', {"user":"    'original-request': 'req_mVTYGDfvvRDKie',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'original-request': 'req_mVTYGDfvvRDKie',"}}
[info] >      'request-id': 'req_mVTYGDfvvRDKie', {"user":"    'request-id': 'req_mVTYGDfvvRDKie',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'request-id': 'req_mVTYGDfvvRDKie',"}}
[info] >      'stripe-version': '2025-02-24.acacia', {"user":"    'stripe-version': '2025-02-24.acacia',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'stripe-version': '2025-02-24.acacia',"}}
[info] >      vary: 'Origin', {"user":"    vary: 'Origin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     vary: 'Origin',"}}
[info] >      'x-stripe-priority-routing-enabled': 'true', {"user":"    'x-stripe-priority-routing-enabled': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-priority-routing-enabled': 'true',"}}
[info] >      'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"    'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >      'x-wc': 'ABGHI', {"user":"    'x-wc': 'ABGHI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-wc': 'ABGHI',"}}
[info] >      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"    'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    requestId: 'req_mVTYGDfvvRDKie', {"user":"  requestId: 'req_mVTYGDfvvRDKie',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   requestId: 'req_mVTYGDfvvRDKie',"}}
[info] >    statusCode: 400, {"user":"  statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statusCode: 400,"}}
[info] >    charge: undefined, {"user":"  charge: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   charge: undefined,"}}
[info] >    decline_code: undefined, {"user":"  decline_code: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   decline_code: undefined,"}}
[info] >    payment_intent: undefined, {"user":"  payment_intent: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_intent: undefined,"}}
[info] >    payment_method: undefined, {"user":"  payment_method: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method: undefined,"}}
[info] >    setup_intent: undefined, {"user":"  setup_intent: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   setup_intent: undefined,"}}
[info] >    source: undefined {"user":"  source: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   source: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v22.11.0 {"user":"Node.js v22.11.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v22.11.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2025-04-28T12:46:51.191Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T12:46:51.191Z] [worker-us-central1-api-94cd3559-d0d7-43b7-b6aa-cdeffc78f1ae]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-94cd3559-d0d7-43b7-b6aa-cdeffc78f1ae]: exited"}}
[debug] [2025-04-28T12:46:51.191Z] [worker-us-central1-api-94cd3559-d0d7-43b7-b6aa-cdeffc78f1ae]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-94cd3559-d0d7-43b7-b6aa-cdeffc78f1ae]: FINISHED"}}
[debug] [2025-04-28T12:47:12.953Z] [work-queue] {"queuedWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T12:47:12.953Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T12:47:12.953Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T12:47:12.953Z"],"workRunningCount":1}
[debug] [2025-04-28T12:47:12.953Z] Accepted request POST /clone-f330b/us-central1/api/payments/create?total=0 --> us-central1-api
[debug] [2025-04-28T12:47:12.955Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-04-28T12:47:12.955Z] [functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0"}}
[debug] [2025-04-28T12:47:12.955Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2025-04-28T12:47:12.956Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2025-04-28T12:47:12.956Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[info] >  (node:60654) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead. {"user":"(node:60654) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m (node:60654) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead."}}
[info] >  (Use `node --trace-deprecation ...` to show where the warning was created) {"user":"(Use `node --trace-deprecation ...` to show where the warning was created)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m (Use `node --trace-deprecation ...` to show where the warning was created)"}}
[debug] [2025-04-28T12:47:13.583Z] [runtime-status] [60654] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.13.0","resolution":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [60654] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"8.13.0\",\"resolution\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-04-28T12:47:13.583Z] [runtime-status] [60654] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.11.0","resolution":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-functions/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [60654] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.11.0\",\"resolution\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-functions/lib/index.js\"}"}}
[warn] ⚠  The Cloud Functions emulator requires the module "firebase-functions" to be version >3.13.1 so your version is too old. You can probably fix this by running "npm install firebase-functions@latest" in your functions directory. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"The Cloud Functions emulator requires the module \"firebase-functions\" to be version >3.13.1 so your version is too old. You can probably fix this by running \"npm install firebase-functions@latest\" in your functions directory."}}
[info] i  functions: Your functions could not be parsed due to an issue with your node_modules (see above) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Your functions could not be parsed due to an issue with your node_modules (see above)"}}
[debug] [2025-04-28T12:47:13.658Z] [runtime-status] [60654] Functions runtime initialized. {"cwd":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions","node_version":"22.11.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [60654] Functions runtime initialized. {\"cwd\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions\",\"node_version\":\"22.11.0\"}"}}
[debug] [2025-04-28T12:47:13.658Z] [runtime-status] [60654] Listening to port: /var/folders/b8/2ktxw5yj1xz8mylspf3xppwr0000gn/T/fire_emu_df7c32897a40439b.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [60654] Listening to port: /var/folders/b8/2ktxw5yj1xz8mylspf3xppwr0000gn/T/fire_emu_df7c32897a40439b.sock"}}
[debug] [2025-04-28T12:47:13.670Z] [worker-us-central1-api-83ce5c08-6143-46fb-b75c-471d7641e67e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-83ce5c08-6143-46fb-b75c-471d7641e67e]: IDLE"}}
[debug] [2025-04-28T12:47:13.670Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-04-28T12:47:13.670Z] [worker-us-central1-api-83ce5c08-6143-46fb-b75c-471d7641e67e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-83ce5c08-6143-46fb-b75c-471d7641e67e]: BUSY"}}
[info] >  Payment Request Recieved BOOM!!! for this amount >>>  0 {"user":"Payment Request Recieved BOOM!!! for this amount >>>  0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment Request Recieved BOOM!!! for this amount >>>  0"}}
[info] >  /Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39 {"user":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m /Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39"}}
[info] >          return new StripeInvalidRequestError(rawStripeError); {"user":"        return new StripeInvalidRequestError(rawStripeError);","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         return new StripeInvalidRequestError(rawStripeError);"}}
[info] >                 ^ {"user":"               ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents {"user":"StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents"}}
[info] >      at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16) {"user":"    at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16)"}}
[info] >      at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33) {"user":"    at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33)"}}
[info] >      at Object.onceWrapper (node:events:632:28) {"user":"    at Object.onceWrapper (node:events:632:28)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Object.onceWrapper (node:events:632:28)"}}
[info] >      at IncomingMessage.emit (node:events:530:35) {"user":"    at IncomingMessage.emit (node:events:530:35)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.emit (node:events:530:35)"}}
[info] >      at endReadableNT (node:internal/streams/readable:1698:12) {"user":"    at endReadableNT (node:internal/streams/readable:1698:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at endReadableNT (node:internal/streams/readable:1698:12)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:90:21) { {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {"}}
[info] >    type: 'StripeInvalidRequestError', {"user":"  type: 'StripeInvalidRequestError',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'StripeInvalidRequestError',"}}
[info] >    raw: { {"user":"  raw: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   raw: {"}}
[info] >      code: 'parameter_invalid_integer', {"user":"    code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 'parameter_invalid_integer',"}}
[info] >      doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >      message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents', {"user":"    message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents',"}}
[info] >      param: 'amount', {"user":"    param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     param: 'amount',"}}
[info] >      request_log_url: 'https://dashboard.stripe.com/test/logs/req_tJyHvFK5WzyrL4?t=1745844434', {"user":"    request_log_url: 'https://dashboard.stripe.com/test/logs/req_tJyHvFK5WzyrL4?t=1745844434',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     request_log_url: 'https://dashboard.stripe.com/test/logs/req_tJyHvFK5WzyrL4?t=1745844434',"}}
[info] >      type: 'invalid_request_error', {"user":"    type: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     type: 'invalid_request_error',"}}
[info] >      headers: { {"user":"    headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     headers: {"}}
[info] >        server: 'nginx', {"user":"      server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       server: 'nginx',"}}
[info] >        date: 'Mon, 28 Apr 2025 12:47:14 GMT', {"user":"      date: 'Mon, 28 Apr 2025 12:47:14 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       date: 'Mon, 28 Apr 2025 12:47:14 GMT',"}}
[info] >        'content-type': 'application/json', {"user":"      'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-type': 'application/json',"}}
[info] >        'content-length': '663', {"user":"      'content-length': '663',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-length': '663',"}}
[info] >        connection: 'keep-alive', {"user":"      connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       connection: 'keep-alive',"}}
[info] >        'access-control-allow-credentials': 'true', {"user":"      'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-credentials': 'true',"}}
[info] >        'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE', {"user":"      'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',"}}
[info] >        'access-control-allow-origin': '*', {"user":"      'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-origin': '*',"}}
[info] >        'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >        'access-control-max-age': '300', {"user":"      'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-max-age': '300',"}}
[info] >        'cache-control': 'no-cache, no-store', {"user":"      'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cache-control': 'no-cache, no-store',"}}
[info] >        'content-security-policy': "base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=NQbbMIiD1Agj51uBF_5NgDpNzLJHHsaJXTacaZmKdb8eAes07n0KvrCrapdd7Y5qlWS2N_oGks0GmiI5", {"user":"      'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=NQbbMIiD1Agj51uBF_5NgDpNzLJHHsaJXTacaZmKdb8eAes07n0KvrCrapdd7Y5qlWS2N_oGks0GmiI5\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=NQbbMIiD1Agj51uBF_5NgDpNzLJHHsaJXTacaZmKdb8eAes07n0KvrCrapdd7Y5qlWS2N_oGks0GmiI5\","}}
[info] >        'idempotency-key': '9058284f-63c5-4a06-bbcf-6856cb244398', {"user":"      'idempotency-key': '9058284f-63c5-4a06-bbcf-6856cb244398',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'idempotency-key': '9058284f-63c5-4a06-bbcf-6856cb244398',"}}
[info] >        'original-request': 'req_tJyHvFK5WzyrL4', {"user":"      'original-request': 'req_tJyHvFK5WzyrL4',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'original-request': 'req_tJyHvFK5WzyrL4',"}}
[info] >        'request-id': 'req_tJyHvFK5WzyrL4', {"user":"      'request-id': 'req_tJyHvFK5WzyrL4',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'request-id': 'req_tJyHvFK5WzyrL4',"}}
[info] >        'stripe-version': '2025-02-24.acacia', {"user":"      'stripe-version': '2025-02-24.acacia',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'stripe-version': '2025-02-24.acacia',"}}
[info] >        vary: 'Origin', {"user":"      vary: 'Origin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       vary: 'Origin',"}}
[info] >        'x-stripe-priority-routing-enabled': 'true', {"user":"      'x-stripe-priority-routing-enabled': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-priority-routing-enabled': 'true',"}}
[info] >        'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"      'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >        'x-wc': 'ABGHI', {"user":"      'x-wc': 'ABGHI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-wc': 'ABGHI',"}}
[info] >        'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      statusCode: 400, {"user":"    statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     statusCode: 400,"}}
[info] >      requestId: 'req_tJyHvFK5WzyrL4' {"user":"    requestId: 'req_tJyHvFK5WzyrL4'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     requestId: 'req_tJyHvFK5WzyrL4'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    rawType: 'invalid_request_error', {"user":"  rawType: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   rawType: 'invalid_request_error',"}}
[info] >    code: 'parameter_invalid_integer', {"user":"  code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'parameter_invalid_integer',"}}
[info] >    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"  doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >    param: 'amount', {"user":"  param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   param: 'amount',"}}
[info] >    detail: undefined, {"user":"  detail: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   detail: undefined,"}}
[info] >    headers: { {"user":"  headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   headers: {"}}
[info] >      server: 'nginx', {"user":"    server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     server: 'nginx',"}}
[info] >      date: 'Mon, 28 Apr 2025 12:47:14 GMT', {"user":"    date: 'Mon, 28 Apr 2025 12:47:14 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     date: 'Mon, 28 Apr 2025 12:47:14 GMT',"}}
[info] >      'content-type': 'application/json', {"user":"    'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-type': 'application/json',"}}
[info] >      'content-length': '663', {"user":"    'content-length': '663',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-length': '663',"}}
[info] >      connection: 'keep-alive', {"user":"    connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     connection: 'keep-alive',"}}
[info] >      'access-control-allow-credentials': 'true', {"user":"    'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-credentials': 'true',"}}
[info] >      'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE', {"user":"    'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',"}}
[info] >      'access-control-allow-origin': '*', {"user":"    'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-origin': '*',"}}
[info] >      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"    'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >      'access-control-max-age': '300', {"user":"    'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-max-age': '300',"}}
[info] >      'cache-control': 'no-cache, no-store', {"user":"    'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'cache-control': 'no-cache, no-store',"}}
[info] >      'content-security-policy': "base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=NQbbMIiD1Agj51uBF_5NgDpNzLJHHsaJXTacaZmKdb8eAes07n0KvrCrapdd7Y5qlWS2N_oGks0GmiI5", {"user":"    'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=NQbbMIiD1Agj51uBF_5NgDpNzLJHHsaJXTacaZmKdb8eAes07n0KvrCrapdd7Y5qlWS2N_oGks0GmiI5\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=NQbbMIiD1Agj51uBF_5NgDpNzLJHHsaJXTacaZmKdb8eAes07n0KvrCrapdd7Y5qlWS2N_oGks0GmiI5\","}}
[info] >      'idempotency-key': '9058284f-63c5-4a06-bbcf-6856cb244398', {"user":"    'idempotency-key': '9058284f-63c5-4a06-bbcf-6856cb244398',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'idempotency-key': '9058284f-63c5-4a06-bbcf-6856cb244398',"}}
[info] >      'original-request': 'req_tJyHvFK5WzyrL4', {"user":"    'original-request': 'req_tJyHvFK5WzyrL4',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'original-request': 'req_tJyHvFK5WzyrL4',"}}
[info] >      'request-id': 'req_tJyHvFK5WzyrL4', {"user":"    'request-id': 'req_tJyHvFK5WzyrL4',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'request-id': 'req_tJyHvFK5WzyrL4',"}}
[info] >      'stripe-version': '2025-02-24.acacia', {"user":"    'stripe-version': '2025-02-24.acacia',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'stripe-version': '2025-02-24.acacia',"}}
[info] >      vary: 'Origin', {"user":"    vary: 'Origin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     vary: 'Origin',"}}
[info] >      'x-stripe-priority-routing-enabled': 'true', {"user":"    'x-stripe-priority-routing-enabled': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-priority-routing-enabled': 'true',"}}
[info] >      'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"    'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >      'x-wc': 'ABGHI', {"user":"    'x-wc': 'ABGHI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-wc': 'ABGHI',"}}
[info] >      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"    'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    requestId: 'req_tJyHvFK5WzyrL4', {"user":"  requestId: 'req_tJyHvFK5WzyrL4',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   requestId: 'req_tJyHvFK5WzyrL4',"}}
[info] >    statusCode: 400, {"user":"  statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statusCode: 400,"}}
[info] >    charge: undefined, {"user":"  charge: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   charge: undefined,"}}
[info] >    decline_code: undefined, {"user":"  decline_code: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   decline_code: undefined,"}}
[info] >    payment_intent: undefined, {"user":"  payment_intent: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_intent: undefined,"}}
[info] >    payment_method: undefined, {"user":"  payment_method: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method: undefined,"}}
[info] >    setup_intent: undefined, {"user":"  setup_intent: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   setup_intent: undefined,"}}
[info] >    source: undefined {"user":"  source: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   source: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v22.11.0 {"user":"Node.js v22.11.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v22.11.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2025-04-28T12:47:14.192Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T12:47:14.192Z] [worker-us-central1-api-83ce5c08-6143-46fb-b75c-471d7641e67e]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-83ce5c08-6143-46fb-b75c-471d7641e67e]: exited"}}
[debug] [2025-04-28T12:47:14.192Z] [worker-us-central1-api-83ce5c08-6143-46fb-b75c-471d7641e67e]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-83ce5c08-6143-46fb-b75c-471d7641e67e]: FINISHED"}}
[debug] [2025-04-28T12:47:16.961Z] [work-queue] {"queuedWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T12:47:16.961Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T12:47:16.962Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T12:47:16.961Z"],"workRunningCount":1}
[debug] [2025-04-28T12:47:16.962Z] Accepted request POST /clone-f330b/us-central1/api/payments/create?total=0 --> us-central1-api
[debug] [2025-04-28T12:47:16.963Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-04-28T12:47:16.963Z] [functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0"}}
[debug] [2025-04-28T12:47:16.963Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2025-04-28T12:47:16.964Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2025-04-28T12:47:16.964Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[info] >  (node:60669) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead. {"user":"(node:60669) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m (node:60669) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead."}}
[info] >  (Use `node --trace-deprecation ...` to show where the warning was created) {"user":"(Use `node --trace-deprecation ...` to show where the warning was created)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m (Use `node --trace-deprecation ...` to show where the warning was created)"}}
[debug] [2025-04-28T12:47:17.386Z] [runtime-status] [60669] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.13.0","resolution":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [60669] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"8.13.0\",\"resolution\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-04-28T12:47:17.386Z] [runtime-status] [60669] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.11.0","resolution":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-functions/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [60669] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.11.0\",\"resolution\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-functions/lib/index.js\"}"}}
[warn] ⚠  The Cloud Functions emulator requires the module "firebase-functions" to be version >3.13.1 so your version is too old. You can probably fix this by running "npm install firebase-functions@latest" in your functions directory. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"The Cloud Functions emulator requires the module \"firebase-functions\" to be version >3.13.1 so your version is too old. You can probably fix this by running \"npm install firebase-functions@latest\" in your functions directory."}}
[info] i  functions: Your functions could not be parsed due to an issue with your node_modules (see above) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Your functions could not be parsed due to an issue with your node_modules (see above)"}}
[debug] [2025-04-28T12:47:17.424Z] [runtime-status] [60669] Functions runtime initialized. {"cwd":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions","node_version":"22.11.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [60669] Functions runtime initialized. {\"cwd\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions\",\"node_version\":\"22.11.0\"}"}}
[debug] [2025-04-28T12:47:17.424Z] [runtime-status] [60669] Listening to port: /var/folders/b8/2ktxw5yj1xz8mylspf3xppwr0000gn/T/fire_emu_dc7d8a2b59be2835.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [60669] Listening to port: /var/folders/b8/2ktxw5yj1xz8mylspf3xppwr0000gn/T/fire_emu_dc7d8a2b59be2835.sock"}}
[debug] [2025-04-28T12:47:17.473Z] [worker-us-central1-api-1dd99ace-6275-4aa6-a885-a9fcbb98565a]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1dd99ace-6275-4aa6-a885-a9fcbb98565a]: IDLE"}}
[debug] [2025-04-28T12:47:17.473Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-04-28T12:47:17.473Z] [worker-us-central1-api-1dd99ace-6275-4aa6-a885-a9fcbb98565a]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1dd99ace-6275-4aa6-a885-a9fcbb98565a]: BUSY"}}
[info] >  Payment Request Recieved BOOM!!! for this amount >>>  0 {"user":"Payment Request Recieved BOOM!!! for this amount >>>  0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment Request Recieved BOOM!!! for this amount >>>  0"}}
[info] >  /Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39 {"user":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m /Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39"}}
[info] >          return new StripeInvalidRequestError(rawStripeError); {"user":"        return new StripeInvalidRequestError(rawStripeError);","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         return new StripeInvalidRequestError(rawStripeError);"}}
[info] >                 ^ {"user":"               ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents {"user":"StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents"}}
[info] >      at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16) {"user":"    at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16)"}}
[info] >      at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33) {"user":"    at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33)"}}
[info] >      at Object.onceWrapper (node:events:632:28) {"user":"    at Object.onceWrapper (node:events:632:28)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Object.onceWrapper (node:events:632:28)"}}
[info] >      at IncomingMessage.emit (node:events:530:35) {"user":"    at IncomingMessage.emit (node:events:530:35)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.emit (node:events:530:35)"}}
[info] >      at endReadableNT (node:internal/streams/readable:1698:12) {"user":"    at endReadableNT (node:internal/streams/readable:1698:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at endReadableNT (node:internal/streams/readable:1698:12)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:90:21) { {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {"}}
[info] >    type: 'StripeInvalidRequestError', {"user":"  type: 'StripeInvalidRequestError',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'StripeInvalidRequestError',"}}
[info] >    raw: { {"user":"  raw: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   raw: {"}}
[info] >      code: 'parameter_invalid_integer', {"user":"    code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 'parameter_invalid_integer',"}}
[info] >      doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >      message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents', {"user":"    message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents',"}}
[info] >      param: 'amount', {"user":"    param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     param: 'amount',"}}
[info] >      request_log_url: 'https://dashboard.stripe.com/test/logs/req_VPLnjtfDZHVrqF?t=1745844437', {"user":"    request_log_url: 'https://dashboard.stripe.com/test/logs/req_VPLnjtfDZHVrqF?t=1745844437',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     request_log_url: 'https://dashboard.stripe.com/test/logs/req_VPLnjtfDZHVrqF?t=1745844437',"}}
[info] >      type: 'invalid_request_error', {"user":"    type: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     type: 'invalid_request_error',"}}
[info] >      headers: { {"user":"    headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     headers: {"}}
[info] >        server: 'nginx', {"user":"      server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       server: 'nginx',"}}
[info] >        date: 'Mon, 28 Apr 2025 12:47:17 GMT', {"user":"      date: 'Mon, 28 Apr 2025 12:47:17 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       date: 'Mon, 28 Apr 2025 12:47:17 GMT',"}}
[info] >        'content-type': 'application/json', {"user":"      'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-type': 'application/json',"}}
[info] >        'content-length': '663', {"user":"      'content-length': '663',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-length': '663',"}}
[info] >        connection: 'keep-alive', {"user":"      connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       connection: 'keep-alive',"}}
[info] >        'access-control-allow-credentials': 'true', {"user":"      'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-credentials': 'true',"}}
[info] >        'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE', {"user":"      'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',"}}
[info] >        'access-control-allow-origin': '*', {"user":"      'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-origin': '*',"}}
[info] >        'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >        'access-control-max-age': '300', {"user":"      'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-max-age': '300',"}}
[info] >        'cache-control': 'no-cache, no-store', {"user":"      'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cache-control': 'no-cache, no-store',"}}
[info] >        'content-security-policy': "base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=NQbbMIiD1Agj51uBF_5NgDpNzLJHHsaJXTacaZmKdb8eAes07n0KvrCrapdd7Y5qlWS2N_oGks0GmiI5", {"user":"      'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=NQbbMIiD1Agj51uBF_5NgDpNzLJHHsaJXTacaZmKdb8eAes07n0KvrCrapdd7Y5qlWS2N_oGks0GmiI5\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=NQbbMIiD1Agj51uBF_5NgDpNzLJHHsaJXTacaZmKdb8eAes07n0KvrCrapdd7Y5qlWS2N_oGks0GmiI5\","}}
[info] >        'idempotency-key': '109ba9be-927f-47d9-a33c-f80cbaeecd52', {"user":"      'idempotency-key': '109ba9be-927f-47d9-a33c-f80cbaeecd52',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'idempotency-key': '109ba9be-927f-47d9-a33c-f80cbaeecd52',"}}
[info] >        'original-request': 'req_VPLnjtfDZHVrqF', {"user":"      'original-request': 'req_VPLnjtfDZHVrqF',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'original-request': 'req_VPLnjtfDZHVrqF',"}}
[info] >        'request-id': 'req_VPLnjtfDZHVrqF', {"user":"      'request-id': 'req_VPLnjtfDZHVrqF',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'request-id': 'req_VPLnjtfDZHVrqF',"}}
[info] >        'stripe-version': '2025-02-24.acacia', {"user":"      'stripe-version': '2025-02-24.acacia',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'stripe-version': '2025-02-24.acacia',"}}
[info] >        vary: 'Origin', {"user":"      vary: 'Origin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       vary: 'Origin',"}}
[info] >        'x-stripe-priority-routing-enabled': 'true', {"user":"      'x-stripe-priority-routing-enabled': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-priority-routing-enabled': 'true',"}}
[info] >        'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"      'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >        'x-wc': 'ABGHI', {"user":"      'x-wc': 'ABGHI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-wc': 'ABGHI',"}}
[info] >        'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      statusCode: 400, {"user":"    statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     statusCode: 400,"}}
[info] >      requestId: 'req_VPLnjtfDZHVrqF' {"user":"    requestId: 'req_VPLnjtfDZHVrqF'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     requestId: 'req_VPLnjtfDZHVrqF'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    rawType: 'invalid_request_error', {"user":"  rawType: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   rawType: 'invalid_request_error',"}}
[info] >    code: 'parameter_invalid_integer', {"user":"  code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'parameter_invalid_integer',"}}
[info] >    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"  doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >    param: 'amount', {"user":"  param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   param: 'amount',"}}
[info] >    detail: undefined, {"user":"  detail: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   detail: undefined,"}}
[info] >    headers: { {"user":"  headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   headers: {"}}
[info] >      server: 'nginx', {"user":"    server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     server: 'nginx',"}}
[info] >      date: 'Mon, 28 Apr 2025 12:47:17 GMT', {"user":"    date: 'Mon, 28 Apr 2025 12:47:17 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     date: 'Mon, 28 Apr 2025 12:47:17 GMT',"}}
[info] >      'content-type': 'application/json', {"user":"    'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-type': 'application/json',"}}
[info] >      'content-length': '663', {"user":"    'content-length': '663',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-length': '663',"}}
[info] >      connection: 'keep-alive', {"user":"    connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     connection: 'keep-alive',"}}
[info] >      'access-control-allow-credentials': 'true', {"user":"    'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-credentials': 'true',"}}
[info] >      'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE', {"user":"    'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',"}}
[info] >      'access-control-allow-origin': '*', {"user":"    'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-origin': '*',"}}
[info] >      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"    'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >      'access-control-max-age': '300', {"user":"    'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-max-age': '300',"}}
[info] >      'cache-control': 'no-cache, no-store', {"user":"    'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'cache-control': 'no-cache, no-store',"}}
[info] >      'content-security-policy': "base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=NQbbMIiD1Agj51uBF_5NgDpNzLJHHsaJXTacaZmKdb8eAes07n0KvrCrapdd7Y5qlWS2N_oGks0GmiI5", {"user":"    'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=NQbbMIiD1Agj51uBF_5NgDpNzLJHHsaJXTacaZmKdb8eAes07n0KvrCrapdd7Y5qlWS2N_oGks0GmiI5\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=NQbbMIiD1Agj51uBF_5NgDpNzLJHHsaJXTacaZmKdb8eAes07n0KvrCrapdd7Y5qlWS2N_oGks0GmiI5\","}}
[info] >      'idempotency-key': '109ba9be-927f-47d9-a33c-f80cbaeecd52', {"user":"    'idempotency-key': '109ba9be-927f-47d9-a33c-f80cbaeecd52',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'idempotency-key': '109ba9be-927f-47d9-a33c-f80cbaeecd52',"}}
[info] >      'original-request': 'req_VPLnjtfDZHVrqF', {"user":"    'original-request': 'req_VPLnjtfDZHVrqF',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'original-request': 'req_VPLnjtfDZHVrqF',"}}
[info] >      'request-id': 'req_VPLnjtfDZHVrqF', {"user":"    'request-id': 'req_VPLnjtfDZHVrqF',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'request-id': 'req_VPLnjtfDZHVrqF',"}}
[info] >      'stripe-version': '2025-02-24.acacia', {"user":"    'stripe-version': '2025-02-24.acacia',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'stripe-version': '2025-02-24.acacia',"}}
[info] >      vary: 'Origin', {"user":"    vary: 'Origin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     vary: 'Origin',"}}
[info] >      'x-stripe-priority-routing-enabled': 'true', {"user":"    'x-stripe-priority-routing-enabled': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-priority-routing-enabled': 'true',"}}
[info] >      'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"    'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >      'x-wc': 'ABGHI', {"user":"    'x-wc': 'ABGHI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-wc': 'ABGHI',"}}
[info] >      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"    'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    requestId: 'req_VPLnjtfDZHVrqF', {"user":"  requestId: 'req_VPLnjtfDZHVrqF',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   requestId: 'req_VPLnjtfDZHVrqF',"}}
[info] >    statusCode: 400, {"user":"  statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statusCode: 400,"}}
[info] >    charge: undefined, {"user":"  charge: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   charge: undefined,"}}
[info] >    decline_code: undefined, {"user":"  decline_code: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   decline_code: undefined,"}}
[info] >    payment_intent: undefined, {"user":"  payment_intent: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_intent: undefined,"}}
[info] >    payment_method: undefined, {"user":"  payment_method: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method: undefined,"}}
[info] >    setup_intent: undefined, {"user":"  setup_intent: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   setup_intent: undefined,"}}
[info] >    source: undefined {"user":"  source: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   source: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v22.11.0 {"user":"Node.js v22.11.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v22.11.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2025-04-28T12:47:18.073Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T12:47:18.073Z] [worker-us-central1-api-1dd99ace-6275-4aa6-a885-a9fcbb98565a]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1dd99ace-6275-4aa6-a885-a9fcbb98565a]: exited"}}
[debug] [2025-04-28T12:47:18.073Z] [worker-us-central1-api-1dd99ace-6275-4aa6-a885-a9fcbb98565a]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-1dd99ace-6275-4aa6-a885-a9fcbb98565a]: FINISHED"}}
[debug] [2025-04-28T12:47:24.071Z] [work-queue] {"queuedWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T12:47:24.071Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T12:47:24.071Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T12:47:24.071Z"],"workRunningCount":1}
[debug] [2025-04-28T12:47:24.071Z] Accepted request POST /clone-f330b/us-central1/api/payments/create?total=0 --> us-central1-api
[debug] [2025-04-28T12:47:24.074Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-04-28T12:47:24.074Z] [functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0"}}
[debug] [2025-04-28T12:47:24.074Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2025-04-28T12:47:24.080Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2025-04-28T12:47:24.080Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[info] >  (node:60695) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead. {"user":"(node:60695) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m (node:60695) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead."}}
[info] >  (Use `node --trace-deprecation ...` to show where the warning was created) {"user":"(Use `node --trace-deprecation ...` to show where the warning was created)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m (Use `node --trace-deprecation ...` to show where the warning was created)"}}
[debug] [2025-04-28T12:47:24.578Z] [runtime-status] [60695] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.13.0","resolution":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [60695] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"8.13.0\",\"resolution\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-04-28T12:47:24.578Z] [runtime-status] [60695] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.11.0","resolution":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-functions/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [60695] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.11.0\",\"resolution\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-functions/lib/index.js\"}"}}
[warn] ⚠  The Cloud Functions emulator requires the module "firebase-functions" to be version >3.13.1 so your version is too old. You can probably fix this by running "npm install firebase-functions@latest" in your functions directory. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"The Cloud Functions emulator requires the module \"firebase-functions\" to be version >3.13.1 so your version is too old. You can probably fix this by running \"npm install firebase-functions@latest\" in your functions directory."}}
[info] i  functions: Your functions could not be parsed due to an issue with your node_modules (see above) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Your functions could not be parsed due to an issue with your node_modules (see above)"}}
[debug] [2025-04-28T12:47:24.646Z] [runtime-status] [60695] Functions runtime initialized. {"cwd":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions","node_version":"22.11.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [60695] Functions runtime initialized. {\"cwd\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions\",\"node_version\":\"22.11.0\"}"}}
[debug] [2025-04-28T12:47:24.646Z] [runtime-status] [60695] Listening to port: /var/folders/b8/2ktxw5yj1xz8mylspf3xppwr0000gn/T/fire_emu_8657cc19d3ea00da.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [60695] Listening to port: /var/folders/b8/2ktxw5yj1xz8mylspf3xppwr0000gn/T/fire_emu_8657cc19d3ea00da.sock"}}
[debug] [2025-04-28T12:47:24.693Z] [worker-us-central1-api-9ba65947-c10f-4ac1-a95f-e2158ed9290d]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-9ba65947-c10f-4ac1-a95f-e2158ed9290d]: IDLE"}}
[debug] [2025-04-28T12:47:24.693Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-04-28T12:47:24.693Z] [worker-us-central1-api-9ba65947-c10f-4ac1-a95f-e2158ed9290d]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-9ba65947-c10f-4ac1-a95f-e2158ed9290d]: BUSY"}}
[info] >  Payment Request Recieved BOOM!!! for this amount >>>  0 {"user":"Payment Request Recieved BOOM!!! for this amount >>>  0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment Request Recieved BOOM!!! for this amount >>>  0"}}
[info] >  /Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39 {"user":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m /Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39"}}
[info] >          return new StripeInvalidRequestError(rawStripeError); {"user":"        return new StripeInvalidRequestError(rawStripeError);","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         return new StripeInvalidRequestError(rawStripeError);"}}
[info] >                 ^ {"user":"               ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents {"user":"StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents"}}
[info] >      at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16) {"user":"    at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16)"}}
[info] >      at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33) {"user":"    at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33)"}}
[info] >      at Object.onceWrapper (node:events:632:28) {"user":"    at Object.onceWrapper (node:events:632:28)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Object.onceWrapper (node:events:632:28)"}}
[info] >      at IncomingMessage.emit (node:events:530:35) {"user":"    at IncomingMessage.emit (node:events:530:35)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.emit (node:events:530:35)"}}
[info] >      at endReadableNT (node:internal/streams/readable:1698:12) {"user":"    at endReadableNT (node:internal/streams/readable:1698:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at endReadableNT (node:internal/streams/readable:1698:12)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:90:21) { {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {"}}
[info] >    type: 'StripeInvalidRequestError', {"user":"  type: 'StripeInvalidRequestError',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'StripeInvalidRequestError',"}}
[info] >    raw: { {"user":"  raw: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   raw: {"}}
[info] >      code: 'parameter_invalid_integer', {"user":"    code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 'parameter_invalid_integer',"}}
[info] >      doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >      message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents', {"user":"    message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents',"}}
[info] >      param: 'amount', {"user":"    param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     param: 'amount',"}}
[info] >      request_log_url: 'https://dashboard.stripe.com/test/logs/req_3waSPpg2vgMQnA?t=1745844445', {"user":"    request_log_url: 'https://dashboard.stripe.com/test/logs/req_3waSPpg2vgMQnA?t=1745844445',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     request_log_url: 'https://dashboard.stripe.com/test/logs/req_3waSPpg2vgMQnA?t=1745844445',"}}
[info] >      type: 'invalid_request_error', {"user":"    type: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     type: 'invalid_request_error',"}}
[info] >      headers: { {"user":"    headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     headers: {"}}
[info] >        server: 'nginx', {"user":"      server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       server: 'nginx',"}}
[info] >        date: 'Mon, 28 Apr 2025 12:47:25 GMT', {"user":"      date: 'Mon, 28 Apr 2025 12:47:25 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       date: 'Mon, 28 Apr 2025 12:47:25 GMT',"}}
[info] >        'content-type': 'application/json', {"user":"      'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-type': 'application/json',"}}
[info] >        'content-length': '663', {"user":"      'content-length': '663',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-length': '663',"}}
[info] >        connection: 'keep-alive', {"user":"      connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       connection: 'keep-alive',"}}
[info] >        'access-control-allow-credentials': 'true', {"user":"      'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-credentials': 'true',"}}
[info] >        'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE', {"user":"      'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',"}}
[info] >        'access-control-allow-origin': '*', {"user":"      'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-origin': '*',"}}
[info] >        'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >        'access-control-max-age': '300', {"user":"      'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-max-age': '300',"}}
[info] >        'cache-control': 'no-cache, no-store', {"user":"      'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cache-control': 'no-cache, no-store',"}}
[info] >        'content-security-policy': "base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=n8vvE8gqjKcYIHuTDovkpCSKFm1gCb0j0IIS0NuoCs68DhdGfLqntVBnWaQjRTaMbDV-pprzc1UmA1ws", {"user":"      'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=n8vvE8gqjKcYIHuTDovkpCSKFm1gCb0j0IIS0NuoCs68DhdGfLqntVBnWaQjRTaMbDV-pprzc1UmA1ws\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=n8vvE8gqjKcYIHuTDovkpCSKFm1gCb0j0IIS0NuoCs68DhdGfLqntVBnWaQjRTaMbDV-pprzc1UmA1ws\","}}
[info] >        'idempotency-key': '18dfd5fe-e8a1-43ee-aaf4-96cd5e0e41e4', {"user":"      'idempotency-key': '18dfd5fe-e8a1-43ee-aaf4-96cd5e0e41e4',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'idempotency-key': '18dfd5fe-e8a1-43ee-aaf4-96cd5e0e41e4',"}}
[info] >        'original-request': 'req_3waSPpg2vgMQnA', {"user":"      'original-request': 'req_3waSPpg2vgMQnA',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'original-request': 'req_3waSPpg2vgMQnA',"}}
[info] >        'request-id': 'req_3waSPpg2vgMQnA', {"user":"      'request-id': 'req_3waSPpg2vgMQnA',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'request-id': 'req_3waSPpg2vgMQnA',"}}
[info] >        'stripe-version': '2025-02-24.acacia', {"user":"      'stripe-version': '2025-02-24.acacia',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'stripe-version': '2025-02-24.acacia',"}}
[info] >        vary: 'Origin', {"user":"      vary: 'Origin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       vary: 'Origin',"}}
[info] >        'x-stripe-priority-routing-enabled': 'true', {"user":"      'x-stripe-priority-routing-enabled': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-priority-routing-enabled': 'true',"}}
[info] >        'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"      'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >        'x-wc': 'ABGHI', {"user":"      'x-wc': 'ABGHI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-wc': 'ABGHI',"}}
[info] >        'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      statusCode: 400, {"user":"    statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     statusCode: 400,"}}
[info] >      requestId: 'req_3waSPpg2vgMQnA' {"user":"    requestId: 'req_3waSPpg2vgMQnA'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     requestId: 'req_3waSPpg2vgMQnA'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    rawType: 'invalid_request_error', {"user":"  rawType: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   rawType: 'invalid_request_error',"}}
[info] >    code: 'parameter_invalid_integer', {"user":"  code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'parameter_invalid_integer',"}}
[info] >    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"  doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >    param: 'amount', {"user":"  param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   param: 'amount',"}}
[info] >    detail: undefined, {"user":"  detail: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   detail: undefined,"}}
[info] >    headers: { {"user":"  headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   headers: {"}}
[info] >      server: 'nginx', {"user":"    server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     server: 'nginx',"}}
[info] >      date: 'Mon, 28 Apr 2025 12:47:25 GMT', {"user":"    date: 'Mon, 28 Apr 2025 12:47:25 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     date: 'Mon, 28 Apr 2025 12:47:25 GMT',"}}
[info] >      'content-type': 'application/json', {"user":"    'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-type': 'application/json',"}}
[info] >      'content-length': '663', {"user":"    'content-length': '663',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-length': '663',"}}
[info] >      connection: 'keep-alive', {"user":"    connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     connection: 'keep-alive',"}}
[info] >      'access-control-allow-credentials': 'true', {"user":"    'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-credentials': 'true',"}}
[info] >      'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE', {"user":"    'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',"}}
[info] >      'access-control-allow-origin': '*', {"user":"    'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-origin': '*',"}}
[info] >      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"    'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >      'access-control-max-age': '300', {"user":"    'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-max-age': '300',"}}
[info] >      'cache-control': 'no-cache, no-store', {"user":"    'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'cache-control': 'no-cache, no-store',"}}
[info] >      'content-security-policy': "base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=n8vvE8gqjKcYIHuTDovkpCSKFm1gCb0j0IIS0NuoCs68DhdGfLqntVBnWaQjRTaMbDV-pprzc1UmA1ws", {"user":"    'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=n8vvE8gqjKcYIHuTDovkpCSKFm1gCb0j0IIS0NuoCs68DhdGfLqntVBnWaQjRTaMbDV-pprzc1UmA1ws\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=n8vvE8gqjKcYIHuTDovkpCSKFm1gCb0j0IIS0NuoCs68DhdGfLqntVBnWaQjRTaMbDV-pprzc1UmA1ws\","}}
[info] >      'idempotency-key': '18dfd5fe-e8a1-43ee-aaf4-96cd5e0e41e4', {"user":"    'idempotency-key': '18dfd5fe-e8a1-43ee-aaf4-96cd5e0e41e4',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'idempotency-key': '18dfd5fe-e8a1-43ee-aaf4-96cd5e0e41e4',"}}
[info] >      'original-request': 'req_3waSPpg2vgMQnA', {"user":"    'original-request': 'req_3waSPpg2vgMQnA',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'original-request': 'req_3waSPpg2vgMQnA',"}}
[info] >      'request-id': 'req_3waSPpg2vgMQnA', {"user":"    'request-id': 'req_3waSPpg2vgMQnA',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'request-id': 'req_3waSPpg2vgMQnA',"}}
[info] >      'stripe-version': '2025-02-24.acacia', {"user":"    'stripe-version': '2025-02-24.acacia',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'stripe-version': '2025-02-24.acacia',"}}
[info] >      vary: 'Origin', {"user":"    vary: 'Origin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     vary: 'Origin',"}}
[info] >      'x-stripe-priority-routing-enabled': 'true', {"user":"    'x-stripe-priority-routing-enabled': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-priority-routing-enabled': 'true',"}}
[info] >      'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"    'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >      'x-wc': 'ABGHI', {"user":"    'x-wc': 'ABGHI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-wc': 'ABGHI',"}}
[info] >      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"    'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    requestId: 'req_3waSPpg2vgMQnA', {"user":"  requestId: 'req_3waSPpg2vgMQnA',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   requestId: 'req_3waSPpg2vgMQnA',"}}
[info] >    statusCode: 400, {"user":"  statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statusCode: 400,"}}
[info] >    charge: undefined, {"user":"  charge: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   charge: undefined,"}}
[info] >    decline_code: undefined, {"user":"  decline_code: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   decline_code: undefined,"}}
[info] >    payment_intent: undefined, {"user":"  payment_intent: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_intent: undefined,"}}
[info] >    payment_method: undefined, {"user":"  payment_method: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method: undefined,"}}
[info] >    setup_intent: undefined, {"user":"  setup_intent: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   setup_intent: undefined,"}}
[info] >    source: undefined {"user":"  source: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   source: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v22.11.0 {"user":"Node.js v22.11.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v22.11.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2025-04-28T12:47:25.231Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T12:47:25.231Z] [worker-us-central1-api-9ba65947-c10f-4ac1-a95f-e2158ed9290d]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-9ba65947-c10f-4ac1-a95f-e2158ed9290d]: exited"}}
[debug] [2025-04-28T12:47:25.231Z] [worker-us-central1-api-9ba65947-c10f-4ac1-a95f-e2158ed9290d]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-9ba65947-c10f-4ac1-a95f-e2158ed9290d]: FINISHED"}}
[debug] [2025-04-28T12:47:34.779Z] [work-queue] {"queuedWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T12:47:34.779Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T12:47:34.779Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T12:47:34.779Z"],"workRunningCount":1}
[debug] [2025-04-28T12:47:34.779Z] Accepted request POST /clone-f330b/us-central1/api/payments/create?total=0 --> us-central1-api
[debug] [2025-04-28T12:47:34.782Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-04-28T12:47:34.783Z] [functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0"}}
[debug] [2025-04-28T12:47:34.783Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2025-04-28T12:47:34.786Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2025-04-28T12:47:34.786Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[info] >  (node:60733) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead. {"user":"(node:60733) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m (node:60733) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead."}}
[info] >  (Use `node --trace-deprecation ...` to show where the warning was created) {"user":"(Use `node --trace-deprecation ...` to show where the warning was created)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m (Use `node --trace-deprecation ...` to show where the warning was created)"}}
[debug] [2025-04-28T12:47:35.532Z] [runtime-status] [60733] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.13.0","resolution":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [60733] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"8.13.0\",\"resolution\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-04-28T12:47:35.532Z] [runtime-status] [60733] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.11.0","resolution":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-functions/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [60733] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.11.0\",\"resolution\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-functions/lib/index.js\"}"}}
[warn] ⚠  The Cloud Functions emulator requires the module "firebase-functions" to be version >3.13.1 so your version is too old. You can probably fix this by running "npm install firebase-functions@latest" in your functions directory. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"The Cloud Functions emulator requires the module \"firebase-functions\" to be version >3.13.1 so your version is too old. You can probably fix this by running \"npm install firebase-functions@latest\" in your functions directory."}}
[info] i  functions: Your functions could not be parsed due to an issue with your node_modules (see above) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Your functions could not be parsed due to an issue with your node_modules (see above)"}}
[debug] [2025-04-28T12:47:35.635Z] [runtime-status] [60733] Functions runtime initialized. {"cwd":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions","node_version":"22.11.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [60733] Functions runtime initialized. {\"cwd\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions\",\"node_version\":\"22.11.0\"}"}}
[debug] [2025-04-28T12:47:35.635Z] [runtime-status] [60733] Listening to port: /var/folders/b8/2ktxw5yj1xz8mylspf3xppwr0000gn/T/fire_emu_28d4495fa4360078.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [60733] Listening to port: /var/folders/b8/2ktxw5yj1xz8mylspf3xppwr0000gn/T/fire_emu_28d4495fa4360078.sock"}}
[debug] [2025-04-28T12:47:35.704Z] [worker-us-central1-api-f6c52790-6dd9-4c89-a08f-4038209a1668]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-f6c52790-6dd9-4c89-a08f-4038209a1668]: IDLE"}}
[debug] [2025-04-28T12:47:35.704Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-04-28T12:47:35.704Z] [worker-us-central1-api-f6c52790-6dd9-4c89-a08f-4038209a1668]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-f6c52790-6dd9-4c89-a08f-4038209a1668]: BUSY"}}
[info] >  Payment Request Recieved BOOM!!! for this amount >>>  0 {"user":"Payment Request Recieved BOOM!!! for this amount >>>  0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment Request Recieved BOOM!!! for this amount >>>  0"}}
[info] >  /Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39 {"user":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m /Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39"}}
[info] >          return new StripeInvalidRequestError(rawStripeError); {"user":"        return new StripeInvalidRequestError(rawStripeError);","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         return new StripeInvalidRequestError(rawStripeError);"}}
[info] >                 ^ {"user":"               ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents {"user":"StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents"}}
[info] >      at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16) {"user":"    at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16)"}}
[info] >      at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33) {"user":"    at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33)"}}
[info] >      at Object.onceWrapper (node:events:632:28) {"user":"    at Object.onceWrapper (node:events:632:28)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Object.onceWrapper (node:events:632:28)"}}
[info] >      at IncomingMessage.emit (node:events:530:35) {"user":"    at IncomingMessage.emit (node:events:530:35)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.emit (node:events:530:35)"}}
[info] >      at endReadableNT (node:internal/streams/readable:1698:12) {"user":"    at endReadableNT (node:internal/streams/readable:1698:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at endReadableNT (node:internal/streams/readable:1698:12)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:90:21) { {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {"}}
[info] >    type: 'StripeInvalidRequestError', {"user":"  type: 'StripeInvalidRequestError',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'StripeInvalidRequestError',"}}
[info] >    raw: { {"user":"  raw: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   raw: {"}}
[info] >      code: 'parameter_invalid_integer', {"user":"    code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 'parameter_invalid_integer',"}}
[info] >      doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >      message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents', {"user":"    message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents',"}}
[info] >      param: 'amount', {"user":"    param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     param: 'amount',"}}
[info] >      request_log_url: 'https://dashboard.stripe.com/test/logs/req_4FdnubHYJGBUEC?t=1745844456', {"user":"    request_log_url: 'https://dashboard.stripe.com/test/logs/req_4FdnubHYJGBUEC?t=1745844456',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     request_log_url: 'https://dashboard.stripe.com/test/logs/req_4FdnubHYJGBUEC?t=1745844456',"}}
[info] >      type: 'invalid_request_error', {"user":"    type: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     type: 'invalid_request_error',"}}
[info] >      headers: { {"user":"    headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     headers: {"}}
[info] >        server: 'nginx', {"user":"      server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       server: 'nginx',"}}
[info] >        date: 'Mon, 28 Apr 2025 12:47:36 GMT', {"user":"      date: 'Mon, 28 Apr 2025 12:47:36 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       date: 'Mon, 28 Apr 2025 12:47:36 GMT',"}}
[info] >        'content-type': 'application/json', {"user":"      'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-type': 'application/json',"}}
[info] >        'content-length': '663', {"user":"      'content-length': '663',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-length': '663',"}}
[info] >        connection: 'keep-alive', {"user":"      connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       connection: 'keep-alive',"}}
[info] >        'access-control-allow-credentials': 'true', {"user":"      'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-credentials': 'true',"}}
[info] >        'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE', {"user":"      'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',"}}
[info] >        'access-control-allow-origin': '*', {"user":"      'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-origin': '*',"}}
[info] >        'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >        'access-control-max-age': '300', {"user":"      'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-max-age': '300',"}}
[info] >        'cache-control': 'no-cache, no-store', {"user":"      'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cache-control': 'no-cache, no-store',"}}
[info] >        'content-security-policy': "base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=jxpKGhu1VSfppjs42NZ6XHzXPEJJP5h-MnbS8rbnty5Xj5qPpRdClIJT3hm4ou4W3-cUrRZjCZ3yFklu", {"user":"      'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=jxpKGhu1VSfppjs42NZ6XHzXPEJJP5h-MnbS8rbnty5Xj5qPpRdClIJT3hm4ou4W3-cUrRZjCZ3yFklu\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=jxpKGhu1VSfppjs42NZ6XHzXPEJJP5h-MnbS8rbnty5Xj5qPpRdClIJT3hm4ou4W3-cUrRZjCZ3yFklu\","}}
[info] >        'idempotency-key': '194f8bea-ec17-4105-af4c-08c9849371c5', {"user":"      'idempotency-key': '194f8bea-ec17-4105-af4c-08c9849371c5',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'idempotency-key': '194f8bea-ec17-4105-af4c-08c9849371c5',"}}
[info] >        'original-request': 'req_4FdnubHYJGBUEC', {"user":"      'original-request': 'req_4FdnubHYJGBUEC',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'original-request': 'req_4FdnubHYJGBUEC',"}}
[info] >        'request-id': 'req_4FdnubHYJGBUEC', {"user":"      'request-id': 'req_4FdnubHYJGBUEC',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'request-id': 'req_4FdnubHYJGBUEC',"}}
[info] >        'stripe-version': '2025-02-24.acacia', {"user":"      'stripe-version': '2025-02-24.acacia',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'stripe-version': '2025-02-24.acacia',"}}
[info] >        vary: 'Origin', {"user":"      vary: 'Origin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       vary: 'Origin',"}}
[info] >        'x-stripe-priority-routing-enabled': 'true', {"user":"      'x-stripe-priority-routing-enabled': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-priority-routing-enabled': 'true',"}}
[info] >        'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"      'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >        'x-wc': 'ABGHI', {"user":"      'x-wc': 'ABGHI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-wc': 'ABGHI',"}}
[info] >        'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      statusCode: 400, {"user":"    statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     statusCode: 400,"}}
[info] >      requestId: 'req_4FdnubHYJGBUEC' {"user":"    requestId: 'req_4FdnubHYJGBUEC'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     requestId: 'req_4FdnubHYJGBUEC'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    rawType: 'invalid_request_error', {"user":"  rawType: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   rawType: 'invalid_request_error',"}}
[info] >    code: 'parameter_invalid_integer', {"user":"  code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'parameter_invalid_integer',"}}
[info] >    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"  doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >    param: 'amount', {"user":"  param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   param: 'amount',"}}
[info] >    detail: undefined, {"user":"  detail: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   detail: undefined,"}}
[info] >    headers: { {"user":"  headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   headers: {"}}
[info] >      server: 'nginx', {"user":"    server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     server: 'nginx',"}}
[info] >      date: 'Mon, 28 Apr 2025 12:47:36 GMT', {"user":"    date: 'Mon, 28 Apr 2025 12:47:36 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     date: 'Mon, 28 Apr 2025 12:47:36 GMT',"}}
[info] >      'content-type': 'application/json', {"user":"    'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-type': 'application/json',"}}
[info] >      'content-length': '663', {"user":"    'content-length': '663',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-length': '663',"}}
[info] >      connection: 'keep-alive', {"user":"    connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     connection: 'keep-alive',"}}
[info] >      'access-control-allow-credentials': 'true', {"user":"    'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-credentials': 'true',"}}
[info] >      'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE', {"user":"    'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',"}}
[info] >      'access-control-allow-origin': '*', {"user":"    'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-origin': '*',"}}
[info] >      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"    'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >      'access-control-max-age': '300', {"user":"    'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-max-age': '300',"}}
[info] >      'cache-control': 'no-cache, no-store', {"user":"    'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'cache-control': 'no-cache, no-store',"}}
[info] >      'content-security-policy': "base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=jxpKGhu1VSfppjs42NZ6XHzXPEJJP5h-MnbS8rbnty5Xj5qPpRdClIJT3hm4ou4W3-cUrRZjCZ3yFklu", {"user":"    'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=jxpKGhu1VSfppjs42NZ6XHzXPEJJP5h-MnbS8rbnty5Xj5qPpRdClIJT3hm4ou4W3-cUrRZjCZ3yFklu\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=jxpKGhu1VSfppjs42NZ6XHzXPEJJP5h-MnbS8rbnty5Xj5qPpRdClIJT3hm4ou4W3-cUrRZjCZ3yFklu\","}}
[info] >      'idempotency-key': '194f8bea-ec17-4105-af4c-08c9849371c5', {"user":"    'idempotency-key': '194f8bea-ec17-4105-af4c-08c9849371c5',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'idempotency-key': '194f8bea-ec17-4105-af4c-08c9849371c5',"}}
[info] >      'original-request': 'req_4FdnubHYJGBUEC', {"user":"    'original-request': 'req_4FdnubHYJGBUEC',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'original-request': 'req_4FdnubHYJGBUEC',"}}
[info] >      'request-id': 'req_4FdnubHYJGBUEC', {"user":"    'request-id': 'req_4FdnubHYJGBUEC',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'request-id': 'req_4FdnubHYJGBUEC',"}}
[info] >      'stripe-version': '2025-02-24.acacia', {"user":"    'stripe-version': '2025-02-24.acacia',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'stripe-version': '2025-02-24.acacia',"}}
[info] >      vary: 'Origin', {"user":"    vary: 'Origin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     vary: 'Origin',"}}
[info] >      'x-stripe-priority-routing-enabled': 'true', {"user":"    'x-stripe-priority-routing-enabled': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-priority-routing-enabled': 'true',"}}
[info] >      'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"    'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >      'x-wc': 'ABGHI', {"user":"    'x-wc': 'ABGHI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-wc': 'ABGHI',"}}
[info] >      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"    'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    requestId: 'req_4FdnubHYJGBUEC', {"user":"  requestId: 'req_4FdnubHYJGBUEC',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   requestId: 'req_4FdnubHYJGBUEC',"}}
[info] >    statusCode: 400, {"user":"  statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statusCode: 400,"}}
[info] >    charge: undefined, {"user":"  charge: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   charge: undefined,"}}
[info] >    decline_code: undefined, {"user":"  decline_code: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   decline_code: undefined,"}}
[info] >    payment_intent: undefined, {"user":"  payment_intent: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_intent: undefined,"}}
[info] >    payment_method: undefined, {"user":"  payment_method: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method: undefined,"}}
[info] >    setup_intent: undefined, {"user":"  setup_intent: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   setup_intent: undefined,"}}
[info] >    source: undefined {"user":"  source: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   source: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v22.11.0 {"user":"Node.js v22.11.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v22.11.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2025-04-28T12:47:36.311Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T12:47:36.311Z] [worker-us-central1-api-f6c52790-6dd9-4c89-a08f-4038209a1668]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-f6c52790-6dd9-4c89-a08f-4038209a1668]: exited"}}
[debug] [2025-04-28T12:47:36.311Z] [worker-us-central1-api-f6c52790-6dd9-4c89-a08f-4038209a1668]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-f6c52790-6dd9-4c89-a08f-4038209a1668]: FINISHED"}}
[debug] [2025-04-28T12:47:43.208Z] [work-queue] {"queuedWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T12:47:43.208Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T12:47:43.209Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T12:47:43.208Z"],"workRunningCount":1}
[debug] [2025-04-28T12:47:43.209Z] Accepted request POST /clone-f330b/us-central1/api/payments/create?total=0 --> us-central1-api
[debug] [2025-04-28T12:47:43.210Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-04-28T12:47:43.211Z] [functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0"}}
[debug] [2025-04-28T12:47:43.211Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2025-04-28T12:47:43.214Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2025-04-28T12:47:43.214Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[info] >  (node:60760) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead. {"user":"(node:60760) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m (node:60760) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead."}}
[info] >  (Use `node --trace-deprecation ...` to show where the warning was created) {"user":"(Use `node --trace-deprecation ...` to show where the warning was created)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m (Use `node --trace-deprecation ...` to show where the warning was created)"}}
[debug] [2025-04-28T12:47:43.689Z] [runtime-status] [60760] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.13.0","resolution":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [60760] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"8.13.0\",\"resolution\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-04-28T12:47:43.689Z] [runtime-status] [60760] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.11.0","resolution":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-functions/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [60760] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.11.0\",\"resolution\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-functions/lib/index.js\"}"}}
[warn] ⚠  The Cloud Functions emulator requires the module "firebase-functions" to be version >3.13.1 so your version is too old. You can probably fix this by running "npm install firebase-functions@latest" in your functions directory. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"The Cloud Functions emulator requires the module \"firebase-functions\" to be version >3.13.1 so your version is too old. You can probably fix this by running \"npm install firebase-functions@latest\" in your functions directory."}}
[info] i  functions: Your functions could not be parsed due to an issue with your node_modules (see above) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Your functions could not be parsed due to an issue with your node_modules (see above)"}}
[debug] [2025-04-28T12:47:43.731Z] [runtime-status] [60760] Functions runtime initialized. {"cwd":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions","node_version":"22.11.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [60760] Functions runtime initialized. {\"cwd\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions\",\"node_version\":\"22.11.0\"}"}}
[debug] [2025-04-28T12:47:43.731Z] [runtime-status] [60760] Listening to port: /var/folders/b8/2ktxw5yj1xz8mylspf3xppwr0000gn/T/fire_emu_a39992537881c147.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [60760] Listening to port: /var/folders/b8/2ktxw5yj1xz8mylspf3xppwr0000gn/T/fire_emu_a39992537881c147.sock"}}
[debug] [2025-04-28T12:47:43.824Z] [worker-us-central1-api-6f37694e-c6af-4d76-b7de-32a681bba779]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-6f37694e-c6af-4d76-b7de-32a681bba779]: IDLE"}}
[debug] [2025-04-28T12:47:43.824Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-04-28T12:47:43.824Z] [worker-us-central1-api-6f37694e-c6af-4d76-b7de-32a681bba779]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-6f37694e-c6af-4d76-b7de-32a681bba779]: BUSY"}}
[info] >  Payment Request Recieved BOOM!!! for this amount >>>  0 {"user":"Payment Request Recieved BOOM!!! for this amount >>>  0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment Request Recieved BOOM!!! for this amount >>>  0"}}
[info] >  /Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39 {"user":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m /Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39"}}
[info] >          return new StripeInvalidRequestError(rawStripeError); {"user":"        return new StripeInvalidRequestError(rawStripeError);","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         return new StripeInvalidRequestError(rawStripeError);"}}
[info] >                 ^ {"user":"               ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents {"user":"StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents"}}
[info] >      at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16) {"user":"    at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16)"}}
[info] >      at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33) {"user":"    at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33)"}}
[info] >      at Object.onceWrapper (node:events:632:28) {"user":"    at Object.onceWrapper (node:events:632:28)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Object.onceWrapper (node:events:632:28)"}}
[info] >      at IncomingMessage.emit (node:events:530:35) {"user":"    at IncomingMessage.emit (node:events:530:35)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.emit (node:events:530:35)"}}
[info] >      at endReadableNT (node:internal/streams/readable:1698:12) {"user":"    at endReadableNT (node:internal/streams/readable:1698:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at endReadableNT (node:internal/streams/readable:1698:12)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:90:21) { {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {"}}
[info] >    type: 'StripeInvalidRequestError', {"user":"  type: 'StripeInvalidRequestError',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'StripeInvalidRequestError',"}}
[info] >    raw: { {"user":"  raw: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   raw: {"}}
[info] >      code: 'parameter_invalid_integer', {"user":"    code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 'parameter_invalid_integer',"}}
[info] >      doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >      message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents', {"user":"    message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents',"}}
[info] >      param: 'amount', {"user":"    param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     param: 'amount',"}}
[info] >      request_log_url: 'https://dashboard.stripe.com/test/logs/req_NPIZswiIX8ycfp?t=1745844464', {"user":"    request_log_url: 'https://dashboard.stripe.com/test/logs/req_NPIZswiIX8ycfp?t=1745844464',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     request_log_url: 'https://dashboard.stripe.com/test/logs/req_NPIZswiIX8ycfp?t=1745844464',"}}
[info] >      type: 'invalid_request_error', {"user":"    type: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     type: 'invalid_request_error',"}}
[info] >      headers: { {"user":"    headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     headers: {"}}
[info] >        server: 'nginx', {"user":"      server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       server: 'nginx',"}}
[info] >        date: 'Mon, 28 Apr 2025 12:47:44 GMT', {"user":"      date: 'Mon, 28 Apr 2025 12:47:44 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       date: 'Mon, 28 Apr 2025 12:47:44 GMT',"}}
[info] >        'content-type': 'application/json', {"user":"      'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-type': 'application/json',"}}
[info] >        'content-length': '663', {"user":"      'content-length': '663',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-length': '663',"}}
[info] >        connection: 'keep-alive', {"user":"      connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       connection: 'keep-alive',"}}
[info] >        'access-control-allow-credentials': 'true', {"user":"      'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-credentials': 'true',"}}
[info] >        'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE', {"user":"      'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',"}}
[info] >        'access-control-allow-origin': '*', {"user":"      'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-origin': '*',"}}
[info] >        'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >        'access-control-max-age': '300', {"user":"      'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-max-age': '300',"}}
[info] >        'cache-control': 'no-cache, no-store', {"user":"      'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cache-control': 'no-cache, no-store',"}}
[info] >        'content-security-policy': "base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=PE3s1xjtjdj5-AYvM-CywdF73J0TenGXM3ZVtoqTsa6XMBjsgSFqrwkHskIzresKUOwm9vB5UmXrJLLV", {"user":"      'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=PE3s1xjtjdj5-AYvM-CywdF73J0TenGXM3ZVtoqTsa6XMBjsgSFqrwkHskIzresKUOwm9vB5UmXrJLLV\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=PE3s1xjtjdj5-AYvM-CywdF73J0TenGXM3ZVtoqTsa6XMBjsgSFqrwkHskIzresKUOwm9vB5UmXrJLLV\","}}
[info] >        'idempotency-key': '043f2eed-1a04-4af1-b2ca-0e50fc6a87ea', {"user":"      'idempotency-key': '043f2eed-1a04-4af1-b2ca-0e50fc6a87ea',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'idempotency-key': '043f2eed-1a04-4af1-b2ca-0e50fc6a87ea',"}}
[info] >        'original-request': 'req_NPIZswiIX8ycfp', {"user":"      'original-request': 'req_NPIZswiIX8ycfp',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'original-request': 'req_NPIZswiIX8ycfp',"}}
[info] >        'request-id': 'req_NPIZswiIX8ycfp', {"user":"      'request-id': 'req_NPIZswiIX8ycfp',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'request-id': 'req_NPIZswiIX8ycfp',"}}
[info] >        'stripe-version': '2025-02-24.acacia', {"user":"      'stripe-version': '2025-02-24.acacia',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'stripe-version': '2025-02-24.acacia',"}}
[info] >        vary: 'Origin', {"user":"      vary: 'Origin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       vary: 'Origin',"}}
[info] >        'x-stripe-priority-routing-enabled': 'true', {"user":"      'x-stripe-priority-routing-enabled': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-priority-routing-enabled': 'true',"}}
[info] >        'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"      'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >        'x-wc': 'ABGHI', {"user":"      'x-wc': 'ABGHI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-wc': 'ABGHI',"}}
[info] >        'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      statusCode: 400, {"user":"    statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     statusCode: 400,"}}
[info] >      requestId: 'req_NPIZswiIX8ycfp' {"user":"    requestId: 'req_NPIZswiIX8ycfp'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     requestId: 'req_NPIZswiIX8ycfp'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    rawType: 'invalid_request_error', {"user":"  rawType: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   rawType: 'invalid_request_error',"}}
[info] >    code: 'parameter_invalid_integer', {"user":"  code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'parameter_invalid_integer',"}}
[info] >    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"  doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >    param: 'amount', {"user":"  param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   param: 'amount',"}}
[info] >    detail: undefined, {"user":"  detail: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   detail: undefined,"}}
[info] >    headers: { {"user":"  headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   headers: {"}}
[info] >      server: 'nginx', {"user":"    server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     server: 'nginx',"}}
[info] >      date: 'Mon, 28 Apr 2025 12:47:44 GMT', {"user":"    date: 'Mon, 28 Apr 2025 12:47:44 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     date: 'Mon, 28 Apr 2025 12:47:44 GMT',"}}
[info] >      'content-type': 'application/json', {"user":"    'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-type': 'application/json',"}}
[info] >      'content-length': '663', {"user":"    'content-length': '663',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-length': '663',"}}
[info] >      connection: 'keep-alive', {"user":"    connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     connection: 'keep-alive',"}}
[info] >      'access-control-allow-credentials': 'true', {"user":"    'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-credentials': 'true',"}}
[info] >      'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE', {"user":"    'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',"}}
[info] >      'access-control-allow-origin': '*', {"user":"    'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-origin': '*',"}}
[info] >      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"    'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >      'access-control-max-age': '300', {"user":"    'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-max-age': '300',"}}
[info] >      'cache-control': 'no-cache, no-store', {"user":"    'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'cache-control': 'no-cache, no-store',"}}
[info] >      'content-security-policy': "base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=PE3s1xjtjdj5-AYvM-CywdF73J0TenGXM3ZVtoqTsa6XMBjsgSFqrwkHskIzresKUOwm9vB5UmXrJLLV", {"user":"    'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=PE3s1xjtjdj5-AYvM-CywdF73J0TenGXM3ZVtoqTsa6XMBjsgSFqrwkHskIzresKUOwm9vB5UmXrJLLV\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=PE3s1xjtjdj5-AYvM-CywdF73J0TenGXM3ZVtoqTsa6XMBjsgSFqrwkHskIzresKUOwm9vB5UmXrJLLV\","}}
[info] >      'idempotency-key': '043f2eed-1a04-4af1-b2ca-0e50fc6a87ea', {"user":"    'idempotency-key': '043f2eed-1a04-4af1-b2ca-0e50fc6a87ea',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'idempotency-key': '043f2eed-1a04-4af1-b2ca-0e50fc6a87ea',"}}
[info] >      'original-request': 'req_NPIZswiIX8ycfp', {"user":"    'original-request': 'req_NPIZswiIX8ycfp',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'original-request': 'req_NPIZswiIX8ycfp',"}}
[info] >      'request-id': 'req_NPIZswiIX8ycfp', {"user":"    'request-id': 'req_NPIZswiIX8ycfp',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'request-id': 'req_NPIZswiIX8ycfp',"}}
[info] >      'stripe-version': '2025-02-24.acacia', {"user":"    'stripe-version': '2025-02-24.acacia',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'stripe-version': '2025-02-24.acacia',"}}
[info] >      vary: 'Origin', {"user":"    vary: 'Origin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     vary: 'Origin',"}}
[info] >      'x-stripe-priority-routing-enabled': 'true', {"user":"    'x-stripe-priority-routing-enabled': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-priority-routing-enabled': 'true',"}}
[info] >      'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"    'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >      'x-wc': 'ABGHI', {"user":"    'x-wc': 'ABGHI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-wc': 'ABGHI',"}}
[info] >      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"    'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    requestId: 'req_NPIZswiIX8ycfp', {"user":"  requestId: 'req_NPIZswiIX8ycfp',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   requestId: 'req_NPIZswiIX8ycfp',"}}
[info] >    statusCode: 400, {"user":"  statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statusCode: 400,"}}
[info] >    charge: undefined, {"user":"  charge: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   charge: undefined,"}}
[info] >    decline_code: undefined, {"user":"  decline_code: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   decline_code: undefined,"}}
[info] >    payment_intent: undefined, {"user":"  payment_intent: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_intent: undefined,"}}
[info] >    payment_method: undefined, {"user":"  payment_method: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method: undefined,"}}
[info] >    setup_intent: undefined, {"user":"  setup_intent: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   setup_intent: undefined,"}}
[info] >    source: undefined {"user":"  source: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   source: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v22.11.0 {"user":"Node.js v22.11.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v22.11.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2025-04-28T12:47:44.358Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T12:47:44.358Z] [worker-us-central1-api-6f37694e-c6af-4d76-b7de-32a681bba779]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-6f37694e-c6af-4d76-b7de-32a681bba779]: exited"}}
[debug] [2025-04-28T12:47:44.358Z] [worker-us-central1-api-6f37694e-c6af-4d76-b7de-32a681bba779]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-6f37694e-c6af-4d76-b7de-32a681bba779]: FINISHED"}}
[debug] [2025-04-28T12:47:55.772Z] [work-queue] {"queuedWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T12:47:55.771Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T12:47:55.772Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T12:47:55.771Z"],"workRunningCount":1}
[debug] [2025-04-28T12:47:55.772Z] Accepted request POST /clone-f330b/us-central1/api/payments/create?total=3588.0000000000005 --> us-central1-api
[debug] [2025-04-28T12:47:55.775Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-04-28T12:47:55.776Z] [functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=3588.0000000000005, mapping to path=/payments/create?total=3588.0000000000005 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=3588.0000000000005, mapping to path=/payments/create?total=3588.0000000000005"}}
[debug] [2025-04-28T12:47:55.777Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2025-04-28T12:47:55.780Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2025-04-28T12:47:55.780Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[info] >  (node:60805) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead. {"user":"(node:60805) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m (node:60805) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead."}}
[info] >  (Use `node --trace-deprecation ...` to show where the warning was created) {"user":"(Use `node --trace-deprecation ...` to show where the warning was created)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m (Use `node --trace-deprecation ...` to show where the warning was created)"}}
[debug] [2025-04-28T12:47:56.384Z] [runtime-status] [60805] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.13.0","resolution":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [60805] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"8.13.0\",\"resolution\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-04-28T12:47:56.385Z] [runtime-status] [60805] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.11.0","resolution":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-functions/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [60805] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.11.0\",\"resolution\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-functions/lib/index.js\"}"}}
[warn] ⚠  The Cloud Functions emulator requires the module "firebase-functions" to be version >3.13.1 so your version is too old. You can probably fix this by running "npm install firebase-functions@latest" in your functions directory. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"The Cloud Functions emulator requires the module \"firebase-functions\" to be version >3.13.1 so your version is too old. You can probably fix this by running \"npm install firebase-functions@latest\" in your functions directory."}}
[info] i  functions: Your functions could not be parsed due to an issue with your node_modules (see above) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Your functions could not be parsed due to an issue with your node_modules (see above)"}}
[debug] [2025-04-28T12:47:56.452Z] [runtime-status] [60805] Functions runtime initialized. {"cwd":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions","node_version":"22.11.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [60805] Functions runtime initialized. {\"cwd\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions\",\"node_version\":\"22.11.0\"}"}}
[debug] [2025-04-28T12:47:56.452Z] [runtime-status] [60805] Listening to port: /var/folders/b8/2ktxw5yj1xz8mylspf3xppwr0000gn/T/fire_emu_0ca2aa5cb31da9a1.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [60805] Listening to port: /var/folders/b8/2ktxw5yj1xz8mylspf3xppwr0000gn/T/fire_emu_0ca2aa5cb31da9a1.sock"}}
[debug] [2025-04-28T12:47:56.493Z] [worker-us-central1-api-925097e7-d2a5-48f3-9164-b4e1ec235439]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-925097e7-d2a5-48f3-9164-b4e1ec235439]: IDLE"}}
[debug] [2025-04-28T12:47:56.493Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-04-28T12:47:56.494Z] [worker-us-central1-api-925097e7-d2a5-48f3-9164-b4e1ec235439]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-925097e7-d2a5-48f3-9164-b4e1ec235439]: BUSY"}}
[info] >  Payment Request Recieved BOOM!!! for this amount >>>  3588.0000000000005 {"user":"Payment Request Recieved BOOM!!! for this amount >>>  3588.0000000000005","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment Request Recieved BOOM!!! for this amount >>>  3588.0000000000005"}}
[info] >  /Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39 {"user":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m /Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39"}}
[info] >          return new StripeInvalidRequestError(rawStripeError); {"user":"        return new StripeInvalidRequestError(rawStripeError);","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         return new StripeInvalidRequestError(rawStripeError);"}}
[info] >                 ^ {"user":"               ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  StripeInvalidRequestError: Invalid integer: 3588.0000000000005 {"user":"StripeInvalidRequestError: Invalid integer: 3588.0000000000005","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m StripeInvalidRequestError: Invalid integer: 3588.0000000000005"}}
[info] >      at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16) {"user":"    at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16)"}}
[info] >      at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33) {"user":"    at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33)"}}
[info] >      at Object.onceWrapper (node:events:632:28) {"user":"    at Object.onceWrapper (node:events:632:28)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Object.onceWrapper (node:events:632:28)"}}
[info] >      at IncomingMessage.emit (node:events:530:35) {"user":"    at IncomingMessage.emit (node:events:530:35)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.emit (node:events:530:35)"}}
[info] >      at endReadableNT (node:internal/streams/readable:1698:12) {"user":"    at endReadableNT (node:internal/streams/readable:1698:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at endReadableNT (node:internal/streams/readable:1698:12)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:90:21) { {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {"}}
[info] >    type: 'StripeInvalidRequestError', {"user":"  type: 'StripeInvalidRequestError',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'StripeInvalidRequestError',"}}
[info] >    raw: { {"user":"  raw: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   raw: {"}}
[info] >      code: 'parameter_invalid_integer', {"user":"    code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 'parameter_invalid_integer',"}}
[info] >      doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >      message: 'Invalid integer: 3588.0000000000005', {"user":"    message: 'Invalid integer: 3588.0000000000005',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'Invalid integer: 3588.0000000000005',"}}
[info] >      param: 'amount', {"user":"    param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     param: 'amount',"}}
[info] >      request_log_url: 'https://dashboard.stripe.com/test/logs/req_f5V1ZkdIjNevOL?t=1745844476', {"user":"    request_log_url: 'https://dashboard.stripe.com/test/logs/req_f5V1ZkdIjNevOL?t=1745844476',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     request_log_url: 'https://dashboard.stripe.com/test/logs/req_f5V1ZkdIjNevOL?t=1745844476',"}}
[info] >      type: 'invalid_request_error', {"user":"    type: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     type: 'invalid_request_error',"}}
[info] >      headers: { {"user":"    headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     headers: {"}}
[info] >        server: 'nginx', {"user":"      server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       server: 'nginx',"}}
[info] >        date: 'Mon, 28 Apr 2025 12:47:57 GMT', {"user":"      date: 'Mon, 28 Apr 2025 12:47:57 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       date: 'Mon, 28 Apr 2025 12:47:57 GMT',"}}
[info] >        'content-type': 'application/json', {"user":"      'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-type': 'application/json',"}}
[info] >        'content-length': '352', {"user":"      'content-length': '352',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-length': '352',"}}
[info] >        connection: 'keep-alive', {"user":"      connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       connection: 'keep-alive',"}}
[info] >        'access-control-allow-credentials': 'true', {"user":"      'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-credentials': 'true',"}}
[info] >        'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE', {"user":"      'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',"}}
[info] >        'access-control-allow-origin': '*', {"user":"      'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-origin': '*',"}}
[info] >        'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >        'access-control-max-age': '300', {"user":"      'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-max-age': '300',"}}
[info] >        'cache-control': 'no-cache, no-store', {"user":"      'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cache-control': 'no-cache, no-store',"}}
[info] >        'content-security-policy': "base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=NWuD0q6lVLZgVGSowOr4Jk2BBrJaGWtXwtp_h3i8WQT1AJg8h2ShYPkLqF9NXdOqhQ3R1XHXNz48gVi-", {"user":"      'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=NWuD0q6lVLZgVGSowOr4Jk2BBrJaGWtXwtp_h3i8WQT1AJg8h2ShYPkLqF9NXdOqhQ3R1XHXNz48gVi-\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=NWuD0q6lVLZgVGSowOr4Jk2BBrJaGWtXwtp_h3i8WQT1AJg8h2ShYPkLqF9NXdOqhQ3R1XHXNz48gVi-\","}}
[info] >        'idempotency-key': '66d0a7a0-74c6-4243-bfd0-3068d30fb1cb', {"user":"      'idempotency-key': '66d0a7a0-74c6-4243-bfd0-3068d30fb1cb',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'idempotency-key': '66d0a7a0-74c6-4243-bfd0-3068d30fb1cb',"}}
[info] >        'original-request': 'req_f5V1ZkdIjNevOL', {"user":"      'original-request': 'req_f5V1ZkdIjNevOL',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'original-request': 'req_f5V1ZkdIjNevOL',"}}
[info] >        'request-id': 'req_f5V1ZkdIjNevOL', {"user":"      'request-id': 'req_f5V1ZkdIjNevOL',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'request-id': 'req_f5V1ZkdIjNevOL',"}}
[info] >        'stripe-version': '2025-02-24.acacia', {"user":"      'stripe-version': '2025-02-24.acacia',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'stripe-version': '2025-02-24.acacia',"}}
[info] >        vary: 'Origin', {"user":"      vary: 'Origin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       vary: 'Origin',"}}
[info] >        'x-stripe-priority-routing-enabled': 'true', {"user":"      'x-stripe-priority-routing-enabled': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-priority-routing-enabled': 'true',"}}
[info] >        'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"      'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >        'x-wc': 'ABGHI', {"user":"      'x-wc': 'ABGHI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-wc': 'ABGHI',"}}
[info] >        'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      statusCode: 400, {"user":"    statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     statusCode: 400,"}}
[info] >      requestId: 'req_f5V1ZkdIjNevOL' {"user":"    requestId: 'req_f5V1ZkdIjNevOL'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     requestId: 'req_f5V1ZkdIjNevOL'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    rawType: 'invalid_request_error', {"user":"  rawType: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   rawType: 'invalid_request_error',"}}
[info] >    code: 'parameter_invalid_integer', {"user":"  code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'parameter_invalid_integer',"}}
[info] >    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"  doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >    param: 'amount', {"user":"  param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   param: 'amount',"}}
[info] >    detail: undefined, {"user":"  detail: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   detail: undefined,"}}
[info] >    headers: { {"user":"  headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   headers: {"}}
[info] >      server: 'nginx', {"user":"    server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     server: 'nginx',"}}
[info] >      date: 'Mon, 28 Apr 2025 12:47:57 GMT', {"user":"    date: 'Mon, 28 Apr 2025 12:47:57 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     date: 'Mon, 28 Apr 2025 12:47:57 GMT',"}}
[info] >      'content-type': 'application/json', {"user":"    'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-type': 'application/json',"}}
[info] >      'content-length': '352', {"user":"    'content-length': '352',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-length': '352',"}}
[info] >      connection: 'keep-alive', {"user":"    connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     connection: 'keep-alive',"}}
[info] >      'access-control-allow-credentials': 'true', {"user":"    'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-credentials': 'true',"}}
[info] >      'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE', {"user":"    'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',"}}
[info] >      'access-control-allow-origin': '*', {"user":"    'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-origin': '*',"}}
[info] >      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"    'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >      'access-control-max-age': '300', {"user":"    'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-max-age': '300',"}}
[info] >      'cache-control': 'no-cache, no-store', {"user":"    'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'cache-control': 'no-cache, no-store',"}}
[info] >      'content-security-policy': "base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=NWuD0q6lVLZgVGSowOr4Jk2BBrJaGWtXwtp_h3i8WQT1AJg8h2ShYPkLqF9NXdOqhQ3R1XHXNz48gVi-", {"user":"    'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=NWuD0q6lVLZgVGSowOr4Jk2BBrJaGWtXwtp_h3i8WQT1AJg8h2ShYPkLqF9NXdOqhQ3R1XHXNz48gVi-\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=NWuD0q6lVLZgVGSowOr4Jk2BBrJaGWtXwtp_h3i8WQT1AJg8h2ShYPkLqF9NXdOqhQ3R1XHXNz48gVi-\","}}
[info] >      'idempotency-key': '66d0a7a0-74c6-4243-bfd0-3068d30fb1cb', {"user":"    'idempotency-key': '66d0a7a0-74c6-4243-bfd0-3068d30fb1cb',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'idempotency-key': '66d0a7a0-74c6-4243-bfd0-3068d30fb1cb',"}}
[info] >      'original-request': 'req_f5V1ZkdIjNevOL', {"user":"    'original-request': 'req_f5V1ZkdIjNevOL',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'original-request': 'req_f5V1ZkdIjNevOL',"}}
[info] >      'request-id': 'req_f5V1ZkdIjNevOL', {"user":"    'request-id': 'req_f5V1ZkdIjNevOL',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'request-id': 'req_f5V1ZkdIjNevOL',"}}
[info] >      'stripe-version': '2025-02-24.acacia', {"user":"    'stripe-version': '2025-02-24.acacia',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'stripe-version': '2025-02-24.acacia',"}}
[info] >      vary: 'Origin', {"user":"    vary: 'Origin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     vary: 'Origin',"}}
[info] >      'x-stripe-priority-routing-enabled': 'true', {"user":"    'x-stripe-priority-routing-enabled': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-priority-routing-enabled': 'true',"}}
[info] >      'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"    'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >      'x-wc': 'ABGHI', {"user":"    'x-wc': 'ABGHI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-wc': 'ABGHI',"}}
[info] >      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"    'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    requestId: 'req_f5V1ZkdIjNevOL', {"user":"  requestId: 'req_f5V1ZkdIjNevOL',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   requestId: 'req_f5V1ZkdIjNevOL',"}}
[info] >    statusCode: 400, {"user":"  statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statusCode: 400,"}}
[info] >    charge: undefined, {"user":"  charge: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   charge: undefined,"}}
[info] >    decline_code: undefined, {"user":"  decline_code: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   decline_code: undefined,"}}
[info] >    payment_intent: undefined, {"user":"  payment_intent: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_intent: undefined,"}}
[info] >    payment_method: undefined, {"user":"  payment_method: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method: undefined,"}}
[info] >    setup_intent: undefined, {"user":"  setup_intent: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   setup_intent: undefined,"}}
[info] >    source: undefined {"user":"  source: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   source: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v22.11.0 {"user":"Node.js v22.11.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v22.11.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2025-04-28T12:47:57.068Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T12:47:57.068Z] [worker-us-central1-api-925097e7-d2a5-48f3-9164-b4e1ec235439]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-925097e7-d2a5-48f3-9164-b4e1ec235439]: exited"}}
[debug] [2025-04-28T12:47:57.068Z] [worker-us-central1-api-925097e7-d2a5-48f3-9164-b4e1ec235439]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-925097e7-d2a5-48f3-9164-b4e1ec235439]: FINISHED"}}
[debug] [2025-04-28T12:48:09.480Z] [work-queue] {"queuedWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T12:48:09.480Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T12:48:09.480Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T12:48:09.480Z"],"workRunningCount":1}
[debug] [2025-04-28T12:48:09.480Z] Accepted request POST /clone-f330b/us-central1/api/payments/create?total=0 --> us-central1-api
[debug] [2025-04-28T12:48:09.483Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-04-28T12:48:09.483Z] [functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0"}}
[debug] [2025-04-28T12:48:09.483Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2025-04-28T12:48:09.488Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2025-04-28T12:48:09.489Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[info] >  (node:60837) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead. {"user":"(node:60837) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m (node:60837) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead."}}
[info] >  (Use `node --trace-deprecation ...` to show where the warning was created) {"user":"(Use `node --trace-deprecation ...` to show where the warning was created)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m (Use `node --trace-deprecation ...` to show where the warning was created)"}}
[debug] [2025-04-28T12:48:10.196Z] [runtime-status] [60837] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.13.0","resolution":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [60837] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"8.13.0\",\"resolution\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-04-28T12:48:10.197Z] [runtime-status] [60837] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.11.0","resolution":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-functions/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [60837] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.11.0\",\"resolution\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-functions/lib/index.js\"}"}}
[warn] ⚠  The Cloud Functions emulator requires the module "firebase-functions" to be version >3.13.1 so your version is too old. You can probably fix this by running "npm install firebase-functions@latest" in your functions directory. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"The Cloud Functions emulator requires the module \"firebase-functions\" to be version >3.13.1 so your version is too old. You can probably fix this by running \"npm install firebase-functions@latest\" in your functions directory."}}
[info] i  functions: Your functions could not be parsed due to an issue with your node_modules (see above) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Your functions could not be parsed due to an issue with your node_modules (see above)"}}
[debug] [2025-04-28T12:48:10.294Z] [runtime-status] [60837] Functions runtime initialized. {"cwd":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions","node_version":"22.11.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [60837] Functions runtime initialized. {\"cwd\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions\",\"node_version\":\"22.11.0\"}"}}
[debug] [2025-04-28T12:48:10.294Z] [runtime-status] [60837] Listening to port: /var/folders/b8/2ktxw5yj1xz8mylspf3xppwr0000gn/T/fire_emu_b99ec47c4d6a7ebb.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [60837] Listening to port: /var/folders/b8/2ktxw5yj1xz8mylspf3xppwr0000gn/T/fire_emu_b99ec47c4d6a7ebb.sock"}}
[debug] [2025-04-28T12:48:10.306Z] [worker-us-central1-api-b36557b9-4586-49cd-bd28-74a2416f8efd]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-b36557b9-4586-49cd-bd28-74a2416f8efd]: IDLE"}}
[debug] [2025-04-28T12:48:10.306Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-04-28T12:48:10.306Z] [worker-us-central1-api-b36557b9-4586-49cd-bd28-74a2416f8efd]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-b36557b9-4586-49cd-bd28-74a2416f8efd]: BUSY"}}
[info] >  Payment Request Recieved BOOM!!! for this amount >>>  0 {"user":"Payment Request Recieved BOOM!!! for this amount >>>  0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment Request Recieved BOOM!!! for this amount >>>  0"}}
[info] >  /Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39 {"user":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m /Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39"}}
[info] >          return new StripeInvalidRequestError(rawStripeError); {"user":"        return new StripeInvalidRequestError(rawStripeError);","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         return new StripeInvalidRequestError(rawStripeError);"}}
[info] >                 ^ {"user":"               ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents {"user":"StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents"}}
[info] >      at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16) {"user":"    at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16)"}}
[info] >      at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33) {"user":"    at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33)"}}
[info] >      at Object.onceWrapper (node:events:632:28) {"user":"    at Object.onceWrapper (node:events:632:28)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Object.onceWrapper (node:events:632:28)"}}
[info] >      at IncomingMessage.emit (node:events:530:35) {"user":"    at IncomingMessage.emit (node:events:530:35)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.emit (node:events:530:35)"}}
[info] >      at endReadableNT (node:internal/streams/readable:1698:12) {"user":"    at endReadableNT (node:internal/streams/readable:1698:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at endReadableNT (node:internal/streams/readable:1698:12)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:90:21) { {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {"}}
[info] >    type: 'StripeInvalidRequestError', {"user":"  type: 'StripeInvalidRequestError',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'StripeInvalidRequestError',"}}
[info] >    raw: { {"user":"  raw: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   raw: {"}}
[info] >      code: 'parameter_invalid_integer', {"user":"    code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 'parameter_invalid_integer',"}}
[info] >      doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >      message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents', {"user":"    message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents',"}}
[info] >      param: 'amount', {"user":"    param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     param: 'amount',"}}
[info] >      request_log_url: 'https://dashboard.stripe.com/test/logs/req_xBNM33BWkKk2Xf?t=1745844490', {"user":"    request_log_url: 'https://dashboard.stripe.com/test/logs/req_xBNM33BWkKk2Xf?t=1745844490',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     request_log_url: 'https://dashboard.stripe.com/test/logs/req_xBNM33BWkKk2Xf?t=1745844490',"}}
[info] >      type: 'invalid_request_error', {"user":"    type: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     type: 'invalid_request_error',"}}
[info] >      headers: { {"user":"    headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     headers: {"}}
[info] >        server: 'nginx', {"user":"      server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       server: 'nginx',"}}
[info] >        date: 'Mon, 28 Apr 2025 12:48:10 GMT', {"user":"      date: 'Mon, 28 Apr 2025 12:48:10 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       date: 'Mon, 28 Apr 2025 12:48:10 GMT',"}}
[info] >        'content-type': 'application/json', {"user":"      'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-type': 'application/json',"}}
[info] >        'content-length': '663', {"user":"      'content-length': '663',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-length': '663',"}}
[info] >        connection: 'keep-alive', {"user":"      connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       connection: 'keep-alive',"}}
[info] >        'access-control-allow-credentials': 'true', {"user":"      'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-credentials': 'true',"}}
[info] >        'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE', {"user":"      'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',"}}
[info] >        'access-control-allow-origin': '*', {"user":"      'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-origin': '*',"}}
[info] >        'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >        'access-control-max-age': '300', {"user":"      'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-max-age': '300',"}}
[info] >        'cache-control': 'no-cache, no-store', {"user":"      'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cache-control': 'no-cache, no-store',"}}
[info] >        'content-security-policy': "base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=QZQ2i8bZ6POfki-Px3vK8IIlzMqJ59jrFM-WS-LleHUnX5d7bW9QMCESR6F7cig7o3ZVvRDHmPmAFi1m", {"user":"      'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=QZQ2i8bZ6POfki-Px3vK8IIlzMqJ59jrFM-WS-LleHUnX5d7bW9QMCESR6F7cig7o3ZVvRDHmPmAFi1m\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=QZQ2i8bZ6POfki-Px3vK8IIlzMqJ59jrFM-WS-LleHUnX5d7bW9QMCESR6F7cig7o3ZVvRDHmPmAFi1m\","}}
[info] >        'idempotency-key': '5d33499d-7097-42c4-aab8-00c62f3f771d', {"user":"      'idempotency-key': '5d33499d-7097-42c4-aab8-00c62f3f771d',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'idempotency-key': '5d33499d-7097-42c4-aab8-00c62f3f771d',"}}
[info] >        'original-request': 'req_xBNM33BWkKk2Xf', {"user":"      'original-request': 'req_xBNM33BWkKk2Xf',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'original-request': 'req_xBNM33BWkKk2Xf',"}}
[info] >        'request-id': 'req_xBNM33BWkKk2Xf', {"user":"      'request-id': 'req_xBNM33BWkKk2Xf',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'request-id': 'req_xBNM33BWkKk2Xf',"}}
[info] >        'stripe-version': '2025-02-24.acacia', {"user":"      'stripe-version': '2025-02-24.acacia',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'stripe-version': '2025-02-24.acacia',"}}
[info] >        vary: 'Origin', {"user":"      vary: 'Origin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       vary: 'Origin',"}}
[info] >        'x-stripe-priority-routing-enabled': 'true', {"user":"      'x-stripe-priority-routing-enabled': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-priority-routing-enabled': 'true',"}}
[info] >        'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"      'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >        'x-wc': 'ABGHI', {"user":"      'x-wc': 'ABGHI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-wc': 'ABGHI',"}}
[info] >        'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      statusCode: 400, {"user":"    statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     statusCode: 400,"}}
[info] >      requestId: 'req_xBNM33BWkKk2Xf' {"user":"    requestId: 'req_xBNM33BWkKk2Xf'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     requestId: 'req_xBNM33BWkKk2Xf'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    rawType: 'invalid_request_error', {"user":"  rawType: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   rawType: 'invalid_request_error',"}}
[info] >    code: 'parameter_invalid_integer', {"user":"  code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'parameter_invalid_integer',"}}
[info] >    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"  doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >    param: 'amount', {"user":"  param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   param: 'amount',"}}
[info] >    detail: undefined, {"user":"  detail: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   detail: undefined,"}}
[info] >    headers: { {"user":"  headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   headers: {"}}
[info] >      server: 'nginx', {"user":"    server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     server: 'nginx',"}}
[info] >      date: 'Mon, 28 Apr 2025 12:48:10 GMT', {"user":"    date: 'Mon, 28 Apr 2025 12:48:10 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     date: 'Mon, 28 Apr 2025 12:48:10 GMT',"}}
[info] >      'content-type': 'application/json', {"user":"    'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-type': 'application/json',"}}
[info] >      'content-length': '663', {"user":"    'content-length': '663',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-length': '663',"}}
[info] >      connection: 'keep-alive', {"user":"    connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     connection: 'keep-alive',"}}
[info] >      'access-control-allow-credentials': 'true', {"user":"    'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-credentials': 'true',"}}
[info] >      'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE', {"user":"    'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',"}}
[info] >      'access-control-allow-origin': '*', {"user":"    'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-origin': '*',"}}
[info] >      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"    'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >      'access-control-max-age': '300', {"user":"    'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-max-age': '300',"}}
[info] >      'cache-control': 'no-cache, no-store', {"user":"    'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'cache-control': 'no-cache, no-store',"}}
[info] >      'content-security-policy': "base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=QZQ2i8bZ6POfki-Px3vK8IIlzMqJ59jrFM-WS-LleHUnX5d7bW9QMCESR6F7cig7o3ZVvRDHmPmAFi1m", {"user":"    'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=QZQ2i8bZ6POfki-Px3vK8IIlzMqJ59jrFM-WS-LleHUnX5d7bW9QMCESR6F7cig7o3ZVvRDHmPmAFi1m\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=QZQ2i8bZ6POfki-Px3vK8IIlzMqJ59jrFM-WS-LleHUnX5d7bW9QMCESR6F7cig7o3ZVvRDHmPmAFi1m\","}}
[info] >      'idempotency-key': '5d33499d-7097-42c4-aab8-00c62f3f771d', {"user":"    'idempotency-key': '5d33499d-7097-42c4-aab8-00c62f3f771d',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'idempotency-key': '5d33499d-7097-42c4-aab8-00c62f3f771d',"}}
[info] >      'original-request': 'req_xBNM33BWkKk2Xf', {"user":"    'original-request': 'req_xBNM33BWkKk2Xf',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'original-request': 'req_xBNM33BWkKk2Xf',"}}
[info] >      'request-id': 'req_xBNM33BWkKk2Xf', {"user":"    'request-id': 'req_xBNM33BWkKk2Xf',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'request-id': 'req_xBNM33BWkKk2Xf',"}}
[info] >      'stripe-version': '2025-02-24.acacia', {"user":"    'stripe-version': '2025-02-24.acacia',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'stripe-version': '2025-02-24.acacia',"}}
[info] >      vary: 'Origin', {"user":"    vary: 'Origin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     vary: 'Origin',"}}
[info] >      'x-stripe-priority-routing-enabled': 'true', {"user":"    'x-stripe-priority-routing-enabled': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-priority-routing-enabled': 'true',"}}
[info] >      'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"    'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >      'x-wc': 'ABGHI', {"user":"    'x-wc': 'ABGHI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-wc': 'ABGHI',"}}
[info] >      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"    'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    requestId: 'req_xBNM33BWkKk2Xf', {"user":"  requestId: 'req_xBNM33BWkKk2Xf',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   requestId: 'req_xBNM33BWkKk2Xf',"}}
[info] >    statusCode: 400, {"user":"  statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statusCode: 400,"}}
[info] >    charge: undefined, {"user":"  charge: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   charge: undefined,"}}
[info] >    decline_code: undefined, {"user":"  decline_code: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   decline_code: undefined,"}}
[info] >    payment_intent: undefined, {"user":"  payment_intent: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_intent: undefined,"}}
[info] >    payment_method: undefined, {"user":"  payment_method: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method: undefined,"}}
[info] >    setup_intent: undefined, {"user":"  setup_intent: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   setup_intent: undefined,"}}
[info] >    source: undefined {"user":"  source: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   source: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v22.11.0 {"user":"Node.js v22.11.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v22.11.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2025-04-28T12:48:10.862Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T12:48:10.862Z] [worker-us-central1-api-b36557b9-4586-49cd-bd28-74a2416f8efd]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-b36557b9-4586-49cd-bd28-74a2416f8efd]: exited"}}
[debug] [2025-04-28T12:48:10.862Z] [worker-us-central1-api-b36557b9-4586-49cd-bd28-74a2416f8efd]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-b36557b9-4586-49cd-bd28-74a2416f8efd]: FINISHED"}}
[debug] [2025-04-28T12:49:29.710Z] [work-queue] {"queuedWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T12:49:29.709Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T12:49:29.710Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T12:49:29.709Z"],"workRunningCount":1}
[debug] [2025-04-28T12:49:29.710Z] Accepted request POST /clone-f330b/us-central1/api/payments/create?total=0 --> us-central1-api
[debug] [2025-04-28T12:49:29.713Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-04-28T12:49:29.713Z] [functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0"}}
[debug] [2025-04-28T12:49:29.713Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2025-04-28T12:49:29.714Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2025-04-28T12:49:29.714Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[info] >  (node:61015) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead. {"user":"(node:61015) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m (node:61015) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead."}}
[info] >  (Use `node --trace-deprecation ...` to show where the warning was created) {"user":"(Use `node --trace-deprecation ...` to show where the warning was created)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m (Use `node --trace-deprecation ...` to show where the warning was created)"}}
[debug] [2025-04-28T12:49:30.550Z] [runtime-status] [61015] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.13.0","resolution":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [61015] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"8.13.0\",\"resolution\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-04-28T12:49:30.550Z] [runtime-status] [61015] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.11.0","resolution":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-functions/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [61015] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.11.0\",\"resolution\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-functions/lib/index.js\"}"}}
[warn] ⚠  The Cloud Functions emulator requires the module "firebase-functions" to be version >3.13.1 so your version is too old. You can probably fix this by running "npm install firebase-functions@latest" in your functions directory. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"The Cloud Functions emulator requires the module \"firebase-functions\" to be version >3.13.1 so your version is too old. You can probably fix this by running \"npm install firebase-functions@latest\" in your functions directory."}}
[info] i  functions: Your functions could not be parsed due to an issue with your node_modules (see above) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Your functions could not be parsed due to an issue with your node_modules (see above)"}}
[debug] [2025-04-28T12:49:30.641Z] [runtime-status] [61015] Functions runtime initialized. {"cwd":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions","node_version":"22.11.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [61015] Functions runtime initialized. {\"cwd\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions\",\"node_version\":\"22.11.0\"}"}}
[debug] [2025-04-28T12:49:30.641Z] [runtime-status] [61015] Listening to port: /var/folders/b8/2ktxw5yj1xz8mylspf3xppwr0000gn/T/fire_emu_dcdc7af83529dc12.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [61015] Listening to port: /var/folders/b8/2ktxw5yj1xz8mylspf3xppwr0000gn/T/fire_emu_dcdc7af83529dc12.sock"}}
[debug] [2025-04-28T12:49:30.732Z] [worker-us-central1-api-d6044924-0b4e-45ea-b949-87bdfe796508]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d6044924-0b4e-45ea-b949-87bdfe796508]: IDLE"}}
[debug] [2025-04-28T12:49:30.733Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-04-28T12:49:30.733Z] [worker-us-central1-api-d6044924-0b4e-45ea-b949-87bdfe796508]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d6044924-0b4e-45ea-b949-87bdfe796508]: BUSY"}}
[info] >  Payment Request Recieved BOOM!!! for this amount >>>  0 {"user":"Payment Request Recieved BOOM!!! for this amount >>>  0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment Request Recieved BOOM!!! for this amount >>>  0"}}
[info] >  /Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39 {"user":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m /Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39"}}
[info] >          return new StripeInvalidRequestError(rawStripeError); {"user":"        return new StripeInvalidRequestError(rawStripeError);","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         return new StripeInvalidRequestError(rawStripeError);"}}
[info] >                 ^ {"user":"               ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents {"user":"StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents"}}
[info] >      at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16) {"user":"    at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16)"}}
[info] >      at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33) {"user":"    at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33)"}}
[info] >      at Object.onceWrapper (node:events:632:28) {"user":"    at Object.onceWrapper (node:events:632:28)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Object.onceWrapper (node:events:632:28)"}}
[info] >      at IncomingMessage.emit (node:events:530:35) {"user":"    at IncomingMessage.emit (node:events:530:35)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.emit (node:events:530:35)"}}
[info] >      at endReadableNT (node:internal/streams/readable:1698:12) {"user":"    at endReadableNT (node:internal/streams/readable:1698:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at endReadableNT (node:internal/streams/readable:1698:12)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:90:21) { {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {"}}
[info] >    type: 'StripeInvalidRequestError', {"user":"  type: 'StripeInvalidRequestError',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'StripeInvalidRequestError',"}}
[info] >    raw: { {"user":"  raw: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   raw: {"}}
[info] >      code: 'parameter_invalid_integer', {"user":"    code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 'parameter_invalid_integer',"}}
[info] >      doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >      message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents', {"user":"    message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents',"}}
[info] >      param: 'amount', {"user":"    param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     param: 'amount',"}}
[info] >      request_log_url: 'https://dashboard.stripe.com/test/logs/req_jxvz28tJjxVdzh?t=1745844571', {"user":"    request_log_url: 'https://dashboard.stripe.com/test/logs/req_jxvz28tJjxVdzh?t=1745844571',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     request_log_url: 'https://dashboard.stripe.com/test/logs/req_jxvz28tJjxVdzh?t=1745844571',"}}
[info] >      type: 'invalid_request_error', {"user":"    type: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     type: 'invalid_request_error',"}}
[info] >      headers: { {"user":"    headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     headers: {"}}
[info] >        server: 'nginx', {"user":"      server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       server: 'nginx',"}}
[info] >        date: 'Mon, 28 Apr 2025 12:49:31 GMT', {"user":"      date: 'Mon, 28 Apr 2025 12:49:31 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       date: 'Mon, 28 Apr 2025 12:49:31 GMT',"}}
[info] >        'content-type': 'application/json', {"user":"      'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-type': 'application/json',"}}
[info] >        'content-length': '663', {"user":"      'content-length': '663',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-length': '663',"}}
[info] >        connection: 'keep-alive', {"user":"      connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       connection: 'keep-alive',"}}
[info] >        'access-control-allow-credentials': 'true', {"user":"      'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-credentials': 'true',"}}
[info] >        'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE', {"user":"      'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',"}}
[info] >        'access-control-allow-origin': '*', {"user":"      'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-origin': '*',"}}
[info] >        'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >        'access-control-max-age': '300', {"user":"      'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-max-age': '300',"}}
[info] >        'cache-control': 'no-cache, no-store', {"user":"      'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cache-control': 'no-cache, no-store',"}}
[info] >        'content-security-policy': "base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=WIj5CWjta1kUBRZdkLAQYvR3QDHVvpqXGMjJ6V-52NhMlNeu2w2MVkt1Vhwh91m4cvX71W-uiaPpTQJ1", {"user":"      'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=WIj5CWjta1kUBRZdkLAQYvR3QDHVvpqXGMjJ6V-52NhMlNeu2w2MVkt1Vhwh91m4cvX71W-uiaPpTQJ1\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=WIj5CWjta1kUBRZdkLAQYvR3QDHVvpqXGMjJ6V-52NhMlNeu2w2MVkt1Vhwh91m4cvX71W-uiaPpTQJ1\","}}
[info] >        'idempotency-key': '026faf0f-4f06-4a27-b2b0-63d6b7be171b', {"user":"      'idempotency-key': '026faf0f-4f06-4a27-b2b0-63d6b7be171b',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'idempotency-key': '026faf0f-4f06-4a27-b2b0-63d6b7be171b',"}}
[info] >        'original-request': 'req_jxvz28tJjxVdzh', {"user":"      'original-request': 'req_jxvz28tJjxVdzh',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'original-request': 'req_jxvz28tJjxVdzh',"}}
[info] >        'request-id': 'req_jxvz28tJjxVdzh', {"user":"      'request-id': 'req_jxvz28tJjxVdzh',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'request-id': 'req_jxvz28tJjxVdzh',"}}
[info] >        'stripe-version': '2025-02-24.acacia', {"user":"      'stripe-version': '2025-02-24.acacia',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'stripe-version': '2025-02-24.acacia',"}}
[info] >        vary: 'Origin', {"user":"      vary: 'Origin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       vary: 'Origin',"}}
[info] >        'x-stripe-priority-routing-enabled': 'true', {"user":"      'x-stripe-priority-routing-enabled': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-priority-routing-enabled': 'true',"}}
[info] >        'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"      'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >        'x-wc': 'ABGHI', {"user":"      'x-wc': 'ABGHI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-wc': 'ABGHI',"}}
[info] >        'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      statusCode: 400, {"user":"    statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     statusCode: 400,"}}
[info] >      requestId: 'req_jxvz28tJjxVdzh' {"user":"    requestId: 'req_jxvz28tJjxVdzh'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     requestId: 'req_jxvz28tJjxVdzh'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    rawType: 'invalid_request_error', {"user":"  rawType: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   rawType: 'invalid_request_error',"}}
[info] >    code: 'parameter_invalid_integer', {"user":"  code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'parameter_invalid_integer',"}}
[info] >    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"  doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >    param: 'amount', {"user":"  param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   param: 'amount',"}}
[info] >    detail: undefined, {"user":"  detail: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   detail: undefined,"}}
[info] >    headers: { {"user":"  headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   headers: {"}}
[info] >      server: 'nginx', {"user":"    server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     server: 'nginx',"}}
[info] >      date: 'Mon, 28 Apr 2025 12:49:31 GMT', {"user":"    date: 'Mon, 28 Apr 2025 12:49:31 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     date: 'Mon, 28 Apr 2025 12:49:31 GMT',"}}
[info] >      'content-type': 'application/json', {"user":"    'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-type': 'application/json',"}}
[info] >      'content-length': '663', {"user":"    'content-length': '663',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-length': '663',"}}
[info] >      connection: 'keep-alive', {"user":"    connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     connection: 'keep-alive',"}}
[info] >      'access-control-allow-credentials': 'true', {"user":"    'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-credentials': 'true',"}}
[info] >      'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE', {"user":"    'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',"}}
[info] >      'access-control-allow-origin': '*', {"user":"    'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-origin': '*',"}}
[info] >      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"    'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >      'access-control-max-age': '300', {"user":"    'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-max-age': '300',"}}
[info] >      'cache-control': 'no-cache, no-store', {"user":"    'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'cache-control': 'no-cache, no-store',"}}
[info] >      'content-security-policy': "base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=WIj5CWjta1kUBRZdkLAQYvR3QDHVvpqXGMjJ6V-52NhMlNeu2w2MVkt1Vhwh91m4cvX71W-uiaPpTQJ1", {"user":"    'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=WIj5CWjta1kUBRZdkLAQYvR3QDHVvpqXGMjJ6V-52NhMlNeu2w2MVkt1Vhwh91m4cvX71W-uiaPpTQJ1\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=WIj5CWjta1kUBRZdkLAQYvR3QDHVvpqXGMjJ6V-52NhMlNeu2w2MVkt1Vhwh91m4cvX71W-uiaPpTQJ1\","}}
[info] >      'idempotency-key': '026faf0f-4f06-4a27-b2b0-63d6b7be171b', {"user":"    'idempotency-key': '026faf0f-4f06-4a27-b2b0-63d6b7be171b',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'idempotency-key': '026faf0f-4f06-4a27-b2b0-63d6b7be171b',"}}
[info] >      'original-request': 'req_jxvz28tJjxVdzh', {"user":"    'original-request': 'req_jxvz28tJjxVdzh',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'original-request': 'req_jxvz28tJjxVdzh',"}}
[info] >      'request-id': 'req_jxvz28tJjxVdzh', {"user":"    'request-id': 'req_jxvz28tJjxVdzh',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'request-id': 'req_jxvz28tJjxVdzh',"}}
[info] >      'stripe-version': '2025-02-24.acacia', {"user":"    'stripe-version': '2025-02-24.acacia',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'stripe-version': '2025-02-24.acacia',"}}
[info] >      vary: 'Origin', {"user":"    vary: 'Origin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     vary: 'Origin',"}}
[info] >      'x-stripe-priority-routing-enabled': 'true', {"user":"    'x-stripe-priority-routing-enabled': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-priority-routing-enabled': 'true',"}}
[info] >      'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"    'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >      'x-wc': 'ABGHI', {"user":"    'x-wc': 'ABGHI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-wc': 'ABGHI',"}}
[info] >      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"    'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    requestId: 'req_jxvz28tJjxVdzh', {"user":"  requestId: 'req_jxvz28tJjxVdzh',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   requestId: 'req_jxvz28tJjxVdzh',"}}
[info] >    statusCode: 400, {"user":"  statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statusCode: 400,"}}
[info] >    charge: undefined, {"user":"  charge: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   charge: undefined,"}}
[info] >    decline_code: undefined, {"user":"  decline_code: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   decline_code: undefined,"}}
[info] >    payment_intent: undefined, {"user":"  payment_intent: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_intent: undefined,"}}
[info] >    payment_method: undefined, {"user":"  payment_method: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method: undefined,"}}
[info] >    setup_intent: undefined, {"user":"  setup_intent: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   setup_intent: undefined,"}}
[info] >    source: undefined {"user":"  source: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   source: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v22.11.0 {"user":"Node.js v22.11.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v22.11.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2025-04-28T12:49:31.278Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T12:49:31.278Z] [worker-us-central1-api-d6044924-0b4e-45ea-b949-87bdfe796508]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d6044924-0b4e-45ea-b949-87bdfe796508]: exited"}}
[debug] [2025-04-28T12:49:31.278Z] [worker-us-central1-api-d6044924-0b4e-45ea-b949-87bdfe796508]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-d6044924-0b4e-45ea-b949-87bdfe796508]: FINISHED"}}
[debug] [2025-04-28T12:49:36.894Z] [work-queue] {"queuedWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T12:49:36.893Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T12:49:36.894Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T12:49:36.893Z"],"workRunningCount":1}
[debug] [2025-04-28T12:49:36.894Z] Accepted request POST /clone-f330b/us-central1/api/payments/create?total=0 --> us-central1-api
[debug] [2025-04-28T12:49:36.897Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-04-28T12:49:36.898Z] [functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0"}}
[debug] [2025-04-28T12:49:36.898Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2025-04-28T12:49:36.900Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2025-04-28T12:49:36.901Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[info] >  (node:61039) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead. {"user":"(node:61039) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m (node:61039) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead."}}
[info] >  (Use `node --trace-deprecation ...` to show where the warning was created) {"user":"(Use `node --trace-deprecation ...` to show where the warning was created)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m (Use `node --trace-deprecation ...` to show where the warning was created)"}}
[debug] [2025-04-28T12:49:37.556Z] [runtime-status] [61039] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.13.0","resolution":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [61039] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"8.13.0\",\"resolution\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-04-28T12:49:37.556Z] [runtime-status] [61039] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.11.0","resolution":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-functions/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [61039] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.11.0\",\"resolution\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-functions/lib/index.js\"}"}}
[warn] ⚠  The Cloud Functions emulator requires the module "firebase-functions" to be version >3.13.1 so your version is too old. You can probably fix this by running "npm install firebase-functions@latest" in your functions directory. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"The Cloud Functions emulator requires the module \"firebase-functions\" to be version >3.13.1 so your version is too old. You can probably fix this by running \"npm install firebase-functions@latest\" in your functions directory."}}
[info] i  functions: Your functions could not be parsed due to an issue with your node_modules (see above) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Your functions could not be parsed due to an issue with your node_modules (see above)"}}
[debug] [2025-04-28T12:49:37.675Z] [runtime-status] [61039] Functions runtime initialized. {"cwd":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions","node_version":"22.11.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [61039] Functions runtime initialized. {\"cwd\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions\",\"node_version\":\"22.11.0\"}"}}
[debug] [2025-04-28T12:49:37.675Z] [runtime-status] [61039] Listening to port: /var/folders/b8/2ktxw5yj1xz8mylspf3xppwr0000gn/T/fire_emu_f3ad437ee5c4edfb.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [61039] Listening to port: /var/folders/b8/2ktxw5yj1xz8mylspf3xppwr0000gn/T/fire_emu_f3ad437ee5c4edfb.sock"}}
[debug] [2025-04-28T12:49:37.715Z] [worker-us-central1-api-2942f1bd-f768-4da3-ab8a-3eba30099214]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-2942f1bd-f768-4da3-ab8a-3eba30099214]: IDLE"}}
[debug] [2025-04-28T12:49:37.715Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-04-28T12:49:37.715Z] [worker-us-central1-api-2942f1bd-f768-4da3-ab8a-3eba30099214]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-2942f1bd-f768-4da3-ab8a-3eba30099214]: BUSY"}}
[info] >  Payment Request Recieved BOOM!!! for this amount >>>  0 {"user":"Payment Request Recieved BOOM!!! for this amount >>>  0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment Request Recieved BOOM!!! for this amount >>>  0"}}
[info] >  /Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39 {"user":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m /Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39"}}
[info] >          return new StripeInvalidRequestError(rawStripeError); {"user":"        return new StripeInvalidRequestError(rawStripeError);","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         return new StripeInvalidRequestError(rawStripeError);"}}
[info] >                 ^ {"user":"               ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents {"user":"StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents"}}
[info] >      at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16) {"user":"    at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16)"}}
[info] >      at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33) {"user":"    at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33)"}}
[info] >      at Object.onceWrapper (node:events:632:28) {"user":"    at Object.onceWrapper (node:events:632:28)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Object.onceWrapper (node:events:632:28)"}}
[info] >      at IncomingMessage.emit (node:events:530:35) {"user":"    at IncomingMessage.emit (node:events:530:35)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.emit (node:events:530:35)"}}
[info] >      at endReadableNT (node:internal/streams/readable:1698:12) {"user":"    at endReadableNT (node:internal/streams/readable:1698:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at endReadableNT (node:internal/streams/readable:1698:12)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:90:21) { {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {"}}
[info] >    type: 'StripeInvalidRequestError', {"user":"  type: 'StripeInvalidRequestError',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'StripeInvalidRequestError',"}}
[info] >    raw: { {"user":"  raw: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   raw: {"}}
[info] >      code: 'parameter_invalid_integer', {"user":"    code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 'parameter_invalid_integer',"}}
[info] >      doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >      message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents', {"user":"    message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents',"}}
[info] >      param: 'amount', {"user":"    param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     param: 'amount',"}}
[info] >      request_log_url: 'https://dashboard.stripe.com/test/logs/req_pFWYTjDfao0bVC?t=1745844578', {"user":"    request_log_url: 'https://dashboard.stripe.com/test/logs/req_pFWYTjDfao0bVC?t=1745844578',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     request_log_url: 'https://dashboard.stripe.com/test/logs/req_pFWYTjDfao0bVC?t=1745844578',"}}
[info] >      type: 'invalid_request_error', {"user":"    type: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     type: 'invalid_request_error',"}}
[info] >      headers: { {"user":"    headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     headers: {"}}
[info] >        server: 'nginx', {"user":"      server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       server: 'nginx',"}}
[info] >        date: 'Mon, 28 Apr 2025 12:49:38 GMT', {"user":"      date: 'Mon, 28 Apr 2025 12:49:38 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       date: 'Mon, 28 Apr 2025 12:49:38 GMT',"}}
[info] >        'content-type': 'application/json', {"user":"      'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-type': 'application/json',"}}
[info] >        'content-length': '663', {"user":"      'content-length': '663',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-length': '663',"}}
[info] >        connection: 'keep-alive', {"user":"      connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       connection: 'keep-alive',"}}
[info] >        'access-control-allow-credentials': 'true', {"user":"      'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-credentials': 'true',"}}
[info] >        'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE', {"user":"      'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',"}}
[info] >        'access-control-allow-origin': '*', {"user":"      'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-origin': '*',"}}
[info] >        'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >        'access-control-max-age': '300', {"user":"      'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-max-age': '300',"}}
[info] >        'cache-control': 'no-cache, no-store', {"user":"      'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cache-control': 'no-cache, no-store',"}}
[info] >        'content-security-policy': "base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=UFNcVg14S4H0A5Z1GG3mwBiEL9bvsTi1r5tsHJipz8RgU-EZCEylhvr21BTp0clmGK-ljI75df8A-3XZ", {"user":"      'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=UFNcVg14S4H0A5Z1GG3mwBiEL9bvsTi1r5tsHJipz8RgU-EZCEylhvr21BTp0clmGK-ljI75df8A-3XZ\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=UFNcVg14S4H0A5Z1GG3mwBiEL9bvsTi1r5tsHJipz8RgU-EZCEylhvr21BTp0clmGK-ljI75df8A-3XZ\","}}
[info] >        'idempotency-key': '64d5df26-e46e-4297-b5e3-c6d128ff541b', {"user":"      'idempotency-key': '64d5df26-e46e-4297-b5e3-c6d128ff541b',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'idempotency-key': '64d5df26-e46e-4297-b5e3-c6d128ff541b',"}}
[info] >        'original-request': 'req_pFWYTjDfao0bVC', {"user":"      'original-request': 'req_pFWYTjDfao0bVC',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'original-request': 'req_pFWYTjDfao0bVC',"}}
[info] >        'request-id': 'req_pFWYTjDfao0bVC', {"user":"      'request-id': 'req_pFWYTjDfao0bVC',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'request-id': 'req_pFWYTjDfao0bVC',"}}
[info] >        'stripe-version': '2025-02-24.acacia', {"user":"      'stripe-version': '2025-02-24.acacia',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'stripe-version': '2025-02-24.acacia',"}}
[info] >        vary: 'Origin', {"user":"      vary: 'Origin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       vary: 'Origin',"}}
[info] >        'x-stripe-priority-routing-enabled': 'true', {"user":"      'x-stripe-priority-routing-enabled': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-priority-routing-enabled': 'true',"}}
[info] >        'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"      'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >        'x-wc': 'ABGHI', {"user":"      'x-wc': 'ABGHI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-wc': 'ABGHI',"}}
[info] >        'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      statusCode: 400, {"user":"    statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     statusCode: 400,"}}
[info] >      requestId: 'req_pFWYTjDfao0bVC' {"user":"    requestId: 'req_pFWYTjDfao0bVC'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     requestId: 'req_pFWYTjDfao0bVC'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    rawType: 'invalid_request_error', {"user":"  rawType: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   rawType: 'invalid_request_error',"}}
[info] >    code: 'parameter_invalid_integer', {"user":"  code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'parameter_invalid_integer',"}}
[info] >    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"  doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >    param: 'amount', {"user":"  param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   param: 'amount',"}}
[info] >    detail: undefined, {"user":"  detail: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   detail: undefined,"}}
[info] >    headers: { {"user":"  headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   headers: {"}}
[info] >      server: 'nginx', {"user":"    server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     server: 'nginx',"}}
[info] >      date: 'Mon, 28 Apr 2025 12:49:38 GMT', {"user":"    date: 'Mon, 28 Apr 2025 12:49:38 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     date: 'Mon, 28 Apr 2025 12:49:38 GMT',"}}
[info] >      'content-type': 'application/json', {"user":"    'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-type': 'application/json',"}}
[info] >      'content-length': '663', {"user":"    'content-length': '663',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-length': '663',"}}
[info] >      connection: 'keep-alive', {"user":"    connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     connection: 'keep-alive',"}}
[info] >      'access-control-allow-credentials': 'true', {"user":"    'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-credentials': 'true',"}}
[info] >      'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE', {"user":"    'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',"}}
[info] >      'access-control-allow-origin': '*', {"user":"    'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-origin': '*',"}}
[info] >      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"    'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >      'access-control-max-age': '300', {"user":"    'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-max-age': '300',"}}
[info] >      'cache-control': 'no-cache, no-store', {"user":"    'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'cache-control': 'no-cache, no-store',"}}
[info] >      'content-security-policy': "base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=UFNcVg14S4H0A5Z1GG3mwBiEL9bvsTi1r5tsHJipz8RgU-EZCEylhvr21BTp0clmGK-ljI75df8A-3XZ", {"user":"    'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=UFNcVg14S4H0A5Z1GG3mwBiEL9bvsTi1r5tsHJipz8RgU-EZCEylhvr21BTp0clmGK-ljI75df8A-3XZ\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=UFNcVg14S4H0A5Z1GG3mwBiEL9bvsTi1r5tsHJipz8RgU-EZCEylhvr21BTp0clmGK-ljI75df8A-3XZ\","}}
[info] >      'idempotency-key': '64d5df26-e46e-4297-b5e3-c6d128ff541b', {"user":"    'idempotency-key': '64d5df26-e46e-4297-b5e3-c6d128ff541b',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'idempotency-key': '64d5df26-e46e-4297-b5e3-c6d128ff541b',"}}
[info] >      'original-request': 'req_pFWYTjDfao0bVC', {"user":"    'original-request': 'req_pFWYTjDfao0bVC',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'original-request': 'req_pFWYTjDfao0bVC',"}}
[info] >      'request-id': 'req_pFWYTjDfao0bVC', {"user":"    'request-id': 'req_pFWYTjDfao0bVC',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'request-id': 'req_pFWYTjDfao0bVC',"}}
[info] >      'stripe-version': '2025-02-24.acacia', {"user":"    'stripe-version': '2025-02-24.acacia',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'stripe-version': '2025-02-24.acacia',"}}
[info] >      vary: 'Origin', {"user":"    vary: 'Origin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     vary: 'Origin',"}}
[info] >      'x-stripe-priority-routing-enabled': 'true', {"user":"    'x-stripe-priority-routing-enabled': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-priority-routing-enabled': 'true',"}}
[info] >      'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"    'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >      'x-wc': 'ABGHI', {"user":"    'x-wc': 'ABGHI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-wc': 'ABGHI',"}}
[info] >      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"    'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    requestId: 'req_pFWYTjDfao0bVC', {"user":"  requestId: 'req_pFWYTjDfao0bVC',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   requestId: 'req_pFWYTjDfao0bVC',"}}
[info] >    statusCode: 400, {"user":"  statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statusCode: 400,"}}
[info] >    charge: undefined, {"user":"  charge: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   charge: undefined,"}}
[info] >    decline_code: undefined, {"user":"  decline_code: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   decline_code: undefined,"}}
[info] >    payment_intent: undefined, {"user":"  payment_intent: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_intent: undefined,"}}
[info] >    payment_method: undefined, {"user":"  payment_method: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method: undefined,"}}
[info] >    setup_intent: undefined, {"user":"  setup_intent: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   setup_intent: undefined,"}}
[info] >    source: undefined {"user":"  source: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   source: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v22.11.0 {"user":"Node.js v22.11.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v22.11.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2025-04-28T12:49:38.267Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T12:49:38.267Z] [worker-us-central1-api-2942f1bd-f768-4da3-ab8a-3eba30099214]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-2942f1bd-f768-4da3-ab8a-3eba30099214]: exited"}}
[debug] [2025-04-28T12:49:38.269Z] [worker-us-central1-api-2942f1bd-f768-4da3-ab8a-3eba30099214]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-2942f1bd-f768-4da3-ab8a-3eba30099214]: FINISHED"}}
[debug] [2025-04-28T12:49:49.719Z] [work-queue] {"queuedWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T12:49:49.719Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T12:49:49.719Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T12:49:49.719Z"],"workRunningCount":1}
[debug] [2025-04-28T12:49:49.719Z] Accepted request POST /clone-f330b/us-central1/api/payments/create?total=4784 --> us-central1-api
[debug] [2025-04-28T12:49:49.722Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-04-28T12:49:49.722Z] [functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=4784, mapping to path=/payments/create?total=4784 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=4784, mapping to path=/payments/create?total=4784"}}
[debug] [2025-04-28T12:49:49.722Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2025-04-28T12:49:49.723Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2025-04-28T12:49:49.723Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[info] >  (node:61074) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead. {"user":"(node:61074) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m (node:61074) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead."}}
[info] >  (Use `node --trace-deprecation ...` to show where the warning was created) {"user":"(Use `node --trace-deprecation ...` to show where the warning was created)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m (Use `node --trace-deprecation ...` to show where the warning was created)"}}
[debug] [2025-04-28T12:49:50.281Z] [runtime-status] [61074] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.13.0","resolution":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [61074] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"8.13.0\",\"resolution\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-04-28T12:49:50.281Z] [runtime-status] [61074] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.11.0","resolution":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-functions/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [61074] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.11.0\",\"resolution\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-functions/lib/index.js\"}"}}
[warn] ⚠  The Cloud Functions emulator requires the module "firebase-functions" to be version >3.13.1 so your version is too old. You can probably fix this by running "npm install firebase-functions@latest" in your functions directory. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"The Cloud Functions emulator requires the module \"firebase-functions\" to be version >3.13.1 so your version is too old. You can probably fix this by running \"npm install firebase-functions@latest\" in your functions directory."}}
[info] i  functions: Your functions could not be parsed due to an issue with your node_modules (see above) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Your functions could not be parsed due to an issue with your node_modules (see above)"}}
[debug] [2025-04-28T12:49:50.353Z] [runtime-status] [61074] Functions runtime initialized. {"cwd":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions","node_version":"22.11.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [61074] Functions runtime initialized. {\"cwd\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions\",\"node_version\":\"22.11.0\"}"}}
[debug] [2025-04-28T12:49:50.353Z] [runtime-status] [61074] Listening to port: /var/folders/b8/2ktxw5yj1xz8mylspf3xppwr0000gn/T/fire_emu_ba9e487c58ee8a46.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [61074] Listening to port: /var/folders/b8/2ktxw5yj1xz8mylspf3xppwr0000gn/T/fire_emu_ba9e487c58ee8a46.sock"}}
[debug] [2025-04-28T12:49:50.435Z] [worker-us-central1-api-62bb9847-5988-435b-8cd2-fce19c73ca98]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-62bb9847-5988-435b-8cd2-fce19c73ca98]: IDLE"}}
[debug] [2025-04-28T12:49:50.435Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-04-28T12:49:50.435Z] [worker-us-central1-api-62bb9847-5988-435b-8cd2-fce19c73ca98]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-62bb9847-5988-435b-8cd2-fce19c73ca98]: BUSY"}}
[info] >  Payment Request Recieved BOOM!!! for this amount >>>  4784 {"user":"Payment Request Recieved BOOM!!! for this amount >>>  4784","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment Request Recieved BOOM!!! for this amount >>>  4784"}}
[info] >  paymentRECEIVED >>>  { {"user":"paymentRECEIVED >>>  {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m paymentRECEIVED >>>  {"}}
[info] >    id: 'pi_3RIr86JlvCjqT1Et1ARPlmqe', {"user":"  id: 'pi_3RIr86JlvCjqT1Et1ARPlmqe',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   id: 'pi_3RIr86JlvCjqT1Et1ARPlmqe',"}}
[info] >    object: 'payment_intent', {"user":"  object: 'payment_intent',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   object: 'payment_intent',"}}
[info] >    amount: 4784, {"user":"  amount: 4784,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   amount: 4784,"}}
[info] >    amount_capturable: 0, {"user":"  amount_capturable: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   amount_capturable: 0,"}}
[info] >    amount_details: { tip: {} }, {"user":"  amount_details: { tip: {} },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   amount_details: { tip: {} },"}}
[info] >    amount_received: 0, {"user":"  amount_received: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   amount_received: 0,"}}
[info] >    application: null, {"user":"  application: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   application: null,"}}
[info] >    application_fee_amount: null, {"user":"  application_fee_amount: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   application_fee_amount: null,"}}
[info] >    automatic_payment_methods: { allow_redirects: 'always', enabled: true }, {"user":"  automatic_payment_methods: { allow_redirects: 'always', enabled: true },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   automatic_payment_methods: { allow_redirects: 'always', enabled: true },"}}
[info] >    canceled_at: null, {"user":"  canceled_at: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   canceled_at: null,"}}
[info] >    cancellation_reason: null, {"user":"  cancellation_reason: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   cancellation_reason: null,"}}
[info] >    capture_method: 'automatic_async', {"user":"  capture_method: 'automatic_async',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   capture_method: 'automatic_async',"}}
[info] >    client_secret: 'pi_3RIr86JlvCjqT1Et1ARPlmqe_secret_5YwKphnAFU9XtcTFNcnxmpRW7', {"user":"  client_secret: 'pi_3RIr86JlvCjqT1Et1ARPlmqe_secret_5YwKphnAFU9XtcTFNcnxmpRW7',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   client_secret: 'pi_3RIr86JlvCjqT1Et1ARPlmqe_secret_5YwKphnAFU9XtcTFNcnxmpRW7',"}}
[info] >    confirmation_method: 'automatic', {"user":"  confirmation_method: 'automatic',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   confirmation_method: 'automatic',"}}
[info] >    created: 1745844590, {"user":"  created: 1745844590,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   created: 1745844590,"}}
[info] >    currency: 'usd', {"user":"  currency: 'usd',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   currency: 'usd',"}}
[info] >    customer: null, {"user":"  customer: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   customer: null,"}}
[info] >    description: null, {"user":"  description: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   description: null,"}}
[info] >    invoice: null, {"user":"  invoice: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   invoice: null,"}}
[info] >    last_payment_error: null, {"user":"  last_payment_error: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   last_payment_error: null,"}}
[info] >    latest_charge: null, {"user":"  latest_charge: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   latest_charge: null,"}}
[info] >    livemode: false, {"user":"  livemode: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   livemode: false,"}}
[info] >    metadata: {}, {"user":"  metadata: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   metadata: {},"}}
[info] >    next_action: null, {"user":"  next_action: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   next_action: null,"}}
[info] >    on_behalf_of: null, {"user":"  on_behalf_of: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   on_behalf_of: null,"}}
[info] >    payment_method: null, {"user":"  payment_method: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method: null,"}}
[info] >    payment_method_configuration_details: { id: 'pmc_1R1R5nJlvCjqT1EtYHXN7Kcf', parent: null }, {"user":"  payment_method_configuration_details: { id: 'pmc_1R1R5nJlvCjqT1EtYHXN7Kcf', parent: null },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method_configuration_details: { id: 'pmc_1R1R5nJlvCjqT1EtYHXN7Kcf', parent: null },"}}
[info] >    payment_method_options: { {"user":"  payment_method_options: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method_options: {"}}
[info] >      amazon_pay: { express_checkout_element_session_id: null }, {"user":"    amazon_pay: { express_checkout_element_session_id: null },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     amazon_pay: { express_checkout_element_session_id: null },"}}
[info] >      card: { {"user":"    card: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     card: {"}}
[info] >        installments: null, {"user":"      installments: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       installments: null,"}}
[info] >        mandate_options: null, {"user":"      mandate_options: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       mandate_options: null,"}}
[info] >        network: null, {"user":"      network: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       network: null,"}}
[info] >        request_three_d_secure: 'automatic' {"user":"      request_three_d_secure: 'automatic'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       request_three_d_secure: 'automatic'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      cashapp: {}, {"user":"    cashapp: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     cashapp: {},"}}
[info] >      klarna: { preferred_locale: null }, {"user":"    klarna: { preferred_locale: null },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     klarna: { preferred_locale: null },"}}
[info] >      link: { persistent_token: null } {"user":"    link: { persistent_token: null }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     link: { persistent_token: null }"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    payment_method_types: [ 'card', 'klarna', 'link', 'cashapp', 'amazon_pay' ], {"user":"  payment_method_types: [ 'card', 'klarna', 'link', 'cashapp', 'amazon_pay' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method_types: [ 'card', 'klarna', 'link', 'cashapp', 'amazon_pay' ],"}}
[info] >    processing: null, {"user":"  processing: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   processing: null,"}}
[info] >    receipt_email: null, {"user":"  receipt_email: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   receipt_email: null,"}}
[info] >    review: null, {"user":"  review: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   review: null,"}}
[info] >    setup_future_usage: null, {"user":"  setup_future_usage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   setup_future_usage: null,"}}
[info] >    shipping: null, {"user":"  shipping: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   shipping: null,"}}
[info] >    source: null, {"user":"  source: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   source: null,"}}
[info] >    statement_descriptor: null, {"user":"  statement_descriptor: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statement_descriptor: null,"}}
[info] >    statement_descriptor_suffix: null, {"user":"  statement_descriptor_suffix: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statement_descriptor_suffix: null,"}}
[info] >    status: 'requires_payment_method', {"user":"  status: 'requires_payment_method',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   status: 'requires_payment_method',"}}
[info] >    transfer_data: null, {"user":"  transfer_data: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   transfer_data: null,"}}
[info] >    transfer_group: null {"user":"  transfer_group: null","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   transfer_group: null"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2025-04-28T12:49:51.118Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 682.940041ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 682.940041ms"}}
[debug] [2025-04-28T12:49:51.119Z] [worker-us-central1-api-62bb9847-5988-435b-8cd2-fce19c73ca98]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-62bb9847-5988-435b-8cd2-fce19c73ca98]: IDLE"}}
[debug] [2025-04-28T12:49:51.119Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-04-28T12:49:51.119Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-04-28T12:49:51.119Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T12:50:29.788Z] [work-queue] {"queuedWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T12:50:29.788Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T12:50:29.788Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T12:50:29.788Z"],"workRunningCount":1}
[debug] [2025-04-28T12:50:29.788Z] Accepted request POST /clone-f330b/us-central1/api/payments/create?total=4784 --> us-central1-api
[debug] [2025-04-28T12:50:29.791Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-04-28T12:50:29.792Z] [functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=4784, mapping to path=/payments/create?total=4784 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=4784, mapping to path=/payments/create?total=4784"}}
[debug] [2025-04-28T12:50:29.792Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-04-28T12:50:29.792Z] [worker-us-central1-api-62bb9847-5988-435b-8cd2-fce19c73ca98]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-62bb9847-5988-435b-8cd2-fce19c73ca98]: BUSY"}}
[info] >  Payment Request Recieved BOOM!!! for this amount >>>  4784 {"user":"Payment Request Recieved BOOM!!! for this amount >>>  4784","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment Request Recieved BOOM!!! for this amount >>>  4784"}}
[info] >  paymentRECEIVED >>>  { {"user":"paymentRECEIVED >>>  {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m paymentRECEIVED >>>  {"}}
[info] >    id: 'pi_3RIr8kJlvCjqT1Et0o9rnlZD', {"user":"  id: 'pi_3RIr8kJlvCjqT1Et0o9rnlZD',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   id: 'pi_3RIr8kJlvCjqT1Et0o9rnlZD',"}}
[info] >    object: 'payment_intent', {"user":"  object: 'payment_intent',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   object: 'payment_intent',"}}
[info] >    amount: 4784, {"user":"  amount: 4784,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   amount: 4784,"}}
[info] >    amount_capturable: 0, {"user":"  amount_capturable: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   amount_capturable: 0,"}}
[info] >    amount_details: { tip: {} }, {"user":"  amount_details: { tip: {} },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   amount_details: { tip: {} },"}}
[info] >    amount_received: 0, {"user":"  amount_received: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   amount_received: 0,"}}
[info] >    application: null, {"user":"  application: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   application: null,"}}
[info] >    application_fee_amount: null, {"user":"  application_fee_amount: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   application_fee_amount: null,"}}
[info] >    automatic_payment_methods: { allow_redirects: 'always', enabled: true }, {"user":"  automatic_payment_methods: { allow_redirects: 'always', enabled: true },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   automatic_payment_methods: { allow_redirects: 'always', enabled: true },"}}
[info] >    canceled_at: null, {"user":"  canceled_at: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   canceled_at: null,"}}
[info] >    cancellation_reason: null, {"user":"  cancellation_reason: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   cancellation_reason: null,"}}
[info] >    capture_method: 'automatic_async', {"user":"  capture_method: 'automatic_async',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   capture_method: 'automatic_async',"}}
[info] >    client_secret: 'pi_3RIr8kJlvCjqT1Et0o9rnlZD_secret_h6hrRdpG0349P0dbBECbyouM4', {"user":"  client_secret: 'pi_3RIr8kJlvCjqT1Et0o9rnlZD_secret_h6hrRdpG0349P0dbBECbyouM4',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   client_secret: 'pi_3RIr8kJlvCjqT1Et0o9rnlZD_secret_h6hrRdpG0349P0dbBECbyouM4',"}}
[info] >    confirmation_method: 'automatic', {"user":"  confirmation_method: 'automatic',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   confirmation_method: 'automatic',"}}
[info] >    created: 1745844630, {"user":"  created: 1745844630,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   created: 1745844630,"}}
[info] >    currency: 'usd', {"user":"  currency: 'usd',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   currency: 'usd',"}}
[info] >    customer: null, {"user":"  customer: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   customer: null,"}}
[info] >    description: null, {"user":"  description: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   description: null,"}}
[info] >    invoice: null, {"user":"  invoice: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   invoice: null,"}}
[info] >    last_payment_error: null, {"user":"  last_payment_error: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   last_payment_error: null,"}}
[info] >    latest_charge: null, {"user":"  latest_charge: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   latest_charge: null,"}}
[info] >    livemode: false, {"user":"  livemode: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   livemode: false,"}}
[info] >    metadata: {}, {"user":"  metadata: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   metadata: {},"}}
[info] >    next_action: null, {"user":"  next_action: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   next_action: null,"}}
[info] >    on_behalf_of: null, {"user":"  on_behalf_of: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   on_behalf_of: null,"}}
[info] >    payment_method: null, {"user":"  payment_method: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method: null,"}}
[info] >    payment_method_configuration_details: { id: 'pmc_1R1R5nJlvCjqT1EtYHXN7Kcf', parent: null }, {"user":"  payment_method_configuration_details: { id: 'pmc_1R1R5nJlvCjqT1EtYHXN7Kcf', parent: null },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method_configuration_details: { id: 'pmc_1R1R5nJlvCjqT1EtYHXN7Kcf', parent: null },"}}
[info] >    payment_method_options: { {"user":"  payment_method_options: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method_options: {"}}
[info] >      amazon_pay: { express_checkout_element_session_id: null }, {"user":"    amazon_pay: { express_checkout_element_session_id: null },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     amazon_pay: { express_checkout_element_session_id: null },"}}
[info] >      card: { {"user":"    card: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     card: {"}}
[info] >        installments: null, {"user":"      installments: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       installments: null,"}}
[info] >        mandate_options: null, {"user":"      mandate_options: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       mandate_options: null,"}}
[info] >        network: null, {"user":"      network: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       network: null,"}}
[info] >        request_three_d_secure: 'automatic' {"user":"      request_three_d_secure: 'automatic'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       request_three_d_secure: 'automatic'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      cashapp: {}, {"user":"    cashapp: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     cashapp: {},"}}
[info] >      klarna: { preferred_locale: null }, {"user":"    klarna: { preferred_locale: null },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     klarna: { preferred_locale: null },"}}
[info] >      link: { persistent_token: null } {"user":"    link: { persistent_token: null }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     link: { persistent_token: null }"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    payment_method_types: [ 'card', 'klarna', 'link', 'cashapp', 'amazon_pay' ], {"user":"  payment_method_types: [ 'card', 'klarna', 'link', 'cashapp', 'amazon_pay' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method_types: [ 'card', 'klarna', 'link', 'cashapp', 'amazon_pay' ],"}}
[info] >    processing: null, {"user":"  processing: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   processing: null,"}}
[info] >    receipt_email: null, {"user":"  receipt_email: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   receipt_email: null,"}}
[info] >    review: null, {"user":"  review: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   review: null,"}}
[info] >    setup_future_usage: null, {"user":"  setup_future_usage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   setup_future_usage: null,"}}
[info] >    shipping: null, {"user":"  shipping: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   shipping: null,"}}
[info] >    source: null, {"user":"  source: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   source: null,"}}
[info] >    statement_descriptor: null, {"user":"  statement_descriptor: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statement_descriptor: null,"}}
[info] >    statement_descriptor_suffix: null, {"user":"  statement_descriptor_suffix: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statement_descriptor_suffix: null,"}}
[info] >    status: 'requires_payment_method', {"user":"  status: 'requires_payment_method',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   status: 'requires_payment_method',"}}
[info] >    transfer_data: null, {"user":"  transfer_data: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   transfer_data: null,"}}
[info] >    transfer_group: null {"user":"  transfer_group: null","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   transfer_group: null"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2025-04-28T12:50:30.299Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 506.935333ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 506.935333ms"}}
[debug] [2025-04-28T12:50:30.300Z] [worker-us-central1-api-62bb9847-5988-435b-8cd2-fce19c73ca98]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-62bb9847-5988-435b-8cd2-fce19c73ca98]: IDLE"}}
[debug] [2025-04-28T12:50:30.300Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-04-28T12:50:30.300Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-04-28T12:50:30.301Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T12:53:54.550Z] [work-queue] {"queuedWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T12:53:54.550Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T12:53:54.551Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T12:53:54.550Z"],"workRunningCount":1}
[debug] [2025-04-28T12:53:54.551Z] Accepted request POST /clone-f330b/us-central1/api/payments/create?total=0 --> us-central1-api
[debug] [2025-04-28T12:53:54.553Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-04-28T12:53:54.554Z] [functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0"}}
[debug] [2025-04-28T12:53:54.554Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-04-28T12:53:54.555Z] [worker-us-central1-api-62bb9847-5988-435b-8cd2-fce19c73ca98]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-62bb9847-5988-435b-8cd2-fce19c73ca98]: BUSY"}}
[info] >  Payment Request Recieved BOOM!!! for this amount >>>  0 {"user":"Payment Request Recieved BOOM!!! for this amount >>>  0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment Request Recieved BOOM!!! for this amount >>>  0"}}
[info] >  /Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39 {"user":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m /Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39"}}
[info] >          return new StripeInvalidRequestError(rawStripeError); {"user":"        return new StripeInvalidRequestError(rawStripeError);","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         return new StripeInvalidRequestError(rawStripeError);"}}
[info] >                 ^ {"user":"               ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents {"user":"StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents"}}
[info] >      at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16) {"user":"    at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16)"}}
[info] >      at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33) {"user":"    at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33)"}}
[info] >      at Object.onceWrapper (node:events:632:28) {"user":"    at Object.onceWrapper (node:events:632:28)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Object.onceWrapper (node:events:632:28)"}}
[info] >      at IncomingMessage.emit (node:events:530:35) {"user":"    at IncomingMessage.emit (node:events:530:35)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.emit (node:events:530:35)"}}
[info] >      at endReadableNT (node:internal/streams/readable:1698:12) {"user":"    at endReadableNT (node:internal/streams/readable:1698:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at endReadableNT (node:internal/streams/readable:1698:12)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:90:21) { {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {"}}
[info] >    type: 'StripeInvalidRequestError', {"user":"  type: 'StripeInvalidRequestError',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'StripeInvalidRequestError',"}}
[info] >    raw: { {"user":"  raw: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   raw: {"}}
[info] >      code: 'parameter_invalid_integer', {"user":"    code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 'parameter_invalid_integer',"}}
[info] >      doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >      message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents', {"user":"    message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents',"}}
[info] >      param: 'amount', {"user":"    param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     param: 'amount',"}}
[info] >      request_log_url: 'https://dashboard.stripe.com/test/logs/req_aAQ99GZ8J4HGwP?t=1745844834', {"user":"    request_log_url: 'https://dashboard.stripe.com/test/logs/req_aAQ99GZ8J4HGwP?t=1745844834',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     request_log_url: 'https://dashboard.stripe.com/test/logs/req_aAQ99GZ8J4HGwP?t=1745844834',"}}
[info] >      type: 'invalid_request_error', {"user":"    type: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     type: 'invalid_request_error',"}}
[info] >      headers: { {"user":"    headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     headers: {"}}
[info] >        server: 'nginx', {"user":"      server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       server: 'nginx',"}}
[info] >        date: 'Mon, 28 Apr 2025 12:53:55 GMT', {"user":"      date: 'Mon, 28 Apr 2025 12:53:55 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       date: 'Mon, 28 Apr 2025 12:53:55 GMT',"}}
[info] >        'content-type': 'application/json', {"user":"      'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-type': 'application/json',"}}
[info] >        'content-length': '663', {"user":"      'content-length': '663',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-length': '663',"}}
[info] >        connection: 'keep-alive', {"user":"      connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       connection: 'keep-alive',"}}
[info] >        'access-control-allow-credentials': 'true', {"user":"      'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-credentials': 'true',"}}
[info] >        'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE', {"user":"      'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',"}}
[info] >        'access-control-allow-origin': '*', {"user":"      'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-origin': '*',"}}
[info] >        'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >        'access-control-max-age': '300', {"user":"      'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-max-age': '300',"}}
[info] >        'cache-control': 'no-cache, no-store', {"user":"      'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cache-control': 'no-cache, no-store',"}}
[info] >        'content-security-policy': "base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=UFNcVg14S4H0A5Z1GG3mwBiEL9bvsTi1r5tsHJipz8RgU-EZCEylhvr21BTp0clmGK-ljI75df8A-3XZ", {"user":"      'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=UFNcVg14S4H0A5Z1GG3mwBiEL9bvsTi1r5tsHJipz8RgU-EZCEylhvr21BTp0clmGK-ljI75df8A-3XZ\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=UFNcVg14S4H0A5Z1GG3mwBiEL9bvsTi1r5tsHJipz8RgU-EZCEylhvr21BTp0clmGK-ljI75df8A-3XZ\","}}
[info] >        'idempotency-key': '574845de-892f-43fe-a5d9-23adf7fdae47', {"user":"      'idempotency-key': '574845de-892f-43fe-a5d9-23adf7fdae47',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'idempotency-key': '574845de-892f-43fe-a5d9-23adf7fdae47',"}}
[info] >        'original-request': 'req_aAQ99GZ8J4HGwP', {"user":"      'original-request': 'req_aAQ99GZ8J4HGwP',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'original-request': 'req_aAQ99GZ8J4HGwP',"}}
[info] >        'request-id': 'req_aAQ99GZ8J4HGwP', {"user":"      'request-id': 'req_aAQ99GZ8J4HGwP',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'request-id': 'req_aAQ99GZ8J4HGwP',"}}
[info] >        'stripe-version': '2025-02-24.acacia', {"user":"      'stripe-version': '2025-02-24.acacia',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'stripe-version': '2025-02-24.acacia',"}}
[info] >        vary: 'Origin', {"user":"      vary: 'Origin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       vary: 'Origin',"}}
[info] >        'x-stripe-priority-routing-enabled': 'true', {"user":"      'x-stripe-priority-routing-enabled': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-priority-routing-enabled': 'true',"}}
[info] >        'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"      'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >        'x-wc': 'ABGHI', {"user":"      'x-wc': 'ABGHI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-wc': 'ABGHI',"}}
[info] >        'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      statusCode: 400, {"user":"    statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     statusCode: 400,"}}
[info] >      requestId: 'req_aAQ99GZ8J4HGwP' {"user":"    requestId: 'req_aAQ99GZ8J4HGwP'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     requestId: 'req_aAQ99GZ8J4HGwP'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    rawType: 'invalid_request_error', {"user":"  rawType: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   rawType: 'invalid_request_error',"}}
[info] >    code: 'parameter_invalid_integer', {"user":"  code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'parameter_invalid_integer',"}}
[info] >    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"  doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >    param: 'amount', {"user":"  param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   param: 'amount',"}}
[info] >    detail: undefined, {"user":"  detail: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   detail: undefined,"}}
[info] >    headers: { {"user":"  headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   headers: {"}}
[info] >      server: 'nginx', {"user":"    server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     server: 'nginx',"}}
[info] >      date: 'Mon, 28 Apr 2025 12:53:55 GMT', {"user":"    date: 'Mon, 28 Apr 2025 12:53:55 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     date: 'Mon, 28 Apr 2025 12:53:55 GMT',"}}
[info] >      'content-type': 'application/json', {"user":"    'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-type': 'application/json',"}}
[info] >      'content-length': '663', {"user":"    'content-length': '663',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-length': '663',"}}
[info] >      connection: 'keep-alive', {"user":"    connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     connection: 'keep-alive',"}}
[info] >      'access-control-allow-credentials': 'true', {"user":"    'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-credentials': 'true',"}}
[info] >      'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE', {"user":"    'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',"}}
[info] >      'access-control-allow-origin': '*', {"user":"    'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-origin': '*',"}}
[info] >      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"    'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >      'access-control-max-age': '300', {"user":"    'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-max-age': '300',"}}
[info] >      'cache-control': 'no-cache, no-store', {"user":"    'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'cache-control': 'no-cache, no-store',"}}
[info] >      'content-security-policy': "base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=UFNcVg14S4H0A5Z1GG3mwBiEL9bvsTi1r5tsHJipz8RgU-EZCEylhvr21BTp0clmGK-ljI75df8A-3XZ", {"user":"    'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=UFNcVg14S4H0A5Z1GG3mwBiEL9bvsTi1r5tsHJipz8RgU-EZCEylhvr21BTp0clmGK-ljI75df8A-3XZ\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=UFNcVg14S4H0A5Z1GG3mwBiEL9bvsTi1r5tsHJipz8RgU-EZCEylhvr21BTp0clmGK-ljI75df8A-3XZ\","}}
[info] >      'idempotency-key': '574845de-892f-43fe-a5d9-23adf7fdae47', {"user":"    'idempotency-key': '574845de-892f-43fe-a5d9-23adf7fdae47',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'idempotency-key': '574845de-892f-43fe-a5d9-23adf7fdae47',"}}
[info] >      'original-request': 'req_aAQ99GZ8J4HGwP', {"user":"    'original-request': 'req_aAQ99GZ8J4HGwP',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'original-request': 'req_aAQ99GZ8J4HGwP',"}}
[info] >      'request-id': 'req_aAQ99GZ8J4HGwP', {"user":"    'request-id': 'req_aAQ99GZ8J4HGwP',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'request-id': 'req_aAQ99GZ8J4HGwP',"}}
[info] >      'stripe-version': '2025-02-24.acacia', {"user":"    'stripe-version': '2025-02-24.acacia',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'stripe-version': '2025-02-24.acacia',"}}
[info] >      vary: 'Origin', {"user":"    vary: 'Origin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     vary: 'Origin',"}}
[info] >      'x-stripe-priority-routing-enabled': 'true', {"user":"    'x-stripe-priority-routing-enabled': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-priority-routing-enabled': 'true',"}}
[info] >      'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"    'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >      'x-wc': 'ABGHI', {"user":"    'x-wc': 'ABGHI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-wc': 'ABGHI',"}}
[info] >      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"    'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    requestId: 'req_aAQ99GZ8J4HGwP', {"user":"  requestId: 'req_aAQ99GZ8J4HGwP',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   requestId: 'req_aAQ99GZ8J4HGwP',"}}
[info] >    statusCode: 400, {"user":"  statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statusCode: 400,"}}
[info] >    charge: undefined, {"user":"  charge: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   charge: undefined,"}}
[info] >    decline_code: undefined, {"user":"  decline_code: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   decline_code: undefined,"}}
[info] >    payment_intent: undefined, {"user":"  payment_intent: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_intent: undefined,"}}
[info] >    payment_method: undefined, {"user":"  payment_method: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method: undefined,"}}
[info] >    setup_intent: undefined, {"user":"  setup_intent: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   setup_intent: undefined,"}}
[info] >    source: undefined {"user":"  source: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   source: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v22.11.0 {"user":"Node.js v22.11.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v22.11.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2025-04-28T12:53:55.080Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T12:53:55.080Z] [worker-us-central1-api-62bb9847-5988-435b-8cd2-fce19c73ca98]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-62bb9847-5988-435b-8cd2-fce19c73ca98]: exited"}}
[debug] [2025-04-28T12:53:55.080Z] [worker-us-central1-api-62bb9847-5988-435b-8cd2-fce19c73ca98]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-62bb9847-5988-435b-8cd2-fce19c73ca98]: FINISHED"}}
[debug] [2025-04-28T12:54:21.543Z] [work-queue] {"queuedWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T12:54:21.543Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T12:54:21.543Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T12:54:21.543Z"],"workRunningCount":1}
[debug] [2025-04-28T12:54:21.543Z] Accepted request POST /clone-f330b/us-central1/api/payments/create?total=39998 --> us-central1-api
[debug] [2025-04-28T12:54:21.546Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-04-28T12:54:21.546Z] [functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=39998, mapping to path=/payments/create?total=39998 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=39998, mapping to path=/payments/create?total=39998"}}
[debug] [2025-04-28T12:54:21.546Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2025-04-28T12:54:21.548Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2025-04-28T12:54:21.548Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[info] >  (node:61692) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead. {"user":"(node:61692) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m (node:61692) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead."}}
[info] >  (Use `node --trace-deprecation ...` to show where the warning was created) {"user":"(Use `node --trace-deprecation ...` to show where the warning was created)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m (Use `node --trace-deprecation ...` to show where the warning was created)"}}
[debug] [2025-04-28T12:54:22.171Z] [runtime-status] [61692] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.13.0","resolution":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [61692] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"8.13.0\",\"resolution\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-04-28T12:54:22.172Z] [runtime-status] [61692] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.11.0","resolution":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-functions/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [61692] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.11.0\",\"resolution\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-functions/lib/index.js\"}"}}
[warn] ⚠  The Cloud Functions emulator requires the module "firebase-functions" to be version >3.13.1 so your version is too old. You can probably fix this by running "npm install firebase-functions@latest" in your functions directory. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"The Cloud Functions emulator requires the module \"firebase-functions\" to be version >3.13.1 so your version is too old. You can probably fix this by running \"npm install firebase-functions@latest\" in your functions directory."}}
[info] i  functions: Your functions could not be parsed due to an issue with your node_modules (see above) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Your functions could not be parsed due to an issue with your node_modules (see above)"}}
[debug] [2025-04-28T12:54:22.256Z] [runtime-status] [61692] Functions runtime initialized. {"cwd":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions","node_version":"22.11.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [61692] Functions runtime initialized. {\"cwd\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions\",\"node_version\":\"22.11.0\"}"}}
[debug] [2025-04-28T12:54:22.256Z] [runtime-status] [61692] Listening to port: /var/folders/b8/2ktxw5yj1xz8mylspf3xppwr0000gn/T/fire_emu_0517dbf4576557eb.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [61692] Listening to port: /var/folders/b8/2ktxw5yj1xz8mylspf3xppwr0000gn/T/fire_emu_0517dbf4576557eb.sock"}}
[debug] [2025-04-28T12:54:22.260Z] [worker-us-central1-api-60cad797-01e5-4d09-8da3-0ccb815af16c]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-60cad797-01e5-4d09-8da3-0ccb815af16c]: IDLE"}}
[debug] [2025-04-28T12:54:22.261Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-04-28T12:54:22.261Z] [worker-us-central1-api-60cad797-01e5-4d09-8da3-0ccb815af16c]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-60cad797-01e5-4d09-8da3-0ccb815af16c]: BUSY"}}
[info] >  Payment Request Recieved BOOM!!! for this amount >>>  39998 {"user":"Payment Request Recieved BOOM!!! for this amount >>>  39998","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment Request Recieved BOOM!!! for this amount >>>  39998"}}
[info] >  paymentRECEIVED >>>  { {"user":"paymentRECEIVED >>>  {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m paymentRECEIVED >>>  {"}}
[info] >    id: 'pi_3RIrCUJlvCjqT1Et0qnTluhG', {"user":"  id: 'pi_3RIrCUJlvCjqT1Et0qnTluhG',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   id: 'pi_3RIrCUJlvCjqT1Et0qnTluhG',"}}
[info] >    object: 'payment_intent', {"user":"  object: 'payment_intent',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   object: 'payment_intent',"}}
[info] >    amount: 39998, {"user":"  amount: 39998,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   amount: 39998,"}}
[info] >    amount_capturable: 0, {"user":"  amount_capturable: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   amount_capturable: 0,"}}
[info] >    amount_details: { tip: {} }, {"user":"  amount_details: { tip: {} },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   amount_details: { tip: {} },"}}
[info] >    amount_received: 0, {"user":"  amount_received: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   amount_received: 0,"}}
[info] >    application: null, {"user":"  application: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   application: null,"}}
[info] >    application_fee_amount: null, {"user":"  application_fee_amount: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   application_fee_amount: null,"}}
[info] >    automatic_payment_methods: { allow_redirects: 'always', enabled: true }, {"user":"  automatic_payment_methods: { allow_redirects: 'always', enabled: true },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   automatic_payment_methods: { allow_redirects: 'always', enabled: true },"}}
[info] >    canceled_at: null, {"user":"  canceled_at: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   canceled_at: null,"}}
[info] >    cancellation_reason: null, {"user":"  cancellation_reason: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   cancellation_reason: null,"}}
[info] >    capture_method: 'automatic_async', {"user":"  capture_method: 'automatic_async',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   capture_method: 'automatic_async',"}}
[info] >    client_secret: 'pi_3RIrCUJlvCjqT1Et0qnTluhG_secret_F6QZpquYerPTLwah3t4tlqU7S', {"user":"  client_secret: 'pi_3RIrCUJlvCjqT1Et0qnTluhG_secret_F6QZpquYerPTLwah3t4tlqU7S',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   client_secret: 'pi_3RIrCUJlvCjqT1Et0qnTluhG_secret_F6QZpquYerPTLwah3t4tlqU7S',"}}
[info] >    confirmation_method: 'automatic', {"user":"  confirmation_method: 'automatic',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   confirmation_method: 'automatic',"}}
[info] >    created: 1745844862, {"user":"  created: 1745844862,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   created: 1745844862,"}}
[info] >    currency: 'usd', {"user":"  currency: 'usd',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   currency: 'usd',"}}
[info] >    customer: null, {"user":"  customer: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   customer: null,"}}
[info] >    description: null, {"user":"  description: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   description: null,"}}
[info] >    invoice: null, {"user":"  invoice: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   invoice: null,"}}
[info] >    last_payment_error: null, {"user":"  last_payment_error: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   last_payment_error: null,"}}
[info] >    latest_charge: null, {"user":"  latest_charge: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   latest_charge: null,"}}
[info] >    livemode: false, {"user":"  livemode: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   livemode: false,"}}
[info] >    metadata: {}, {"user":"  metadata: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   metadata: {},"}}
[info] >    next_action: null, {"user":"  next_action: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   next_action: null,"}}
[info] >    on_behalf_of: null, {"user":"  on_behalf_of: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   on_behalf_of: null,"}}
[info] >    payment_method: null, {"user":"  payment_method: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method: null,"}}
[info] >    payment_method_configuration_details: { id: 'pmc_1R1R5nJlvCjqT1EtYHXN7Kcf', parent: null }, {"user":"  payment_method_configuration_details: { id: 'pmc_1R1R5nJlvCjqT1EtYHXN7Kcf', parent: null },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method_configuration_details: { id: 'pmc_1R1R5nJlvCjqT1EtYHXN7Kcf', parent: null },"}}
[info] >    payment_method_options: { {"user":"  payment_method_options: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method_options: {"}}
[info] >      affirm: {}, {"user":"    affirm: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     affirm: {},"}}
[info] >      amazon_pay: { express_checkout_element_session_id: null }, {"user":"    amazon_pay: { express_checkout_element_session_id: null },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     amazon_pay: { express_checkout_element_session_id: null },"}}
[info] >      card: { {"user":"    card: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     card: {"}}
[info] >        installments: null, {"user":"      installments: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       installments: null,"}}
[info] >        mandate_options: null, {"user":"      mandate_options: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       mandate_options: null,"}}
[info] >        network: null, {"user":"      network: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       network: null,"}}
[info] >        request_three_d_secure: 'automatic' {"user":"      request_three_d_secure: 'automatic'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       request_three_d_secure: 'automatic'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      cashapp: {}, {"user":"    cashapp: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     cashapp: {},"}}
[info] >      klarna: { preferred_locale: null }, {"user":"    klarna: { preferred_locale: null },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     klarna: { preferred_locale: null },"}}
[info] >      link: { persistent_token: null } {"user":"    link: { persistent_token: null }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     link: { persistent_token: null }"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    payment_method_types: [ 'card', 'klarna', 'link', 'affirm', 'cashapp', 'amazon_pay' ], {"user":"  payment_method_types: [ 'card', 'klarna', 'link', 'affirm', 'cashapp', 'amazon_pay' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method_types: [ 'card', 'klarna', 'link', 'affirm', 'cashapp', 'amazon_pay' ],"}}
[info] >    processing: null, {"user":"  processing: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   processing: null,"}}
[info] >    receipt_email: null, {"user":"  receipt_email: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   receipt_email: null,"}}
[info] >    review: null, {"user":"  review: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   review: null,"}}
[info] >    setup_future_usage: null, {"user":"  setup_future_usage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   setup_future_usage: null,"}}
[info] >    shipping: null, {"user":"  shipping: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   shipping: null,"}}
[info] >    source: null, {"user":"  source: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   source: null,"}}
[info] >    statement_descriptor: null, {"user":"  statement_descriptor: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statement_descriptor: null,"}}
[info] >    statement_descriptor_suffix: null, {"user":"  statement_descriptor_suffix: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statement_descriptor_suffix: null,"}}
[info] >    status: 'requires_payment_method', {"user":"  status: 'requires_payment_method',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   status: 'requires_payment_method',"}}
[info] >    transfer_data: null, {"user":"  transfer_data: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   transfer_data: null,"}}
[info] >    transfer_group: null {"user":"  transfer_group: null","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   transfer_group: null"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2025-04-28T12:54:22.953Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 692.49925ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 692.49925ms"}}
[debug] [2025-04-28T12:54:22.953Z] [worker-us-central1-api-60cad797-01e5-4d09-8da3-0ccb815af16c]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-60cad797-01e5-4d09-8da3-0ccb815af16c]: IDLE"}}
[debug] [2025-04-28T12:54:22.953Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-04-28T12:54:22.953Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-04-28T12:54:22.953Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T12:54:35.751Z] [work-queue] {"queuedWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T12:54:35.751Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T12:54:35.752Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T12:54:35.751Z"],"workRunningCount":1}
[debug] [2025-04-28T12:54:35.752Z] Accepted request POST /clone-f330b/us-central1/api/payments/create?total=39998 --> us-central1-api
[debug] [2025-04-28T12:54:35.757Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-04-28T12:54:35.757Z] [functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=39998, mapping to path=/payments/create?total=39998 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=39998, mapping to path=/payments/create?total=39998"}}
[debug] [2025-04-28T12:54:35.758Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-04-28T12:54:35.758Z] [worker-us-central1-api-60cad797-01e5-4d09-8da3-0ccb815af16c]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-60cad797-01e5-4d09-8da3-0ccb815af16c]: BUSY"}}
[info] >  Payment Request Recieved BOOM!!! for this amount >>>  39998 {"user":"Payment Request Recieved BOOM!!! for this amount >>>  39998","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment Request Recieved BOOM!!! for this amount >>>  39998"}}
[info] >  paymentRECEIVED >>>  { {"user":"paymentRECEIVED >>>  {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m paymentRECEIVED >>>  {"}}
[info] >    id: 'pi_3RIrCiJlvCjqT1Et0OpefuJ5', {"user":"  id: 'pi_3RIrCiJlvCjqT1Et0OpefuJ5',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   id: 'pi_3RIrCiJlvCjqT1Et0OpefuJ5',"}}
[info] >    object: 'payment_intent', {"user":"  object: 'payment_intent',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   object: 'payment_intent',"}}
[info] >    amount: 39998, {"user":"  amount: 39998,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   amount: 39998,"}}
[info] >    amount_capturable: 0, {"user":"  amount_capturable: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   amount_capturable: 0,"}}
[info] >    amount_details: { tip: {} }, {"user":"  amount_details: { tip: {} },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   amount_details: { tip: {} },"}}
[info] >    amount_received: 0, {"user":"  amount_received: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   amount_received: 0,"}}
[info] >    application: null, {"user":"  application: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   application: null,"}}
[info] >    application_fee_amount: null, {"user":"  application_fee_amount: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   application_fee_amount: null,"}}
[info] >    automatic_payment_methods: { allow_redirects: 'always', enabled: true }, {"user":"  automatic_payment_methods: { allow_redirects: 'always', enabled: true },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   automatic_payment_methods: { allow_redirects: 'always', enabled: true },"}}
[info] >    canceled_at: null, {"user":"  canceled_at: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   canceled_at: null,"}}
[info] >    cancellation_reason: null, {"user":"  cancellation_reason: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   cancellation_reason: null,"}}
[info] >    capture_method: 'automatic_async', {"user":"  capture_method: 'automatic_async',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   capture_method: 'automatic_async',"}}
[info] >    client_secret: 'pi_3RIrCiJlvCjqT1Et0OpefuJ5_secret_6yNZ9vwQYE4Kug5ICIxh7Ziv3', {"user":"  client_secret: 'pi_3RIrCiJlvCjqT1Et0OpefuJ5_secret_6yNZ9vwQYE4Kug5ICIxh7Ziv3',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   client_secret: 'pi_3RIrCiJlvCjqT1Et0OpefuJ5_secret_6yNZ9vwQYE4Kug5ICIxh7Ziv3',"}}
[info] >    confirmation_method: 'automatic', {"user":"  confirmation_method: 'automatic',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   confirmation_method: 'automatic',"}}
[info] >    created: 1745844876, {"user":"  created: 1745844876,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   created: 1745844876,"}}
[info] >    currency: 'usd', {"user":"  currency: 'usd',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   currency: 'usd',"}}
[info] >    customer: null, {"user":"  customer: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   customer: null,"}}
[info] >    description: null, {"user":"  description: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   description: null,"}}
[info] >    invoice: null, {"user":"  invoice: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   invoice: null,"}}
[info] >    last_payment_error: null, {"user":"  last_payment_error: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   last_payment_error: null,"}}
[info] >    latest_charge: null, {"user":"  latest_charge: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   latest_charge: null,"}}
[info] >    livemode: false, {"user":"  livemode: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   livemode: false,"}}
[info] >    metadata: {}, {"user":"  metadata: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   metadata: {},"}}
[info] >    next_action: null, {"user":"  next_action: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   next_action: null,"}}
[info] >    on_behalf_of: null, {"user":"  on_behalf_of: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   on_behalf_of: null,"}}
[info] >    payment_method: null, {"user":"  payment_method: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method: null,"}}
[info] >    payment_method_configuration_details: { id: 'pmc_1R1R5nJlvCjqT1EtYHXN7Kcf', parent: null }, {"user":"  payment_method_configuration_details: { id: 'pmc_1R1R5nJlvCjqT1EtYHXN7Kcf', parent: null },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method_configuration_details: { id: 'pmc_1R1R5nJlvCjqT1EtYHXN7Kcf', parent: null },"}}
[info] >    payment_method_options: { {"user":"  payment_method_options: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method_options: {"}}
[info] >      affirm: {}, {"user":"    affirm: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     affirm: {},"}}
[info] >      amazon_pay: { express_checkout_element_session_id: null }, {"user":"    amazon_pay: { express_checkout_element_session_id: null },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     amazon_pay: { express_checkout_element_session_id: null },"}}
[info] >      card: { {"user":"    card: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     card: {"}}
[info] >        installments: null, {"user":"      installments: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       installments: null,"}}
[info] >        mandate_options: null, {"user":"      mandate_options: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       mandate_options: null,"}}
[info] >        network: null, {"user":"      network: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       network: null,"}}
[info] >        request_three_d_secure: 'automatic' {"user":"      request_three_d_secure: 'automatic'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       request_three_d_secure: 'automatic'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      cashapp: {}, {"user":"    cashapp: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     cashapp: {},"}}
[info] >      klarna: { preferred_locale: null }, {"user":"    klarna: { preferred_locale: null },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     klarna: { preferred_locale: null },"}}
[info] >      link: { persistent_token: null } {"user":"    link: { persistent_token: null }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     link: { persistent_token: null }"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    payment_method_types: [ 'card', 'klarna', 'link', 'affirm', 'cashapp', 'amazon_pay' ], {"user":"  payment_method_types: [ 'card', 'klarna', 'link', 'affirm', 'cashapp', 'amazon_pay' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method_types: [ 'card', 'klarna', 'link', 'affirm', 'cashapp', 'amazon_pay' ],"}}
[info] >    processing: null, {"user":"  processing: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   processing: null,"}}
[info] >    receipt_email: null, {"user":"  receipt_email: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   receipt_email: null,"}}
[info] >    review: null, {"user":"  review: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   review: null,"}}
[info] >    setup_future_usage: null, {"user":"  setup_future_usage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   setup_future_usage: null,"}}
[info] >    shipping: null, {"user":"  shipping: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   shipping: null,"}}
[info] >    source: null, {"user":"  source: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   source: null,"}}
[info] >    statement_descriptor: null, {"user":"  statement_descriptor: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statement_descriptor: null,"}}
[info] >    statement_descriptor_suffix: null, {"user":"  statement_descriptor_suffix: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statement_descriptor_suffix: null,"}}
[info] >    status: 'requires_payment_method', {"user":"  status: 'requires_payment_method',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   status: 'requires_payment_method',"}}
[info] >    transfer_data: null, {"user":"  transfer_data: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   transfer_data: null,"}}
[info] >    transfer_group: null {"user":"  transfer_group: null","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   transfer_group: null"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2025-04-28T12:54:36.238Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 480.844209ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 480.844209ms"}}
[debug] [2025-04-28T12:54:36.239Z] [worker-us-central1-api-60cad797-01e5-4d09-8da3-0ccb815af16c]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-60cad797-01e5-4d09-8da3-0ccb815af16c]: IDLE"}}
[debug] [2025-04-28T12:54:36.239Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-04-28T12:54:36.239Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-04-28T12:54:36.239Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T12:54:53.527Z] [work-queue] {"queuedWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T12:54:53.527Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T12:54:53.527Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T12:54:53.527Z"],"workRunningCount":1}
[debug] [2025-04-28T12:54:53.527Z] Accepted request POST /clone-f330b/us-central1/api/payments/create?total=0 --> us-central1-api
[debug] [2025-04-28T12:54:53.529Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-04-28T12:54:53.529Z] [functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0"}}
[debug] [2025-04-28T12:54:53.529Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-04-28T12:54:53.529Z] [worker-us-central1-api-60cad797-01e5-4d09-8da3-0ccb815af16c]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-60cad797-01e5-4d09-8da3-0ccb815af16c]: BUSY"}}
[info] >  Payment Request Recieved BOOM!!! for this amount >>>  0 {"user":"Payment Request Recieved BOOM!!! for this amount >>>  0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment Request Recieved BOOM!!! for this amount >>>  0"}}
[info] >  /Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39 {"user":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m /Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39"}}
[info] >          return new StripeInvalidRequestError(rawStripeError); {"user":"        return new StripeInvalidRequestError(rawStripeError);","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         return new StripeInvalidRequestError(rawStripeError);"}}
[info] >                 ^ {"user":"               ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents {"user":"StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents"}}
[info] >      at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16) {"user":"    at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16)"}}
[info] >      at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33) {"user":"    at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33)"}}
[info] >      at Object.onceWrapper (node:events:632:28) {"user":"    at Object.onceWrapper (node:events:632:28)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Object.onceWrapper (node:events:632:28)"}}
[info] >      at IncomingMessage.emit (node:events:530:35) {"user":"    at IncomingMessage.emit (node:events:530:35)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.emit (node:events:530:35)"}}
[info] >      at endReadableNT (node:internal/streams/readable:1698:12) {"user":"    at endReadableNT (node:internal/streams/readable:1698:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at endReadableNT (node:internal/streams/readable:1698:12)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:90:21) { {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {"}}
[info] >    type: 'StripeInvalidRequestError', {"user":"  type: 'StripeInvalidRequestError',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'StripeInvalidRequestError',"}}
[info] >    raw: { {"user":"  raw: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   raw: {"}}
[info] >      code: 'parameter_invalid_integer', {"user":"    code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 'parameter_invalid_integer',"}}
[info] >      doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >      message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents', {"user":"    message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents',"}}
[info] >      param: 'amount', {"user":"    param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     param: 'amount',"}}
[info] >      request_log_url: 'https://dashboard.stripe.com/test/logs/req_EhDGslJpzch7cF?t=1745844893', {"user":"    request_log_url: 'https://dashboard.stripe.com/test/logs/req_EhDGslJpzch7cF?t=1745844893',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     request_log_url: 'https://dashboard.stripe.com/test/logs/req_EhDGslJpzch7cF?t=1745844893',"}}
[info] >      type: 'invalid_request_error', {"user":"    type: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     type: 'invalid_request_error',"}}
[info] >      headers: { {"user":"    headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     headers: {"}}
[info] >        server: 'nginx', {"user":"      server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       server: 'nginx',"}}
[info] >        date: 'Mon, 28 Apr 2025 12:54:53 GMT', {"user":"      date: 'Mon, 28 Apr 2025 12:54:53 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       date: 'Mon, 28 Apr 2025 12:54:53 GMT',"}}
[info] >        'content-type': 'application/json', {"user":"      'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-type': 'application/json',"}}
[info] >        'content-length': '663', {"user":"      'content-length': '663',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-length': '663',"}}
[info] >        connection: 'keep-alive', {"user":"      connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       connection: 'keep-alive',"}}
[info] >        'access-control-allow-credentials': 'true', {"user":"      'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-credentials': 'true',"}}
[info] >        'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE', {"user":"      'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',"}}
[info] >        'access-control-allow-origin': '*', {"user":"      'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-origin': '*',"}}
[info] >        'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >        'access-control-max-age': '300', {"user":"      'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-max-age': '300',"}}
[info] >        'cache-control': 'no-cache, no-store', {"user":"      'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cache-control': 'no-cache, no-store',"}}
[info] >        'content-security-policy': "base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=eyPXjZAs45V1jo6w2He8d9Oj23vMwBVNG2aXAGCGinSuQpJeEAYvIkZ6bdrWJGBp3siVQudswrPZNq1O", {"user":"      'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=eyPXjZAs45V1jo6w2He8d9Oj23vMwBVNG2aXAGCGinSuQpJeEAYvIkZ6bdrWJGBp3siVQudswrPZNq1O\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=eyPXjZAs45V1jo6w2He8d9Oj23vMwBVNG2aXAGCGinSuQpJeEAYvIkZ6bdrWJGBp3siVQudswrPZNq1O\","}}
[info] >        'idempotency-key': 'af514505-69c2-46dc-b820-b4375af7a684', {"user":"      'idempotency-key': 'af514505-69c2-46dc-b820-b4375af7a684',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'idempotency-key': 'af514505-69c2-46dc-b820-b4375af7a684',"}}
[info] >        'original-request': 'req_EhDGslJpzch7cF', {"user":"      'original-request': 'req_EhDGslJpzch7cF',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'original-request': 'req_EhDGslJpzch7cF',"}}
[info] >        'request-id': 'req_EhDGslJpzch7cF', {"user":"      'request-id': 'req_EhDGslJpzch7cF',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'request-id': 'req_EhDGslJpzch7cF',"}}
[info] >        'stripe-version': '2025-02-24.acacia', {"user":"      'stripe-version': '2025-02-24.acacia',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'stripe-version': '2025-02-24.acacia',"}}
[info] >        vary: 'Origin', {"user":"      vary: 'Origin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       vary: 'Origin',"}}
[info] >        'x-stripe-priority-routing-enabled': 'true', {"user":"      'x-stripe-priority-routing-enabled': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-priority-routing-enabled': 'true',"}}
[info] >        'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"      'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >        'x-wc': 'ABGHI', {"user":"      'x-wc': 'ABGHI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-wc': 'ABGHI',"}}
[info] >        'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      statusCode: 400, {"user":"    statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     statusCode: 400,"}}
[info] >      requestId: 'req_EhDGslJpzch7cF' {"user":"    requestId: 'req_EhDGslJpzch7cF'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     requestId: 'req_EhDGslJpzch7cF'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    rawType: 'invalid_request_error', {"user":"  rawType: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   rawType: 'invalid_request_error',"}}
[info] >    code: 'parameter_invalid_integer', {"user":"  code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'parameter_invalid_integer',"}}
[info] >    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"  doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >    param: 'amount', {"user":"  param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   param: 'amount',"}}
[info] >    detail: undefined, {"user":"  detail: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   detail: undefined,"}}
[info] >    headers: { {"user":"  headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   headers: {"}}
[info] >      server: 'nginx', {"user":"    server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     server: 'nginx',"}}
[info] >      date: 'Mon, 28 Apr 2025 12:54:53 GMT', {"user":"    date: 'Mon, 28 Apr 2025 12:54:53 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     date: 'Mon, 28 Apr 2025 12:54:53 GMT',"}}
[info] >      'content-type': 'application/json', {"user":"    'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-type': 'application/json',"}}
[info] >      'content-length': '663', {"user":"    'content-length': '663',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-length': '663',"}}
[info] >      connection: 'keep-alive', {"user":"    connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     connection: 'keep-alive',"}}
[info] >      'access-control-allow-credentials': 'true', {"user":"    'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-credentials': 'true',"}}
[info] >      'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE', {"user":"    'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',"}}
[info] >      'access-control-allow-origin': '*', {"user":"    'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-origin': '*',"}}
[info] >      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"    'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >      'access-control-max-age': '300', {"user":"    'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-max-age': '300',"}}
[info] >      'cache-control': 'no-cache, no-store', {"user":"    'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'cache-control': 'no-cache, no-store',"}}
[info] >      'content-security-policy': "base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=eyPXjZAs45V1jo6w2He8d9Oj23vMwBVNG2aXAGCGinSuQpJeEAYvIkZ6bdrWJGBp3siVQudswrPZNq1O", {"user":"    'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=eyPXjZAs45V1jo6w2He8d9Oj23vMwBVNG2aXAGCGinSuQpJeEAYvIkZ6bdrWJGBp3siVQudswrPZNq1O\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=eyPXjZAs45V1jo6w2He8d9Oj23vMwBVNG2aXAGCGinSuQpJeEAYvIkZ6bdrWJGBp3siVQudswrPZNq1O\","}}
[info] >      'idempotency-key': 'af514505-69c2-46dc-b820-b4375af7a684', {"user":"    'idempotency-key': 'af514505-69c2-46dc-b820-b4375af7a684',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'idempotency-key': 'af514505-69c2-46dc-b820-b4375af7a684',"}}
[info] >      'original-request': 'req_EhDGslJpzch7cF', {"user":"    'original-request': 'req_EhDGslJpzch7cF',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'original-request': 'req_EhDGslJpzch7cF',"}}
[info] >      'request-id': 'req_EhDGslJpzch7cF', {"user":"    'request-id': 'req_EhDGslJpzch7cF',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'request-id': 'req_EhDGslJpzch7cF',"}}
[info] >      'stripe-version': '2025-02-24.acacia', {"user":"    'stripe-version': '2025-02-24.acacia',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'stripe-version': '2025-02-24.acacia',"}}
[info] >      vary: 'Origin', {"user":"    vary: 'Origin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     vary: 'Origin',"}}
[info] >      'x-stripe-priority-routing-enabled': 'true', {"user":"    'x-stripe-priority-routing-enabled': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-priority-routing-enabled': 'true',"}}
[info] >      'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"    'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >      'x-wc': 'ABGHI', {"user":"    'x-wc': 'ABGHI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-wc': 'ABGHI',"}}
[info] >      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"    'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    requestId: 'req_EhDGslJpzch7cF', {"user":"  requestId: 'req_EhDGslJpzch7cF',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   requestId: 'req_EhDGslJpzch7cF',"}}
[info] >    statusCode: 400, {"user":"  statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statusCode: 400,"}}
[info] >    charge: undefined, {"user":"  charge: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   charge: undefined,"}}
[info] >    decline_code: undefined, {"user":"  decline_code: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   decline_code: undefined,"}}
[info] >    payment_intent: undefined, {"user":"  payment_intent: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_intent: undefined,"}}
[info] >    payment_method: undefined, {"user":"  payment_method: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method: undefined,"}}
[info] >    setup_intent: undefined, {"user":"  setup_intent: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   setup_intent: undefined,"}}
[info] >    source: undefined {"user":"  source: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   source: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v22.11.0 {"user":"Node.js v22.11.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v22.11.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2025-04-28T12:54:53.890Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T12:54:53.891Z] [worker-us-central1-api-60cad797-01e5-4d09-8da3-0ccb815af16c]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-60cad797-01e5-4d09-8da3-0ccb815af16c]: exited"}}
[debug] [2025-04-28T12:54:53.891Z] [worker-us-central1-api-60cad797-01e5-4d09-8da3-0ccb815af16c]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-60cad797-01e5-4d09-8da3-0ccb815af16c]: FINISHED"}}
[debug] [2025-04-28T13:01:56.468Z] [work-queue] {"queuedWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T13:01:56.467Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T13:01:56.468Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T13:01:56.467Z"],"workRunningCount":1}
[debug] [2025-04-28T13:01:56.468Z] Accepted request POST /clone-f330b/us-central1/api/payments/create?total=33799 --> us-central1-api
[debug] [2025-04-28T13:01:56.473Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-04-28T13:01:56.473Z] [functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=33799, mapping to path=/payments/create?total=33799 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=33799, mapping to path=/payments/create?total=33799"}}
[debug] [2025-04-28T13:01:56.473Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2025-04-28T13:01:56.476Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2025-04-28T13:01:56.476Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[info] >  (node:62726) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead. {"user":"(node:62726) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m (node:62726) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead."}}
[info] >  (Use `node --trace-deprecation ...` to show where the warning was created) {"user":"(Use `node --trace-deprecation ...` to show where the warning was created)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m (Use `node --trace-deprecation ...` to show where the warning was created)"}}
[debug] [2025-04-28T13:01:57.159Z] [runtime-status] [62726] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.13.0","resolution":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [62726] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"8.13.0\",\"resolution\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-04-28T13:01:57.159Z] [runtime-status] [62726] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.11.0","resolution":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-functions/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [62726] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.11.0\",\"resolution\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-functions/lib/index.js\"}"}}
[warn] ⚠  The Cloud Functions emulator requires the module "firebase-functions" to be version >3.13.1 so your version is too old. You can probably fix this by running "npm install firebase-functions@latest" in your functions directory. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"The Cloud Functions emulator requires the module \"firebase-functions\" to be version >3.13.1 so your version is too old. You can probably fix this by running \"npm install firebase-functions@latest\" in your functions directory."}}
[info] i  functions: Your functions could not be parsed due to an issue with your node_modules (see above) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Your functions could not be parsed due to an issue with your node_modules (see above)"}}
[debug] [2025-04-28T13:01:57.243Z] [runtime-status] [62726] Functions runtime initialized. {"cwd":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions","node_version":"22.11.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [62726] Functions runtime initialized. {\"cwd\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions\",\"node_version\":\"22.11.0\"}"}}
[debug] [2025-04-28T13:01:57.243Z] [runtime-status] [62726] Listening to port: /var/folders/b8/2ktxw5yj1xz8mylspf3xppwr0000gn/T/fire_emu_0b0c62244f19d6f7.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [62726] Listening to port: /var/folders/b8/2ktxw5yj1xz8mylspf3xppwr0000gn/T/fire_emu_0b0c62244f19d6f7.sock"}}
[debug] [2025-04-28T13:01:57.289Z] [worker-us-central1-api-5af97356-3432-4bfb-9b23-494b94a39a2f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-5af97356-3432-4bfb-9b23-494b94a39a2f]: IDLE"}}
[debug] [2025-04-28T13:01:57.289Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-04-28T13:01:57.289Z] [worker-us-central1-api-5af97356-3432-4bfb-9b23-494b94a39a2f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-5af97356-3432-4bfb-9b23-494b94a39a2f]: BUSY"}}
[info] >  Payment Request Recieved BOOM!!! for this amount >>>  33799 {"user":"Payment Request Recieved BOOM!!! for this amount >>>  33799","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment Request Recieved BOOM!!! for this amount >>>  33799"}}
[info] >  paymentRECEIVED >>>  { {"user":"paymentRECEIVED >>>  {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m paymentRECEIVED >>>  {"}}
[info] >    id: 'pi_3RIrJpJlvCjqT1Et0eDwioNA', {"user":"  id: 'pi_3RIrJpJlvCjqT1Et0eDwioNA',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   id: 'pi_3RIrJpJlvCjqT1Et0eDwioNA',"}}
[info] >    object: 'payment_intent', {"user":"  object: 'payment_intent',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   object: 'payment_intent',"}}
[info] >    amount: 33799, {"user":"  amount: 33799,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   amount: 33799,"}}
[info] >    amount_capturable: 0, {"user":"  amount_capturable: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   amount_capturable: 0,"}}
[info] >    amount_details: { tip: {} }, {"user":"  amount_details: { tip: {} },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   amount_details: { tip: {} },"}}
[info] >    amount_received: 0, {"user":"  amount_received: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   amount_received: 0,"}}
[info] >    application: null, {"user":"  application: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   application: null,"}}
[info] >    application_fee_amount: null, {"user":"  application_fee_amount: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   application_fee_amount: null,"}}
[info] >    automatic_payment_methods: { allow_redirects: 'always', enabled: true }, {"user":"  automatic_payment_methods: { allow_redirects: 'always', enabled: true },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   automatic_payment_methods: { allow_redirects: 'always', enabled: true },"}}
[info] >    canceled_at: null, {"user":"  canceled_at: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   canceled_at: null,"}}
[info] >    cancellation_reason: null, {"user":"  cancellation_reason: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   cancellation_reason: null,"}}
[info] >    capture_method: 'automatic_async', {"user":"  capture_method: 'automatic_async',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   capture_method: 'automatic_async',"}}
[info] >    client_secret: 'pi_3RIrJpJlvCjqT1Et0eDwioNA_secret_3u6TdvbnmZjN8nH8S8tnhsTpp', {"user":"  client_secret: 'pi_3RIrJpJlvCjqT1Et0eDwioNA_secret_3u6TdvbnmZjN8nH8S8tnhsTpp',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   client_secret: 'pi_3RIrJpJlvCjqT1Et0eDwioNA_secret_3u6TdvbnmZjN8nH8S8tnhsTpp',"}}
[info] >    confirmation_method: 'automatic', {"user":"  confirmation_method: 'automatic',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   confirmation_method: 'automatic',"}}
[info] >    created: 1745845317, {"user":"  created: 1745845317,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   created: 1745845317,"}}
[info] >    currency: 'usd', {"user":"  currency: 'usd',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   currency: 'usd',"}}
[info] >    customer: null, {"user":"  customer: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   customer: null,"}}
[info] >    description: null, {"user":"  description: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   description: null,"}}
[info] >    invoice: null, {"user":"  invoice: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   invoice: null,"}}
[info] >    last_payment_error: null, {"user":"  last_payment_error: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   last_payment_error: null,"}}
[info] >    latest_charge: null, {"user":"  latest_charge: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   latest_charge: null,"}}
[info] >    livemode: false, {"user":"  livemode: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   livemode: false,"}}
[info] >    metadata: {}, {"user":"  metadata: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   metadata: {},"}}
[info] >    next_action: null, {"user":"  next_action: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   next_action: null,"}}
[info] >    on_behalf_of: null, {"user":"  on_behalf_of: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   on_behalf_of: null,"}}
[info] >    payment_method: null, {"user":"  payment_method: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method: null,"}}
[info] >    payment_method_configuration_details: { id: 'pmc_1R1R5nJlvCjqT1EtYHXN7Kcf', parent: null }, {"user":"  payment_method_configuration_details: { id: 'pmc_1R1R5nJlvCjqT1EtYHXN7Kcf', parent: null },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method_configuration_details: { id: 'pmc_1R1R5nJlvCjqT1EtYHXN7Kcf', parent: null },"}}
[info] >    payment_method_options: { {"user":"  payment_method_options: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method_options: {"}}
[info] >      affirm: {}, {"user":"    affirm: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     affirm: {},"}}
[info] >      amazon_pay: { express_checkout_element_session_id: null }, {"user":"    amazon_pay: { express_checkout_element_session_id: null },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     amazon_pay: { express_checkout_element_session_id: null },"}}
[info] >      card: { {"user":"    card: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     card: {"}}
[info] >        installments: null, {"user":"      installments: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       installments: null,"}}
[info] >        mandate_options: null, {"user":"      mandate_options: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       mandate_options: null,"}}
[info] >        network: null, {"user":"      network: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       network: null,"}}
[info] >        request_three_d_secure: 'automatic' {"user":"      request_three_d_secure: 'automatic'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       request_three_d_secure: 'automatic'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      cashapp: {}, {"user":"    cashapp: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     cashapp: {},"}}
[info] >      klarna: { preferred_locale: null }, {"user":"    klarna: { preferred_locale: null },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     klarna: { preferred_locale: null },"}}
[info] >      link: { persistent_token: null } {"user":"    link: { persistent_token: null }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     link: { persistent_token: null }"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    payment_method_types: [ 'card', 'klarna', 'link', 'affirm', 'cashapp', 'amazon_pay' ], {"user":"  payment_method_types: [ 'card', 'klarna', 'link', 'affirm', 'cashapp', 'amazon_pay' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method_types: [ 'card', 'klarna', 'link', 'affirm', 'cashapp', 'amazon_pay' ],"}}
[info] >    processing: null, {"user":"  processing: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   processing: null,"}}
[info] >    receipt_email: null, {"user":"  receipt_email: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   receipt_email: null,"}}
[info] >    review: null, {"user":"  review: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   review: null,"}}
[info] >    setup_future_usage: null, {"user":"  setup_future_usage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   setup_future_usage: null,"}}
[info] >    shipping: null, {"user":"  shipping: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   shipping: null,"}}
[info] >    source: null, {"user":"  source: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   source: null,"}}
[info] >    statement_descriptor: null, {"user":"  statement_descriptor: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statement_descriptor: null,"}}
[info] >    statement_descriptor_suffix: null, {"user":"  statement_descriptor_suffix: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statement_descriptor_suffix: null,"}}
[info] >    status: 'requires_payment_method', {"user":"  status: 'requires_payment_method',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   status: 'requires_payment_method',"}}
[info] >    transfer_data: null, {"user":"  transfer_data: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   transfer_data: null,"}}
[info] >    transfer_group: null {"user":"  transfer_group: null","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   transfer_group: null"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2025-04-28T13:01:58.104Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 815.051291ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 815.051291ms"}}
[debug] [2025-04-28T13:01:58.104Z] [worker-us-central1-api-5af97356-3432-4bfb-9b23-494b94a39a2f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-5af97356-3432-4bfb-9b23-494b94a39a2f]: IDLE"}}
[debug] [2025-04-28T13:01:58.104Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-04-28T13:01:58.104Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-04-28T13:01:58.104Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T13:02:22.685Z] [work-queue] {"queuedWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T13:02:22.685Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T13:02:22.686Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T13:02:22.685Z"],"workRunningCount":1}
[debug] [2025-04-28T13:02:22.686Z] Accepted request POST /clone-f330b/us-central1/api/payments/create?total=33799 --> us-central1-api
[debug] [2025-04-28T13:02:22.688Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-04-28T13:02:22.688Z] [functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=33799, mapping to path=/payments/create?total=33799 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=33799, mapping to path=/payments/create?total=33799"}}
[debug] [2025-04-28T13:02:22.688Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-04-28T13:02:22.689Z] [worker-us-central1-api-5af97356-3432-4bfb-9b23-494b94a39a2f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-5af97356-3432-4bfb-9b23-494b94a39a2f]: BUSY"}}
[info] >  Payment Request Recieved BOOM!!! for this amount >>>  33799 {"user":"Payment Request Recieved BOOM!!! for this amount >>>  33799","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment Request Recieved BOOM!!! for this amount >>>  33799"}}
[info] >  paymentRECEIVED >>>  { {"user":"paymentRECEIVED >>>  {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m paymentRECEIVED >>>  {"}}
[info] >    id: 'pi_3RIrKEJlvCjqT1Et1XMh2wOc', {"user":"  id: 'pi_3RIrKEJlvCjqT1Et1XMh2wOc',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   id: 'pi_3RIrKEJlvCjqT1Et1XMh2wOc',"}}
[info] >    object: 'payment_intent', {"user":"  object: 'payment_intent',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   object: 'payment_intent',"}}
[info] >    amount: 33799, {"user":"  amount: 33799,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   amount: 33799,"}}
[info] >    amount_capturable: 0, {"user":"  amount_capturable: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   amount_capturable: 0,"}}
[info] >    amount_details: { tip: {} }, {"user":"  amount_details: { tip: {} },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   amount_details: { tip: {} },"}}
[info] >    amount_received: 0, {"user":"  amount_received: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   amount_received: 0,"}}
[info] >    application: null, {"user":"  application: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   application: null,"}}
[info] >    application_fee_amount: null, {"user":"  application_fee_amount: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   application_fee_amount: null,"}}
[info] >    automatic_payment_methods: { allow_redirects: 'always', enabled: true }, {"user":"  automatic_payment_methods: { allow_redirects: 'always', enabled: true },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   automatic_payment_methods: { allow_redirects: 'always', enabled: true },"}}
[info] >    canceled_at: null, {"user":"  canceled_at: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   canceled_at: null,"}}
[info] >    cancellation_reason: null, {"user":"  cancellation_reason: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   cancellation_reason: null,"}}
[info] >    capture_method: 'automatic_async', {"user":"  capture_method: 'automatic_async',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   capture_method: 'automatic_async',"}}
[info] >    client_secret: 'pi_3RIrKEJlvCjqT1Et1XMh2wOc_secret_ycZgFSnsO7h0IgFguElqqqAmC', {"user":"  client_secret: 'pi_3RIrKEJlvCjqT1Et1XMh2wOc_secret_ycZgFSnsO7h0IgFguElqqqAmC',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   client_secret: 'pi_3RIrKEJlvCjqT1Et1XMh2wOc_secret_ycZgFSnsO7h0IgFguElqqqAmC',"}}
[info] >    confirmation_method: 'automatic', {"user":"  confirmation_method: 'automatic',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   confirmation_method: 'automatic',"}}
[info] >    created: 1745845342, {"user":"  created: 1745845342,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   created: 1745845342,"}}
[info] >    currency: 'usd', {"user":"  currency: 'usd',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   currency: 'usd',"}}
[info] >    customer: null, {"user":"  customer: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   customer: null,"}}
[info] >    description: null, {"user":"  description: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   description: null,"}}
[info] >    invoice: null, {"user":"  invoice: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   invoice: null,"}}
[info] >    last_payment_error: null, {"user":"  last_payment_error: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   last_payment_error: null,"}}
[info] >    latest_charge: null, {"user":"  latest_charge: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   latest_charge: null,"}}
[info] >    livemode: false, {"user":"  livemode: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   livemode: false,"}}
[info] >    metadata: {}, {"user":"  metadata: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   metadata: {},"}}
[info] >    next_action: null, {"user":"  next_action: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   next_action: null,"}}
[info] >    on_behalf_of: null, {"user":"  on_behalf_of: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   on_behalf_of: null,"}}
[info] >    payment_method: null, {"user":"  payment_method: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method: null,"}}
[info] >    payment_method_configuration_details: { id: 'pmc_1R1R5nJlvCjqT1EtYHXN7Kcf', parent: null }, {"user":"  payment_method_configuration_details: { id: 'pmc_1R1R5nJlvCjqT1EtYHXN7Kcf', parent: null },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method_configuration_details: { id: 'pmc_1R1R5nJlvCjqT1EtYHXN7Kcf', parent: null },"}}
[info] >    payment_method_options: { {"user":"  payment_method_options: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method_options: {"}}
[info] >      affirm: {}, {"user":"    affirm: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     affirm: {},"}}
[info] >      amazon_pay: { express_checkout_element_session_id: null }, {"user":"    amazon_pay: { express_checkout_element_session_id: null },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     amazon_pay: { express_checkout_element_session_id: null },"}}
[info] >      card: { {"user":"    card: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     card: {"}}
[info] >        installments: null, {"user":"      installments: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       installments: null,"}}
[info] >        mandate_options: null, {"user":"      mandate_options: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       mandate_options: null,"}}
[info] >        network: null, {"user":"      network: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       network: null,"}}
[info] >        request_three_d_secure: 'automatic' {"user":"      request_three_d_secure: 'automatic'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       request_three_d_secure: 'automatic'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      cashapp: {}, {"user":"    cashapp: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     cashapp: {},"}}
[info] >      klarna: { preferred_locale: null }, {"user":"    klarna: { preferred_locale: null },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     klarna: { preferred_locale: null },"}}
[info] >      link: { persistent_token: null } {"user":"    link: { persistent_token: null }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     link: { persistent_token: null }"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    payment_method_types: [ 'card', 'klarna', 'link', 'affirm', 'cashapp', 'amazon_pay' ], {"user":"  payment_method_types: [ 'card', 'klarna', 'link', 'affirm', 'cashapp', 'amazon_pay' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method_types: [ 'card', 'klarna', 'link', 'affirm', 'cashapp', 'amazon_pay' ],"}}
[info] >    processing: null, {"user":"  processing: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   processing: null,"}}
[info] >    receipt_email: null, {"user":"  receipt_email: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   receipt_email: null,"}}
[info] >    review: null, {"user":"  review: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   review: null,"}}
[info] >    setup_future_usage: null, {"user":"  setup_future_usage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   setup_future_usage: null,"}}
[info] >    shipping: null, {"user":"  shipping: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   shipping: null,"}}
[info] >    source: null, {"user":"  source: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   source: null,"}}
[info] >    statement_descriptor: null, {"user":"  statement_descriptor: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statement_descriptor: null,"}}
[info] >    statement_descriptor_suffix: null, {"user":"  statement_descriptor_suffix: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statement_descriptor_suffix: null,"}}
[info] >    status: 'requires_payment_method', {"user":"  status: 'requires_payment_method',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   status: 'requires_payment_method',"}}
[info] >    transfer_data: null, {"user":"  transfer_data: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   transfer_data: null,"}}
[info] >    transfer_group: null {"user":"  transfer_group: null","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   transfer_group: null"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2025-04-28T13:02:23.201Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 512.156083ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 512.156083ms"}}
[debug] [2025-04-28T13:02:23.201Z] [worker-us-central1-api-5af97356-3432-4bfb-9b23-494b94a39a2f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-5af97356-3432-4bfb-9b23-494b94a39a2f]: IDLE"}}
[debug] [2025-04-28T13:02:23.201Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-04-28T13:02:23.201Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-04-28T13:02:23.201Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T13:02:41.558Z] [work-queue] {"queuedWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T13:02:41.558Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T13:02:41.558Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T13:02:41.558Z"],"workRunningCount":1}
[debug] [2025-04-28T13:02:41.558Z] Accepted request POST /clone-f330b/us-central1/api/payments/create?total=0 --> us-central1-api
[debug] [2025-04-28T13:02:41.561Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-04-28T13:02:41.561Z] [functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0"}}
[debug] [2025-04-28T13:02:41.561Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-04-28T13:02:41.561Z] [worker-us-central1-api-5af97356-3432-4bfb-9b23-494b94a39a2f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-5af97356-3432-4bfb-9b23-494b94a39a2f]: BUSY"}}
[info] >  Payment Request Recieved BOOM!!! for this amount >>>  0 {"user":"Payment Request Recieved BOOM!!! for this amount >>>  0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment Request Recieved BOOM!!! for this amount >>>  0"}}
[info] >  /Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39 {"user":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m /Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39"}}
[info] >          return new StripeInvalidRequestError(rawStripeError); {"user":"        return new StripeInvalidRequestError(rawStripeError);","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         return new StripeInvalidRequestError(rawStripeError);"}}
[info] >                 ^ {"user":"               ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents {"user":"StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents"}}
[info] >      at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16) {"user":"    at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16)"}}
[info] >      at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33) {"user":"    at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33)"}}
[info] >      at Object.onceWrapper (node:events:632:28) {"user":"    at Object.onceWrapper (node:events:632:28)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Object.onceWrapper (node:events:632:28)"}}
[info] >      at IncomingMessage.emit (node:events:530:35) {"user":"    at IncomingMessage.emit (node:events:530:35)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.emit (node:events:530:35)"}}
[info] >      at endReadableNT (node:internal/streams/readable:1698:12) {"user":"    at endReadableNT (node:internal/streams/readable:1698:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at endReadableNT (node:internal/streams/readable:1698:12)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:90:21) { {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {"}}
[info] >    type: 'StripeInvalidRequestError', {"user":"  type: 'StripeInvalidRequestError',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'StripeInvalidRequestError',"}}
[info] >    raw: { {"user":"  raw: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   raw: {"}}
[info] >      code: 'parameter_invalid_integer', {"user":"    code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 'parameter_invalid_integer',"}}
[info] >      doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >      message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents', {"user":"    message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents',"}}
[info] >      param: 'amount', {"user":"    param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     param: 'amount',"}}
[info] >      request_log_url: 'https://dashboard.stripe.com/test/logs/req_25NdKlHYEHgpcM?t=1745845361', {"user":"    request_log_url: 'https://dashboard.stripe.com/test/logs/req_25NdKlHYEHgpcM?t=1745845361',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     request_log_url: 'https://dashboard.stripe.com/test/logs/req_25NdKlHYEHgpcM?t=1745845361',"}}
[info] >      type: 'invalid_request_error', {"user":"    type: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     type: 'invalid_request_error',"}}
[info] >      headers: { {"user":"    headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     headers: {"}}
[info] >        server: 'nginx', {"user":"      server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       server: 'nginx',"}}
[info] >        date: 'Mon, 28 Apr 2025 13:02:42 GMT', {"user":"      date: 'Mon, 28 Apr 2025 13:02:42 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       date: 'Mon, 28 Apr 2025 13:02:42 GMT',"}}
[info] >        'content-type': 'application/json', {"user":"      'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-type': 'application/json',"}}
[info] >        'content-length': '663', {"user":"      'content-length': '663',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-length': '663',"}}
[info] >        connection: 'keep-alive', {"user":"      connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       connection: 'keep-alive',"}}
[info] >        'access-control-allow-credentials': 'true', {"user":"      'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-credentials': 'true',"}}
[info] >        'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE', {"user":"      'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',"}}
[info] >        'access-control-allow-origin': '*', {"user":"      'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-origin': '*',"}}
[info] >        'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >        'access-control-max-age': '300', {"user":"      'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-max-age': '300',"}}
[info] >        'cache-control': 'no-cache, no-store', {"user":"      'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cache-control': 'no-cache, no-store',"}}
[info] >        'content-security-policy': "base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=PE3s1xjtjdj5-AYvM-CywdF73J0TenGXM3ZVtoqTsa6XMBjsgSFqrwkHskIzresKUOwm9vB5UmXrJLLV", {"user":"      'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=PE3s1xjtjdj5-AYvM-CywdF73J0TenGXM3ZVtoqTsa6XMBjsgSFqrwkHskIzresKUOwm9vB5UmXrJLLV\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=PE3s1xjtjdj5-AYvM-CywdF73J0TenGXM3ZVtoqTsa6XMBjsgSFqrwkHskIzresKUOwm9vB5UmXrJLLV\","}}
[info] >        'idempotency-key': '33afc72e-8d9a-41ee-bb89-98f7f5a27ff8', {"user":"      'idempotency-key': '33afc72e-8d9a-41ee-bb89-98f7f5a27ff8',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'idempotency-key': '33afc72e-8d9a-41ee-bb89-98f7f5a27ff8',"}}
[info] >        'original-request': 'req_25NdKlHYEHgpcM', {"user":"      'original-request': 'req_25NdKlHYEHgpcM',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'original-request': 'req_25NdKlHYEHgpcM',"}}
[info] >        'request-id': 'req_25NdKlHYEHgpcM', {"user":"      'request-id': 'req_25NdKlHYEHgpcM',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'request-id': 'req_25NdKlHYEHgpcM',"}}
[info] >        'stripe-version': '2025-02-24.acacia', {"user":"      'stripe-version': '2025-02-24.acacia',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'stripe-version': '2025-02-24.acacia',"}}
[info] >        vary: 'Origin', {"user":"      vary: 'Origin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       vary: 'Origin',"}}
[info] >        'x-stripe-priority-routing-enabled': 'true', {"user":"      'x-stripe-priority-routing-enabled': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-priority-routing-enabled': 'true',"}}
[info] >        'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"      'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >        'x-wc': 'ABGHI', {"user":"      'x-wc': 'ABGHI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-wc': 'ABGHI',"}}
[info] >        'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      statusCode: 400, {"user":"    statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     statusCode: 400,"}}
[info] >      requestId: 'req_25NdKlHYEHgpcM' {"user":"    requestId: 'req_25NdKlHYEHgpcM'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     requestId: 'req_25NdKlHYEHgpcM'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    rawType: 'invalid_request_error', {"user":"  rawType: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   rawType: 'invalid_request_error',"}}
[info] >    code: 'parameter_invalid_integer', {"user":"  code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'parameter_invalid_integer',"}}
[info] >    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"  doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >    param: 'amount', {"user":"  param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   param: 'amount',"}}
[info] >    detail: undefined, {"user":"  detail: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   detail: undefined,"}}
[info] >    headers: { {"user":"  headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   headers: {"}}
[info] >      server: 'nginx', {"user":"    server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     server: 'nginx',"}}
[info] >      date: 'Mon, 28 Apr 2025 13:02:42 GMT', {"user":"    date: 'Mon, 28 Apr 2025 13:02:42 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     date: 'Mon, 28 Apr 2025 13:02:42 GMT',"}}
[info] >      'content-type': 'application/json', {"user":"    'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-type': 'application/json',"}}
[info] >      'content-length': '663', {"user":"    'content-length': '663',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-length': '663',"}}
[info] >      connection: 'keep-alive', {"user":"    connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     connection: 'keep-alive',"}}
[info] >      'access-control-allow-credentials': 'true', {"user":"    'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-credentials': 'true',"}}
[info] >      'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE', {"user":"    'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',"}}
[info] >      'access-control-allow-origin': '*', {"user":"    'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-origin': '*',"}}
[info] >      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"    'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >      'access-control-max-age': '300', {"user":"    'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-max-age': '300',"}}
[info] >      'cache-control': 'no-cache, no-store', {"user":"    'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'cache-control': 'no-cache, no-store',"}}
[info] >      'content-security-policy': "base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=PE3s1xjtjdj5-AYvM-CywdF73J0TenGXM3ZVtoqTsa6XMBjsgSFqrwkHskIzresKUOwm9vB5UmXrJLLV", {"user":"    'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=PE3s1xjtjdj5-AYvM-CywdF73J0TenGXM3ZVtoqTsa6XMBjsgSFqrwkHskIzresKUOwm9vB5UmXrJLLV\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=PE3s1xjtjdj5-AYvM-CywdF73J0TenGXM3ZVtoqTsa6XMBjsgSFqrwkHskIzresKUOwm9vB5UmXrJLLV\","}}
[info] >      'idempotency-key': '33afc72e-8d9a-41ee-bb89-98f7f5a27ff8', {"user":"    'idempotency-key': '33afc72e-8d9a-41ee-bb89-98f7f5a27ff8',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'idempotency-key': '33afc72e-8d9a-41ee-bb89-98f7f5a27ff8',"}}
[info] >      'original-request': 'req_25NdKlHYEHgpcM', {"user":"    'original-request': 'req_25NdKlHYEHgpcM',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'original-request': 'req_25NdKlHYEHgpcM',"}}
[info] >      'request-id': 'req_25NdKlHYEHgpcM', {"user":"    'request-id': 'req_25NdKlHYEHgpcM',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'request-id': 'req_25NdKlHYEHgpcM',"}}
[info] >      'stripe-version': '2025-02-24.acacia', {"user":"    'stripe-version': '2025-02-24.acacia',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'stripe-version': '2025-02-24.acacia',"}}
[info] >      vary: 'Origin', {"user":"    vary: 'Origin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     vary: 'Origin',"}}
[info] >      'x-stripe-priority-routing-enabled': 'true', {"user":"    'x-stripe-priority-routing-enabled': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-priority-routing-enabled': 'true',"}}
[info] >      'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"    'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >      'x-wc': 'ABGHI', {"user":"    'x-wc': 'ABGHI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-wc': 'ABGHI',"}}
[info] >      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"    'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    requestId: 'req_25NdKlHYEHgpcM', {"user":"  requestId: 'req_25NdKlHYEHgpcM',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   requestId: 'req_25NdKlHYEHgpcM',"}}
[info] >    statusCode: 400, {"user":"  statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statusCode: 400,"}}
[info] >    charge: undefined, {"user":"  charge: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   charge: undefined,"}}
[info] >    decline_code: undefined, {"user":"  decline_code: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   decline_code: undefined,"}}
[info] >    payment_intent: undefined, {"user":"  payment_intent: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_intent: undefined,"}}
[info] >    payment_method: undefined, {"user":"  payment_method: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method: undefined,"}}
[info] >    setup_intent: undefined, {"user":"  setup_intent: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   setup_intent: undefined,"}}
[info] >    source: undefined {"user":"  source: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   source: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v22.11.0 {"user":"Node.js v22.11.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v22.11.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2025-04-28T13:02:42.064Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T13:02:42.064Z] [worker-us-central1-api-5af97356-3432-4bfb-9b23-494b94a39a2f]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-5af97356-3432-4bfb-9b23-494b94a39a2f]: exited"}}
[debug] [2025-04-28T13:02:42.064Z] [worker-us-central1-api-5af97356-3432-4bfb-9b23-494b94a39a2f]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-5af97356-3432-4bfb-9b23-494b94a39a2f]: FINISHED"}}
[debug] [2025-04-28T13:02:44.305Z] [work-queue] {"queuedWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T13:02:44.305Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T13:02:44.305Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T13:02:44.305Z"],"workRunningCount":1}
[debug] [2025-04-28T13:02:44.305Z] Accepted request POST /clone-f330b/us-central1/api/payments/create?total=0 --> us-central1-api
[debug] [2025-04-28T13:02:44.307Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-04-28T13:02:44.307Z] [functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0"}}
[debug] [2025-04-28T13:02:44.307Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2025-04-28T13:02:44.309Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2025-04-28T13:02:44.309Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[info] >  (node:62848) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead. {"user":"(node:62848) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m (node:62848) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead."}}
[info] >  (Use `node --trace-deprecation ...` to show where the warning was created) {"user":"(Use `node --trace-deprecation ...` to show where the warning was created)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m (Use `node --trace-deprecation ...` to show where the warning was created)"}}
[debug] [2025-04-28T13:02:45.024Z] [runtime-status] [62848] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.13.0","resolution":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [62848] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"8.13.0\",\"resolution\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-04-28T13:02:45.024Z] [runtime-status] [62848] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.11.0","resolution":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-functions/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [62848] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.11.0\",\"resolution\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-functions/lib/index.js\"}"}}
[warn] ⚠  The Cloud Functions emulator requires the module "firebase-functions" to be version >3.13.1 so your version is too old. You can probably fix this by running "npm install firebase-functions@latest" in your functions directory. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"The Cloud Functions emulator requires the module \"firebase-functions\" to be version >3.13.1 so your version is too old. You can probably fix this by running \"npm install firebase-functions@latest\" in your functions directory."}}
[info] i  functions: Your functions could not be parsed due to an issue with your node_modules (see above) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Your functions could not be parsed due to an issue with your node_modules (see above)"}}
[debug] [2025-04-28T13:02:45.098Z] [runtime-status] [62848] Functions runtime initialized. {"cwd":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions","node_version":"22.11.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [62848] Functions runtime initialized. {\"cwd\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions\",\"node_version\":\"22.11.0\"}"}}
[debug] [2025-04-28T13:02:45.099Z] [runtime-status] [62848] Listening to port: /var/folders/b8/2ktxw5yj1xz8mylspf3xppwr0000gn/T/fire_emu_ea327f77204717c9.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [62848] Listening to port: /var/folders/b8/2ktxw5yj1xz8mylspf3xppwr0000gn/T/fire_emu_ea327f77204717c9.sock"}}
[debug] [2025-04-28T13:02:45.120Z] [worker-us-central1-api-52f59254-6f9b-43a0-9da5-e8eac9189f4f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-52f59254-6f9b-43a0-9da5-e8eac9189f4f]: IDLE"}}
[debug] [2025-04-28T13:02:45.120Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-04-28T13:02:45.120Z] [worker-us-central1-api-52f59254-6f9b-43a0-9da5-e8eac9189f4f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-52f59254-6f9b-43a0-9da5-e8eac9189f4f]: BUSY"}}
[info] >  Payment Request Recieved BOOM!!! for this amount >>>  0 {"user":"Payment Request Recieved BOOM!!! for this amount >>>  0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment Request Recieved BOOM!!! for this amount >>>  0"}}
[info] >  /Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39 {"user":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m /Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39"}}
[info] >          return new StripeInvalidRequestError(rawStripeError); {"user":"        return new StripeInvalidRequestError(rawStripeError);","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         return new StripeInvalidRequestError(rawStripeError);"}}
[info] >                 ^ {"user":"               ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents {"user":"StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents"}}
[info] >      at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16) {"user":"    at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16)"}}
[info] >      at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33) {"user":"    at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33)"}}
[info] >      at Object.onceWrapper (node:events:632:28) {"user":"    at Object.onceWrapper (node:events:632:28)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Object.onceWrapper (node:events:632:28)"}}
[info] >      at IncomingMessage.emit (node:events:530:35) {"user":"    at IncomingMessage.emit (node:events:530:35)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.emit (node:events:530:35)"}}
[info] >      at endReadableNT (node:internal/streams/readable:1698:12) {"user":"    at endReadableNT (node:internal/streams/readable:1698:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at endReadableNT (node:internal/streams/readable:1698:12)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:90:21) { {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {"}}
[info] >    type: 'StripeInvalidRequestError', {"user":"  type: 'StripeInvalidRequestError',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'StripeInvalidRequestError',"}}
[info] >    raw: { {"user":"  raw: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   raw: {"}}
[info] >      code: 'parameter_invalid_integer', {"user":"    code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 'parameter_invalid_integer',"}}
[info] >      doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >      message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents', {"user":"    message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents',"}}
[info] >      param: 'amount', {"user":"    param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     param: 'amount',"}}
[info] >      request_log_url: 'https://dashboard.stripe.com/test/logs/req_4Q0fKCwIFYUguf?t=1745845365', {"user":"    request_log_url: 'https://dashboard.stripe.com/test/logs/req_4Q0fKCwIFYUguf?t=1745845365',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     request_log_url: 'https://dashboard.stripe.com/test/logs/req_4Q0fKCwIFYUguf?t=1745845365',"}}
[info] >      type: 'invalid_request_error', {"user":"    type: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     type: 'invalid_request_error',"}}
[info] >      headers: { {"user":"    headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     headers: {"}}
[info] >        server: 'nginx', {"user":"      server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       server: 'nginx',"}}
[info] >        date: 'Mon, 28 Apr 2025 13:02:45 GMT', {"user":"      date: 'Mon, 28 Apr 2025 13:02:45 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       date: 'Mon, 28 Apr 2025 13:02:45 GMT',"}}
[info] >        'content-type': 'application/json', {"user":"      'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-type': 'application/json',"}}
[info] >        'content-length': '663', {"user":"      'content-length': '663',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-length': '663',"}}
[info] >        connection: 'keep-alive', {"user":"      connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       connection: 'keep-alive',"}}
[info] >        'access-control-allow-credentials': 'true', {"user":"      'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-credentials': 'true',"}}
[info] >        'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE', {"user":"      'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',"}}
[info] >        'access-control-allow-origin': '*', {"user":"      'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-origin': '*',"}}
[info] >        'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >        'access-control-max-age': '300', {"user":"      'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-max-age': '300',"}}
[info] >        'cache-control': 'no-cache, no-store', {"user":"      'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cache-control': 'no-cache, no-store',"}}
[info] >        'content-security-policy': "base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=kAdIXExZQWSVMouwW621cek1XZEO1sh7dWYd7Jx0MV6mSKb8W7H6oZiHJ1aVQaVKE6pbXNhr5elEUcYv", {"user":"      'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=kAdIXExZQWSVMouwW621cek1XZEO1sh7dWYd7Jx0MV6mSKb8W7H6oZiHJ1aVQaVKE6pbXNhr5elEUcYv\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=kAdIXExZQWSVMouwW621cek1XZEO1sh7dWYd7Jx0MV6mSKb8W7H6oZiHJ1aVQaVKE6pbXNhr5elEUcYv\","}}
[info] >        'idempotency-key': 'd58b8f46-a4fd-4273-8a8a-5eddb8ef0a25', {"user":"      'idempotency-key': 'd58b8f46-a4fd-4273-8a8a-5eddb8ef0a25',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'idempotency-key': 'd58b8f46-a4fd-4273-8a8a-5eddb8ef0a25',"}}
[info] >        'original-request': 'req_4Q0fKCwIFYUguf', {"user":"      'original-request': 'req_4Q0fKCwIFYUguf',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'original-request': 'req_4Q0fKCwIFYUguf',"}}
[info] >        'request-id': 'req_4Q0fKCwIFYUguf', {"user":"      'request-id': 'req_4Q0fKCwIFYUguf',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'request-id': 'req_4Q0fKCwIFYUguf',"}}
[info] >        'stripe-version': '2025-02-24.acacia', {"user":"      'stripe-version': '2025-02-24.acacia',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'stripe-version': '2025-02-24.acacia',"}}
[info] >        vary: 'Origin', {"user":"      vary: 'Origin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       vary: 'Origin',"}}
[info] >        'x-stripe-priority-routing-enabled': 'true', {"user":"      'x-stripe-priority-routing-enabled': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-priority-routing-enabled': 'true',"}}
[info] >        'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"      'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >        'x-wc': 'ABGHI', {"user":"      'x-wc': 'ABGHI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-wc': 'ABGHI',"}}
[info] >        'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      statusCode: 400, {"user":"    statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     statusCode: 400,"}}
[info] >      requestId: 'req_4Q0fKCwIFYUguf' {"user":"    requestId: 'req_4Q0fKCwIFYUguf'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     requestId: 'req_4Q0fKCwIFYUguf'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    rawType: 'invalid_request_error', {"user":"  rawType: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   rawType: 'invalid_request_error',"}}
[info] >    code: 'parameter_invalid_integer', {"user":"  code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'parameter_invalid_integer',"}}
[info] >    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"  doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >    param: 'amount', {"user":"  param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   param: 'amount',"}}
[info] >    detail: undefined, {"user":"  detail: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   detail: undefined,"}}
[info] >    headers: { {"user":"  headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   headers: {"}}
[info] >      server: 'nginx', {"user":"    server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     server: 'nginx',"}}
[info] >      date: 'Mon, 28 Apr 2025 13:02:45 GMT', {"user":"    date: 'Mon, 28 Apr 2025 13:02:45 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     date: 'Mon, 28 Apr 2025 13:02:45 GMT',"}}
[info] >      'content-type': 'application/json', {"user":"    'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-type': 'application/json',"}}
[info] >      'content-length': '663', {"user":"    'content-length': '663',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-length': '663',"}}
[info] >      connection: 'keep-alive', {"user":"    connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     connection: 'keep-alive',"}}
[info] >      'access-control-allow-credentials': 'true', {"user":"    'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-credentials': 'true',"}}
[info] >      'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE', {"user":"    'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',"}}
[info] >      'access-control-allow-origin': '*', {"user":"    'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-origin': '*',"}}
[info] >      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"    'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >      'access-control-max-age': '300', {"user":"    'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-max-age': '300',"}}
[info] >      'cache-control': 'no-cache, no-store', {"user":"    'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'cache-control': 'no-cache, no-store',"}}
[info] >      'content-security-policy': "base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=kAdIXExZQWSVMouwW621cek1XZEO1sh7dWYd7Jx0MV6mSKb8W7H6oZiHJ1aVQaVKE6pbXNhr5elEUcYv", {"user":"    'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=kAdIXExZQWSVMouwW621cek1XZEO1sh7dWYd7Jx0MV6mSKb8W7H6oZiHJ1aVQaVKE6pbXNhr5elEUcYv\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=kAdIXExZQWSVMouwW621cek1XZEO1sh7dWYd7Jx0MV6mSKb8W7H6oZiHJ1aVQaVKE6pbXNhr5elEUcYv\","}}
[info] >      'idempotency-key': 'd58b8f46-a4fd-4273-8a8a-5eddb8ef0a25', {"user":"    'idempotency-key': 'd58b8f46-a4fd-4273-8a8a-5eddb8ef0a25',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'idempotency-key': 'd58b8f46-a4fd-4273-8a8a-5eddb8ef0a25',"}}
[info] >      'original-request': 'req_4Q0fKCwIFYUguf', {"user":"    'original-request': 'req_4Q0fKCwIFYUguf',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'original-request': 'req_4Q0fKCwIFYUguf',"}}
[info] >      'request-id': 'req_4Q0fKCwIFYUguf', {"user":"    'request-id': 'req_4Q0fKCwIFYUguf',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'request-id': 'req_4Q0fKCwIFYUguf',"}}
[info] >      'stripe-version': '2025-02-24.acacia', {"user":"    'stripe-version': '2025-02-24.acacia',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'stripe-version': '2025-02-24.acacia',"}}
[info] >      vary: 'Origin', {"user":"    vary: 'Origin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     vary: 'Origin',"}}
[info] >      'x-stripe-priority-routing-enabled': 'true', {"user":"    'x-stripe-priority-routing-enabled': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-priority-routing-enabled': 'true',"}}
[info] >      'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"    'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >      'x-wc': 'ABGHI', {"user":"    'x-wc': 'ABGHI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-wc': 'ABGHI',"}}
[info] >      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"    'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    requestId: 'req_4Q0fKCwIFYUguf', {"user":"  requestId: 'req_4Q0fKCwIFYUguf',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   requestId: 'req_4Q0fKCwIFYUguf',"}}
[info] >    statusCode: 400, {"user":"  statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statusCode: 400,"}}
[info] >    charge: undefined, {"user":"  charge: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   charge: undefined,"}}
[info] >    decline_code: undefined, {"user":"  decline_code: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   decline_code: undefined,"}}
[info] >    payment_intent: undefined, {"user":"  payment_intent: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_intent: undefined,"}}
[info] >    payment_method: undefined, {"user":"  payment_method: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method: undefined,"}}
[info] >    setup_intent: undefined, {"user":"  setup_intent: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   setup_intent: undefined,"}}
[info] >    source: undefined {"user":"  source: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   source: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v22.11.0 {"user":"Node.js v22.11.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v22.11.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2025-04-28T13:02:45.744Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T13:02:45.744Z] [worker-us-central1-api-52f59254-6f9b-43a0-9da5-e8eac9189f4f]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-52f59254-6f9b-43a0-9da5-e8eac9189f4f]: exited"}}
[debug] [2025-04-28T13:02:45.744Z] [worker-us-central1-api-52f59254-6f9b-43a0-9da5-e8eac9189f4f]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-52f59254-6f9b-43a0-9da5-e8eac9189f4f]: FINISHED"}}
[debug] [2025-04-28T13:09:04.142Z] [work-queue] {"queuedWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T13:09:04.141Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T13:09:04.143Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T13:09:04.141Z"],"workRunningCount":1}
[debug] [2025-04-28T13:09:04.143Z] Accepted request POST /clone-f330b/us-central1/api/payments/create?total=0 --> us-central1-api
[debug] [2025-04-28T13:09:04.150Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-04-28T13:09:04.150Z] [functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0"}}
[debug] [2025-04-28T13:09:04.152Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2025-04-28T13:09:04.162Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2025-04-28T13:09:04.162Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[info] >  (node:63636) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead. {"user":"(node:63636) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m (node:63636) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead."}}
[info] >  (Use `node --trace-deprecation ...` to show where the warning was created) {"user":"(Use `node --trace-deprecation ...` to show where the warning was created)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m (Use `node --trace-deprecation ...` to show where the warning was created)"}}
[debug] [2025-04-28T13:09:04.910Z] [runtime-status] [63636] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.13.0","resolution":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [63636] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"8.13.0\",\"resolution\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-04-28T13:09:04.911Z] [runtime-status] [63636] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.11.0","resolution":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-functions/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [63636] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.11.0\",\"resolution\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-functions/lib/index.js\"}"}}
[warn] ⚠  The Cloud Functions emulator requires the module "firebase-functions" to be version >3.13.1 so your version is too old. You can probably fix this by running "npm install firebase-functions@latest" in your functions directory. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"The Cloud Functions emulator requires the module \"firebase-functions\" to be version >3.13.1 so your version is too old. You can probably fix this by running \"npm install firebase-functions@latest\" in your functions directory."}}
[info] i  functions: Your functions could not be parsed due to an issue with your node_modules (see above) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Your functions could not be parsed due to an issue with your node_modules (see above)"}}
[debug] [2025-04-28T13:09:05.006Z] [runtime-status] [63636] Functions runtime initialized. {"cwd":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions","node_version":"22.11.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [63636] Functions runtime initialized. {\"cwd\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions\",\"node_version\":\"22.11.0\"}"}}
[debug] [2025-04-28T13:09:05.006Z] [runtime-status] [63636] Listening to port: /var/folders/b8/2ktxw5yj1xz8mylspf3xppwr0000gn/T/fire_emu_6e3827b0937da213.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [63636] Listening to port: /var/folders/b8/2ktxw5yj1xz8mylspf3xppwr0000gn/T/fire_emu_6e3827b0937da213.sock"}}
[debug] [2025-04-28T13:09:05.097Z] [worker-us-central1-api-59589982-85aa-4fda-9463-d34f42b2d5aa]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-59589982-85aa-4fda-9463-d34f42b2d5aa]: IDLE"}}
[debug] [2025-04-28T13:09:05.097Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-04-28T13:09:05.098Z] [worker-us-central1-api-59589982-85aa-4fda-9463-d34f42b2d5aa]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-59589982-85aa-4fda-9463-d34f42b2d5aa]: BUSY"}}
[info] >  Payment Request Recieved BOOM!!! for this amount >>>  0 {"user":"Payment Request Recieved BOOM!!! for this amount >>>  0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment Request Recieved BOOM!!! for this amount >>>  0"}}
[info] >  /Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39 {"user":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m /Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39"}}
[info] >          return new StripeInvalidRequestError(rawStripeError); {"user":"        return new StripeInvalidRequestError(rawStripeError);","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         return new StripeInvalidRequestError(rawStripeError);"}}
[info] >                 ^ {"user":"               ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents {"user":"StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents"}}
[info] >      at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16) {"user":"    at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16)"}}
[info] >      at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33) {"user":"    at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33)"}}
[info] >      at Object.onceWrapper (node:events:632:28) {"user":"    at Object.onceWrapper (node:events:632:28)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Object.onceWrapper (node:events:632:28)"}}
[info] >      at IncomingMessage.emit (node:events:530:35) {"user":"    at IncomingMessage.emit (node:events:530:35)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.emit (node:events:530:35)"}}
[info] >      at endReadableNT (node:internal/streams/readable:1698:12) {"user":"    at endReadableNT (node:internal/streams/readable:1698:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at endReadableNT (node:internal/streams/readable:1698:12)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:90:21) { {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {"}}
[info] >    type: 'StripeInvalidRequestError', {"user":"  type: 'StripeInvalidRequestError',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'StripeInvalidRequestError',"}}
[info] >    raw: { {"user":"  raw: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   raw: {"}}
[info] >      code: 'parameter_invalid_integer', {"user":"    code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 'parameter_invalid_integer',"}}
[info] >      doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >      message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents', {"user":"    message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents',"}}
[info] >      param: 'amount', {"user":"    param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     param: 'amount',"}}
[info] >      request_log_url: 'https://dashboard.stripe.com/test/logs/req_M9UjePwnEYL82E?t=1745845745', {"user":"    request_log_url: 'https://dashboard.stripe.com/test/logs/req_M9UjePwnEYL82E?t=1745845745',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     request_log_url: 'https://dashboard.stripe.com/test/logs/req_M9UjePwnEYL82E?t=1745845745',"}}
[info] >      type: 'invalid_request_error', {"user":"    type: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     type: 'invalid_request_error',"}}
[info] >      headers: { {"user":"    headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     headers: {"}}
[info] >        server: 'nginx', {"user":"      server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       server: 'nginx',"}}
[info] >        date: 'Mon, 28 Apr 2025 13:09:06 GMT', {"user":"      date: 'Mon, 28 Apr 2025 13:09:06 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       date: 'Mon, 28 Apr 2025 13:09:06 GMT',"}}
[info] >        'content-type': 'application/json', {"user":"      'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-type': 'application/json',"}}
[info] >        'content-length': '663', {"user":"      'content-length': '663',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-length': '663',"}}
[info] >        connection: 'keep-alive', {"user":"      connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       connection: 'keep-alive',"}}
[info] >        'access-control-allow-credentials': 'true', {"user":"      'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-credentials': 'true',"}}
[info] >        'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE', {"user":"      'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',"}}
[info] >        'access-control-allow-origin': '*', {"user":"      'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-origin': '*',"}}
[info] >        'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >        'access-control-max-age': '300', {"user":"      'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-max-age': '300',"}}
[info] >        'cache-control': 'no-cache, no-store', {"user":"      'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cache-control': 'no-cache, no-store',"}}
[info] >        'content-security-policy': "base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=ZQGgu-154PfZ8w7XKqVpHLGYWmRlLOldiLZnYMkJnI2qo8ILfx7P4wA-XPgan77_IEOG8oKXi1u9d0-t", {"user":"      'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=ZQGgu-154PfZ8w7XKqVpHLGYWmRlLOldiLZnYMkJnI2qo8ILfx7P4wA-XPgan77_IEOG8oKXi1u9d0-t\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=ZQGgu-154PfZ8w7XKqVpHLGYWmRlLOldiLZnYMkJnI2qo8ILfx7P4wA-XPgan77_IEOG8oKXi1u9d0-t\","}}
[info] >        'idempotency-key': 'b67c9510-db97-4291-bf95-44484c678e27', {"user":"      'idempotency-key': 'b67c9510-db97-4291-bf95-44484c678e27',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'idempotency-key': 'b67c9510-db97-4291-bf95-44484c678e27',"}}
[info] >        'original-request': 'req_M9UjePwnEYL82E', {"user":"      'original-request': 'req_M9UjePwnEYL82E',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'original-request': 'req_M9UjePwnEYL82E',"}}
[info] >        'request-id': 'req_M9UjePwnEYL82E', {"user":"      'request-id': 'req_M9UjePwnEYL82E',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'request-id': 'req_M9UjePwnEYL82E',"}}
[info] >        'stripe-version': '2025-02-24.acacia', {"user":"      'stripe-version': '2025-02-24.acacia',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'stripe-version': '2025-02-24.acacia',"}}
[info] >        vary: 'Origin', {"user":"      vary: 'Origin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       vary: 'Origin',"}}
[info] >        'x-stripe-priority-routing-enabled': 'true', {"user":"      'x-stripe-priority-routing-enabled': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-priority-routing-enabled': 'true',"}}
[info] >        'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"      'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >        'x-wc': 'ABGHI', {"user":"      'x-wc': 'ABGHI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-wc': 'ABGHI',"}}
[info] >        'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      statusCode: 400, {"user":"    statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     statusCode: 400,"}}
[info] >      requestId: 'req_M9UjePwnEYL82E' {"user":"    requestId: 'req_M9UjePwnEYL82E'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     requestId: 'req_M9UjePwnEYL82E'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    rawType: 'invalid_request_error', {"user":"  rawType: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   rawType: 'invalid_request_error',"}}
[info] >    code: 'parameter_invalid_integer', {"user":"  code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'parameter_invalid_integer',"}}
[info] >    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"  doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >    param: 'amount', {"user":"  param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   param: 'amount',"}}
[info] >    detail: undefined, {"user":"  detail: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   detail: undefined,"}}
[info] >    headers: { {"user":"  headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   headers: {"}}
[info] >      server: 'nginx', {"user":"    server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     server: 'nginx',"}}
[info] >      date: 'Mon, 28 Apr 2025 13:09:06 GMT', {"user":"    date: 'Mon, 28 Apr 2025 13:09:06 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     date: 'Mon, 28 Apr 2025 13:09:06 GMT',"}}
[info] >      'content-type': 'application/json', {"user":"    'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-type': 'application/json',"}}
[info] >      'content-length': '663', {"user":"    'content-length': '663',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-length': '663',"}}
[info] >      connection: 'keep-alive', {"user":"    connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     connection: 'keep-alive',"}}
[info] >      'access-control-allow-credentials': 'true', {"user":"    'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-credentials': 'true',"}}
[info] >      'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE', {"user":"    'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',"}}
[info] >      'access-control-allow-origin': '*', {"user":"    'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-origin': '*',"}}
[info] >      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"    'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >      'access-control-max-age': '300', {"user":"    'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-max-age': '300',"}}
[info] >      'cache-control': 'no-cache, no-store', {"user":"    'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'cache-control': 'no-cache, no-store',"}}
[info] >      'content-security-policy': "base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=ZQGgu-154PfZ8w7XKqVpHLGYWmRlLOldiLZnYMkJnI2qo8ILfx7P4wA-XPgan77_IEOG8oKXi1u9d0-t", {"user":"    'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=ZQGgu-154PfZ8w7XKqVpHLGYWmRlLOldiLZnYMkJnI2qo8ILfx7P4wA-XPgan77_IEOG8oKXi1u9d0-t\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=ZQGgu-154PfZ8w7XKqVpHLGYWmRlLOldiLZnYMkJnI2qo8ILfx7P4wA-XPgan77_IEOG8oKXi1u9d0-t\","}}
[info] >      'idempotency-key': 'b67c9510-db97-4291-bf95-44484c678e27', {"user":"    'idempotency-key': 'b67c9510-db97-4291-bf95-44484c678e27',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'idempotency-key': 'b67c9510-db97-4291-bf95-44484c678e27',"}}
[info] >      'original-request': 'req_M9UjePwnEYL82E', {"user":"    'original-request': 'req_M9UjePwnEYL82E',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'original-request': 'req_M9UjePwnEYL82E',"}}
[info] >      'request-id': 'req_M9UjePwnEYL82E', {"user":"    'request-id': 'req_M9UjePwnEYL82E',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'request-id': 'req_M9UjePwnEYL82E',"}}
[info] >      'stripe-version': '2025-02-24.acacia', {"user":"    'stripe-version': '2025-02-24.acacia',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'stripe-version': '2025-02-24.acacia',"}}
[info] >      vary: 'Origin', {"user":"    vary: 'Origin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     vary: 'Origin',"}}
[info] >      'x-stripe-priority-routing-enabled': 'true', {"user":"    'x-stripe-priority-routing-enabled': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-priority-routing-enabled': 'true',"}}
[info] >      'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"    'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >      'x-wc': 'ABGHI', {"user":"    'x-wc': 'ABGHI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-wc': 'ABGHI',"}}
[info] >      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"    'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    requestId: 'req_M9UjePwnEYL82E', {"user":"  requestId: 'req_M9UjePwnEYL82E',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   requestId: 'req_M9UjePwnEYL82E',"}}
[info] >    statusCode: 400, {"user":"  statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statusCode: 400,"}}
[info] >    charge: undefined, {"user":"  charge: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   charge: undefined,"}}
[info] >    decline_code: undefined, {"user":"  decline_code: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   decline_code: undefined,"}}
[info] >    payment_intent: undefined, {"user":"  payment_intent: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_intent: undefined,"}}
[info] >    payment_method: undefined, {"user":"  payment_method: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method: undefined,"}}
[info] >    setup_intent: undefined, {"user":"  setup_intent: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   setup_intent: undefined,"}}
[info] >    source: undefined {"user":"  source: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   source: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v22.11.0 {"user":"Node.js v22.11.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v22.11.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2025-04-28T13:09:06.059Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T13:09:06.059Z] [worker-us-central1-api-59589982-85aa-4fda-9463-d34f42b2d5aa]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-59589982-85aa-4fda-9463-d34f42b2d5aa]: exited"}}
[debug] [2025-04-28T13:09:06.059Z] [worker-us-central1-api-59589982-85aa-4fda-9463-d34f42b2d5aa]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-59589982-85aa-4fda-9463-d34f42b2d5aa]: FINISHED"}}
[debug] [2025-04-28T13:09:16.845Z] [work-queue] {"queuedWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T13:09:16.844Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T13:09:16.845Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T13:09:16.844Z"],"workRunningCount":1}
[debug] [2025-04-28T13:09:16.845Z] Accepted request POST /clone-f330b/us-central1/api/payments/create?total=0 --> us-central1-api
[debug] [2025-04-28T13:09:16.847Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-04-28T13:09:16.848Z] [functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0"}}
[debug] [2025-04-28T13:09:16.848Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2025-04-28T13:09:16.850Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2025-04-28T13:09:16.850Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[info] >  (node:63682) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead. {"user":"(node:63682) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m (node:63682) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead."}}
[info] >  (Use `node --trace-deprecation ...` to show where the warning was created) {"user":"(Use `node --trace-deprecation ...` to show where the warning was created)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m (Use `node --trace-deprecation ...` to show where the warning was created)"}}
[debug] [2025-04-28T13:09:17.489Z] [runtime-status] [63682] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.13.0","resolution":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [63682] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"8.13.0\",\"resolution\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-04-28T13:09:17.489Z] [runtime-status] [63682] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.11.0","resolution":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-functions/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [63682] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.11.0\",\"resolution\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-functions/lib/index.js\"}"}}
[warn] ⚠  The Cloud Functions emulator requires the module "firebase-functions" to be version >3.13.1 so your version is too old. You can probably fix this by running "npm install firebase-functions@latest" in your functions directory. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"The Cloud Functions emulator requires the module \"firebase-functions\" to be version >3.13.1 so your version is too old. You can probably fix this by running \"npm install firebase-functions@latest\" in your functions directory."}}
[info] i  functions: Your functions could not be parsed due to an issue with your node_modules (see above) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Your functions could not be parsed due to an issue with your node_modules (see above)"}}
[debug] [2025-04-28T13:09:17.564Z] [runtime-status] [63682] Functions runtime initialized. {"cwd":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions","node_version":"22.11.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [63682] Functions runtime initialized. {\"cwd\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions\",\"node_version\":\"22.11.0\"}"}}
[debug] [2025-04-28T13:09:17.564Z] [runtime-status] [63682] Listening to port: /var/folders/b8/2ktxw5yj1xz8mylspf3xppwr0000gn/T/fire_emu_02f9940dbf69a4d5.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [63682] Listening to port: /var/folders/b8/2ktxw5yj1xz8mylspf3xppwr0000gn/T/fire_emu_02f9940dbf69a4d5.sock"}}
[debug] [2025-04-28T13:09:17.662Z] [worker-us-central1-api-7a4974e1-fc33-4a38-9347-eb7e40f952aa]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-7a4974e1-fc33-4a38-9347-eb7e40f952aa]: IDLE"}}
[debug] [2025-04-28T13:09:17.662Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-04-28T13:09:17.662Z] [worker-us-central1-api-7a4974e1-fc33-4a38-9347-eb7e40f952aa]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-7a4974e1-fc33-4a38-9347-eb7e40f952aa]: BUSY"}}
[info] >  Payment Request Recieved BOOM!!! for this amount >>>  0 {"user":"Payment Request Recieved BOOM!!! for this amount >>>  0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment Request Recieved BOOM!!! for this amount >>>  0"}}
[info] >  /Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39 {"user":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m /Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39"}}
[info] >          return new StripeInvalidRequestError(rawStripeError); {"user":"        return new StripeInvalidRequestError(rawStripeError);","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         return new StripeInvalidRequestError(rawStripeError);"}}
[info] >                 ^ {"user":"               ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents {"user":"StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents"}}
[info] >      at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16) {"user":"    at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16)"}}
[info] >      at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33) {"user":"    at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33)"}}
[info] >      at Object.onceWrapper (node:events:632:28) {"user":"    at Object.onceWrapper (node:events:632:28)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Object.onceWrapper (node:events:632:28)"}}
[info] >      at IncomingMessage.emit (node:events:530:35) {"user":"    at IncomingMessage.emit (node:events:530:35)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.emit (node:events:530:35)"}}
[info] >      at endReadableNT (node:internal/streams/readable:1698:12) {"user":"    at endReadableNT (node:internal/streams/readable:1698:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at endReadableNT (node:internal/streams/readable:1698:12)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:90:21) { {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {"}}
[info] >    type: 'StripeInvalidRequestError', {"user":"  type: 'StripeInvalidRequestError',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'StripeInvalidRequestError',"}}
[info] >    raw: { {"user":"  raw: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   raw: {"}}
[info] >      code: 'parameter_invalid_integer', {"user":"    code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 'parameter_invalid_integer',"}}
[info] >      doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >      message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents', {"user":"    message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents',"}}
[info] >      param: 'amount', {"user":"    param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     param: 'amount',"}}
[info] >      request_log_url: 'https://dashboard.stripe.com/test/logs/req_Wbz5FDjsTdD3J1?t=1745845758', {"user":"    request_log_url: 'https://dashboard.stripe.com/test/logs/req_Wbz5FDjsTdD3J1?t=1745845758',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     request_log_url: 'https://dashboard.stripe.com/test/logs/req_Wbz5FDjsTdD3J1?t=1745845758',"}}
[info] >      type: 'invalid_request_error', {"user":"    type: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     type: 'invalid_request_error',"}}
[info] >      headers: { {"user":"    headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     headers: {"}}
[info] >        server: 'nginx', {"user":"      server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       server: 'nginx',"}}
[info] >        date: 'Mon, 28 Apr 2025 13:09:18 GMT', {"user":"      date: 'Mon, 28 Apr 2025 13:09:18 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       date: 'Mon, 28 Apr 2025 13:09:18 GMT',"}}
[info] >        'content-type': 'application/json', {"user":"      'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-type': 'application/json',"}}
[info] >        'content-length': '663', {"user":"      'content-length': '663',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-length': '663',"}}
[info] >        connection: 'keep-alive', {"user":"      connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       connection: 'keep-alive',"}}
[info] >        'access-control-allow-credentials': 'true', {"user":"      'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-credentials': 'true',"}}
[info] >        'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE', {"user":"      'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',"}}
[info] >        'access-control-allow-origin': '*', {"user":"      'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-origin': '*',"}}
[info] >        'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >        'access-control-max-age': '300', {"user":"      'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-max-age': '300',"}}
[info] >        'cache-control': 'no-cache, no-store', {"user":"      'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cache-control': 'no-cache, no-store',"}}
[info] >        'content-security-policy': "base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=hmFeqq8SKUFXaMo-x-DlpqdjyIdblPMYX0v5mmf6Nkw3vxwLHO8CegGXQyTQ4Qj4W9BF9s2QfZuB5I5N", {"user":"      'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=hmFeqq8SKUFXaMo-x-DlpqdjyIdblPMYX0v5mmf6Nkw3vxwLHO8CegGXQyTQ4Qj4W9BF9s2QfZuB5I5N\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=hmFeqq8SKUFXaMo-x-DlpqdjyIdblPMYX0v5mmf6Nkw3vxwLHO8CegGXQyTQ4Qj4W9BF9s2QfZuB5I5N\","}}
[info] >        'idempotency-key': 'c3574036-2624-4e08-a14a-f3527daeeff3', {"user":"      'idempotency-key': 'c3574036-2624-4e08-a14a-f3527daeeff3',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'idempotency-key': 'c3574036-2624-4e08-a14a-f3527daeeff3',"}}
[info] >        'original-request': 'req_Wbz5FDjsTdD3J1', {"user":"      'original-request': 'req_Wbz5FDjsTdD3J1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'original-request': 'req_Wbz5FDjsTdD3J1',"}}
[info] >        'request-id': 'req_Wbz5FDjsTdD3J1', {"user":"      'request-id': 'req_Wbz5FDjsTdD3J1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'request-id': 'req_Wbz5FDjsTdD3J1',"}}
[info] >        'stripe-version': '2025-02-24.acacia', {"user":"      'stripe-version': '2025-02-24.acacia',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'stripe-version': '2025-02-24.acacia',"}}
[info] >        vary: 'Origin', {"user":"      vary: 'Origin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       vary: 'Origin',"}}
[info] >        'x-stripe-priority-routing-enabled': 'true', {"user":"      'x-stripe-priority-routing-enabled': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-priority-routing-enabled': 'true',"}}
[info] >        'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"      'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >        'x-wc': 'ABGHI', {"user":"      'x-wc': 'ABGHI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-wc': 'ABGHI',"}}
[info] >        'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      statusCode: 400, {"user":"    statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     statusCode: 400,"}}
[info] >      requestId: 'req_Wbz5FDjsTdD3J1' {"user":"    requestId: 'req_Wbz5FDjsTdD3J1'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     requestId: 'req_Wbz5FDjsTdD3J1'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    rawType: 'invalid_request_error', {"user":"  rawType: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   rawType: 'invalid_request_error',"}}
[info] >    code: 'parameter_invalid_integer', {"user":"  code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'parameter_invalid_integer',"}}
[info] >    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"  doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >    param: 'amount', {"user":"  param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   param: 'amount',"}}
[info] >    detail: undefined, {"user":"  detail: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   detail: undefined,"}}
[info] >    headers: { {"user":"  headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   headers: {"}}
[info] >      server: 'nginx', {"user":"    server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     server: 'nginx',"}}
[info] >      date: 'Mon, 28 Apr 2025 13:09:18 GMT', {"user":"    date: 'Mon, 28 Apr 2025 13:09:18 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     date: 'Mon, 28 Apr 2025 13:09:18 GMT',"}}
[info] >      'content-type': 'application/json', {"user":"    'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-type': 'application/json',"}}
[info] >      'content-length': '663', {"user":"    'content-length': '663',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-length': '663',"}}
[info] >      connection: 'keep-alive', {"user":"    connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     connection: 'keep-alive',"}}
[info] >      'access-control-allow-credentials': 'true', {"user":"    'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-credentials': 'true',"}}
[info] >      'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE', {"user":"    'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',"}}
[info] >      'access-control-allow-origin': '*', {"user":"    'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-origin': '*',"}}
[info] >      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"    'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >      'access-control-max-age': '300', {"user":"    'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-max-age': '300',"}}
[info] >      'cache-control': 'no-cache, no-store', {"user":"    'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'cache-control': 'no-cache, no-store',"}}
[info] >      'content-security-policy': "base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=hmFeqq8SKUFXaMo-x-DlpqdjyIdblPMYX0v5mmf6Nkw3vxwLHO8CegGXQyTQ4Qj4W9BF9s2QfZuB5I5N", {"user":"    'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=hmFeqq8SKUFXaMo-x-DlpqdjyIdblPMYX0v5mmf6Nkw3vxwLHO8CegGXQyTQ4Qj4W9BF9s2QfZuB5I5N\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=hmFeqq8SKUFXaMo-x-DlpqdjyIdblPMYX0v5mmf6Nkw3vxwLHO8CegGXQyTQ4Qj4W9BF9s2QfZuB5I5N\","}}
[info] >      'idempotency-key': 'c3574036-2624-4e08-a14a-f3527daeeff3', {"user":"    'idempotency-key': 'c3574036-2624-4e08-a14a-f3527daeeff3',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'idempotency-key': 'c3574036-2624-4e08-a14a-f3527daeeff3',"}}
[info] >      'original-request': 'req_Wbz5FDjsTdD3J1', {"user":"    'original-request': 'req_Wbz5FDjsTdD3J1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'original-request': 'req_Wbz5FDjsTdD3J1',"}}
[info] >      'request-id': 'req_Wbz5FDjsTdD3J1', {"user":"    'request-id': 'req_Wbz5FDjsTdD3J1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'request-id': 'req_Wbz5FDjsTdD3J1',"}}
[info] >      'stripe-version': '2025-02-24.acacia', {"user":"    'stripe-version': '2025-02-24.acacia',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'stripe-version': '2025-02-24.acacia',"}}
[info] >      vary: 'Origin', {"user":"    vary: 'Origin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     vary: 'Origin',"}}
[info] >      'x-stripe-priority-routing-enabled': 'true', {"user":"    'x-stripe-priority-routing-enabled': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-priority-routing-enabled': 'true',"}}
[info] >      'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"    'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >      'x-wc': 'ABGHI', {"user":"    'x-wc': 'ABGHI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-wc': 'ABGHI',"}}
[info] >      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"    'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    requestId: 'req_Wbz5FDjsTdD3J1', {"user":"  requestId: 'req_Wbz5FDjsTdD3J1',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   requestId: 'req_Wbz5FDjsTdD3J1',"}}
[info] >    statusCode: 400, {"user":"  statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statusCode: 400,"}}
[info] >    charge: undefined, {"user":"  charge: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   charge: undefined,"}}
[info] >    decline_code: undefined, {"user":"  decline_code: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   decline_code: undefined,"}}
[info] >    payment_intent: undefined, {"user":"  payment_intent: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_intent: undefined,"}}
[info] >    payment_method: undefined, {"user":"  payment_method: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method: undefined,"}}
[info] >    setup_intent: undefined, {"user":"  setup_intent: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   setup_intent: undefined,"}}
[info] >    source: undefined {"user":"  source: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   source: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v22.11.0 {"user":"Node.js v22.11.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v22.11.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2025-04-28T13:09:18.481Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T13:09:18.481Z] [worker-us-central1-api-7a4974e1-fc33-4a38-9347-eb7e40f952aa]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-7a4974e1-fc33-4a38-9347-eb7e40f952aa]: exited"}}
[debug] [2025-04-28T13:09:18.481Z] [worker-us-central1-api-7a4974e1-fc33-4a38-9347-eb7e40f952aa]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-7a4974e1-fc33-4a38-9347-eb7e40f952aa]: FINISHED"}}
[debug] [2025-04-28T13:11:32.119Z] [work-queue] {"queuedWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T13:11:32.119Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T13:11:32.120Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T13:11:32.119Z"],"workRunningCount":1}
[debug] [2025-04-28T13:11:32.121Z] Accepted request POST /clone-f330b/us-central1/api/payments/create?total=0 --> us-central1-api
[debug] [2025-04-28T13:11:32.123Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-04-28T13:11:32.123Z] [functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0"}}
[debug] [2025-04-28T13:11:32.123Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2025-04-28T13:11:32.125Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2025-04-28T13:11:32.126Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[info] >  (node:63983) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead. {"user":"(node:63983) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m (node:63983) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead."}}
[info] >  (Use `node --trace-deprecation ...` to show where the warning was created) {"user":"(Use `node --trace-deprecation ...` to show where the warning was created)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m (Use `node --trace-deprecation ...` to show where the warning was created)"}}
[debug] [2025-04-28T13:11:32.860Z] [runtime-status] [63983] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.13.0","resolution":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [63983] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"8.13.0\",\"resolution\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-04-28T13:11:32.860Z] [runtime-status] [63983] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.11.0","resolution":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-functions/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [63983] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.11.0\",\"resolution\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-functions/lib/index.js\"}"}}
[warn] ⚠  The Cloud Functions emulator requires the module "firebase-functions" to be version >3.13.1 so your version is too old. You can probably fix this by running "npm install firebase-functions@latest" in your functions directory. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"The Cloud Functions emulator requires the module \"firebase-functions\" to be version >3.13.1 so your version is too old. You can probably fix this by running \"npm install firebase-functions@latest\" in your functions directory."}}
[info] i  functions: Your functions could not be parsed due to an issue with your node_modules (see above) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Your functions could not be parsed due to an issue with your node_modules (see above)"}}
[debug] [2025-04-28T13:11:32.945Z] [runtime-status] [63983] Functions runtime initialized. {"cwd":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions","node_version":"22.11.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [63983] Functions runtime initialized. {\"cwd\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions\",\"node_version\":\"22.11.0\"}"}}
[debug] [2025-04-28T13:11:32.945Z] [runtime-status] [63983] Listening to port: /var/folders/b8/2ktxw5yj1xz8mylspf3xppwr0000gn/T/fire_emu_f78517f5a4d14f08.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [63983] Listening to port: /var/folders/b8/2ktxw5yj1xz8mylspf3xppwr0000gn/T/fire_emu_f78517f5a4d14f08.sock"}}
[debug] [2025-04-28T13:11:33.042Z] [worker-us-central1-api-97c572eb-9767-4fb4-a6e8-ac4f4a5322ce]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-97c572eb-9767-4fb4-a6e8-ac4f4a5322ce]: IDLE"}}
[debug] [2025-04-28T13:11:33.043Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-04-28T13:11:33.043Z] [worker-us-central1-api-97c572eb-9767-4fb4-a6e8-ac4f4a5322ce]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-97c572eb-9767-4fb4-a6e8-ac4f4a5322ce]: BUSY"}}
[info] >  Payment Request Recieved BOOM!!! for this amount >>>  0 {"user":"Payment Request Recieved BOOM!!! for this amount >>>  0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment Request Recieved BOOM!!! for this amount >>>  0"}}
[info] >  /Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39 {"user":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m /Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39"}}
[info] >          return new StripeInvalidRequestError(rawStripeError); {"user":"        return new StripeInvalidRequestError(rawStripeError);","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         return new StripeInvalidRequestError(rawStripeError);"}}
[info] >                 ^ {"user":"               ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents {"user":"StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents"}}
[info] >      at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16) {"user":"    at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16)"}}
[info] >      at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33) {"user":"    at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33)"}}
[info] >      at Object.onceWrapper (node:events:632:28) {"user":"    at Object.onceWrapper (node:events:632:28)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Object.onceWrapper (node:events:632:28)"}}
[info] >      at IncomingMessage.emit (node:events:530:35) {"user":"    at IncomingMessage.emit (node:events:530:35)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.emit (node:events:530:35)"}}
[info] >      at endReadableNT (node:internal/streams/readable:1698:12) {"user":"    at endReadableNT (node:internal/streams/readable:1698:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at endReadableNT (node:internal/streams/readable:1698:12)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:90:21) { {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {"}}
[info] >    type: 'StripeInvalidRequestError', {"user":"  type: 'StripeInvalidRequestError',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'StripeInvalidRequestError',"}}
[info] >    raw: { {"user":"  raw: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   raw: {"}}
[info] >      code: 'parameter_invalid_integer', {"user":"    code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 'parameter_invalid_integer',"}}
[info] >      doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >      message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents', {"user":"    message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents',"}}
[info] >      param: 'amount', {"user":"    param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     param: 'amount',"}}
[info] >      request_log_url: 'https://dashboard.stripe.com/test/logs/req_lRzfaAYQEVPXU4?t=1745845893', {"user":"    request_log_url: 'https://dashboard.stripe.com/test/logs/req_lRzfaAYQEVPXU4?t=1745845893',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     request_log_url: 'https://dashboard.stripe.com/test/logs/req_lRzfaAYQEVPXU4?t=1745845893',"}}
[info] >      type: 'invalid_request_error', {"user":"    type: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     type: 'invalid_request_error',"}}
[info] >      headers: { {"user":"    headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     headers: {"}}
[info] >        server: 'nginx', {"user":"      server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       server: 'nginx',"}}
[info] >        date: 'Mon, 28 Apr 2025 13:11:33 GMT', {"user":"      date: 'Mon, 28 Apr 2025 13:11:33 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       date: 'Mon, 28 Apr 2025 13:11:33 GMT',"}}
[info] >        'content-type': 'application/json', {"user":"      'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-type': 'application/json',"}}
[info] >        'content-length': '663', {"user":"      'content-length': '663',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-length': '663',"}}
[info] >        connection: 'keep-alive', {"user":"      connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       connection: 'keep-alive',"}}
[info] >        'access-control-allow-credentials': 'true', {"user":"      'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-credentials': 'true',"}}
[info] >        'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE', {"user":"      'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',"}}
[info] >        'access-control-allow-origin': '*', {"user":"      'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-origin': '*',"}}
[info] >        'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >        'access-control-max-age': '300', {"user":"      'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-max-age': '300',"}}
[info] >        'cache-control': 'no-cache, no-store', {"user":"      'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cache-control': 'no-cache, no-store',"}}
[info] >        'content-security-policy': "base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=sxZqg-h5vKBm-E7iOx33R2DmcqWghKA24WZiN_TkoQl4sfkiYiPaWpw7aeFAMj48SEuKhbrAk2ywMM1b", {"user":"      'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=sxZqg-h5vKBm-E7iOx33R2DmcqWghKA24WZiN_TkoQl4sfkiYiPaWpw7aeFAMj48SEuKhbrAk2ywMM1b\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=sxZqg-h5vKBm-E7iOx33R2DmcqWghKA24WZiN_TkoQl4sfkiYiPaWpw7aeFAMj48SEuKhbrAk2ywMM1b\","}}
[info] >        'idempotency-key': 'ee57a532-8fe9-4982-a47f-825106867ef4', {"user":"      'idempotency-key': 'ee57a532-8fe9-4982-a47f-825106867ef4',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'idempotency-key': 'ee57a532-8fe9-4982-a47f-825106867ef4',"}}
[info] >        'original-request': 'req_lRzfaAYQEVPXU4', {"user":"      'original-request': 'req_lRzfaAYQEVPXU4',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'original-request': 'req_lRzfaAYQEVPXU4',"}}
[info] >        'request-id': 'req_lRzfaAYQEVPXU4', {"user":"      'request-id': 'req_lRzfaAYQEVPXU4',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'request-id': 'req_lRzfaAYQEVPXU4',"}}
[info] >        'stripe-version': '2025-02-24.acacia', {"user":"      'stripe-version': '2025-02-24.acacia',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'stripe-version': '2025-02-24.acacia',"}}
[info] >        vary: 'Origin', {"user":"      vary: 'Origin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       vary: 'Origin',"}}
[info] >        'x-stripe-priority-routing-enabled': 'true', {"user":"      'x-stripe-priority-routing-enabled': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-priority-routing-enabled': 'true',"}}
[info] >        'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"      'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >        'x-wc': 'ABGHI', {"user":"      'x-wc': 'ABGHI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-wc': 'ABGHI',"}}
[info] >        'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      statusCode: 400, {"user":"    statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     statusCode: 400,"}}
[info] >      requestId: 'req_lRzfaAYQEVPXU4' {"user":"    requestId: 'req_lRzfaAYQEVPXU4'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     requestId: 'req_lRzfaAYQEVPXU4'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    rawType: 'invalid_request_error', {"user":"  rawType: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   rawType: 'invalid_request_error',"}}
[info] >    code: 'parameter_invalid_integer', {"user":"  code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'parameter_invalid_integer',"}}
[info] >    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"  doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >    param: 'amount', {"user":"  param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   param: 'amount',"}}
[info] >    detail: undefined, {"user":"  detail: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   detail: undefined,"}}
[info] >    headers: { {"user":"  headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   headers: {"}}
[info] >      server: 'nginx', {"user":"    server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     server: 'nginx',"}}
[info] >      date: 'Mon, 28 Apr 2025 13:11:33 GMT', {"user":"    date: 'Mon, 28 Apr 2025 13:11:33 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     date: 'Mon, 28 Apr 2025 13:11:33 GMT',"}}
[info] >      'content-type': 'application/json', {"user":"    'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-type': 'application/json',"}}
[info] >      'content-length': '663', {"user":"    'content-length': '663',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-length': '663',"}}
[info] >      connection: 'keep-alive', {"user":"    connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     connection: 'keep-alive',"}}
[info] >      'access-control-allow-credentials': 'true', {"user":"    'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-credentials': 'true',"}}
[info] >      'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE', {"user":"    'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',"}}
[info] >      'access-control-allow-origin': '*', {"user":"    'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-origin': '*',"}}
[info] >      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"    'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >      'access-control-max-age': '300', {"user":"    'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-max-age': '300',"}}
[info] >      'cache-control': 'no-cache, no-store', {"user":"    'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'cache-control': 'no-cache, no-store',"}}
[info] >      'content-security-policy': "base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=sxZqg-h5vKBm-E7iOx33R2DmcqWghKA24WZiN_TkoQl4sfkiYiPaWpw7aeFAMj48SEuKhbrAk2ywMM1b", {"user":"    'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=sxZqg-h5vKBm-E7iOx33R2DmcqWghKA24WZiN_TkoQl4sfkiYiPaWpw7aeFAMj48SEuKhbrAk2ywMM1b\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=sxZqg-h5vKBm-E7iOx33R2DmcqWghKA24WZiN_TkoQl4sfkiYiPaWpw7aeFAMj48SEuKhbrAk2ywMM1b\","}}
[info] >      'idempotency-key': 'ee57a532-8fe9-4982-a47f-825106867ef4', {"user":"    'idempotency-key': 'ee57a532-8fe9-4982-a47f-825106867ef4',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'idempotency-key': 'ee57a532-8fe9-4982-a47f-825106867ef4',"}}
[info] >      'original-request': 'req_lRzfaAYQEVPXU4', {"user":"    'original-request': 'req_lRzfaAYQEVPXU4',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'original-request': 'req_lRzfaAYQEVPXU4',"}}
[info] >      'request-id': 'req_lRzfaAYQEVPXU4', {"user":"    'request-id': 'req_lRzfaAYQEVPXU4',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'request-id': 'req_lRzfaAYQEVPXU4',"}}
[info] >      'stripe-version': '2025-02-24.acacia', {"user":"    'stripe-version': '2025-02-24.acacia',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'stripe-version': '2025-02-24.acacia',"}}
[info] >      vary: 'Origin', {"user":"    vary: 'Origin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     vary: 'Origin',"}}
[info] >      'x-stripe-priority-routing-enabled': 'true', {"user":"    'x-stripe-priority-routing-enabled': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-priority-routing-enabled': 'true',"}}
[info] >      'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"    'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >      'x-wc': 'ABGHI', {"user":"    'x-wc': 'ABGHI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-wc': 'ABGHI',"}}
[info] >      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"    'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    requestId: 'req_lRzfaAYQEVPXU4', {"user":"  requestId: 'req_lRzfaAYQEVPXU4',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   requestId: 'req_lRzfaAYQEVPXU4',"}}
[info] >    statusCode: 400, {"user":"  statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statusCode: 400,"}}
[info] >    charge: undefined, {"user":"  charge: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   charge: undefined,"}}
[info] >    decline_code: undefined, {"user":"  decline_code: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   decline_code: undefined,"}}
[info] >    payment_intent: undefined, {"user":"  payment_intent: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_intent: undefined,"}}
[info] >    payment_method: undefined, {"user":"  payment_method: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method: undefined,"}}
[info] >    setup_intent: undefined, {"user":"  setup_intent: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   setup_intent: undefined,"}}
[info] >    source: undefined {"user":"  source: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   source: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v22.11.0 {"user":"Node.js v22.11.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v22.11.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2025-04-28T13:11:33.671Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T13:11:33.671Z] [worker-us-central1-api-97c572eb-9767-4fb4-a6e8-ac4f4a5322ce]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-97c572eb-9767-4fb4-a6e8-ac4f4a5322ce]: exited"}}
[debug] [2025-04-28T13:11:33.671Z] [worker-us-central1-api-97c572eb-9767-4fb4-a6e8-ac4f4a5322ce]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-97c572eb-9767-4fb4-a6e8-ac4f4a5322ce]: FINISHED"}}
[debug] [2025-04-28T13:11:44.758Z] [work-queue] {"queuedWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T13:11:44.758Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T13:11:44.758Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T13:11:44.758Z"],"workRunningCount":1}
[debug] [2025-04-28T13:11:44.758Z] Accepted request POST /clone-f330b/us-central1/api/payments/create?total=79996 --> us-central1-api
[debug] [2025-04-28T13:11:44.760Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-04-28T13:11:44.760Z] [functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=79996, mapping to path=/payments/create?total=79996 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=79996, mapping to path=/payments/create?total=79996"}}
[debug] [2025-04-28T13:11:44.760Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2025-04-28T13:11:44.761Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2025-04-28T13:11:44.761Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[info] >  (node:64026) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead. {"user":"(node:64026) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m (node:64026) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead."}}
[info] >  (Use `node --trace-deprecation ...` to show where the warning was created) {"user":"(Use `node --trace-deprecation ...` to show where the warning was created)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m (Use `node --trace-deprecation ...` to show where the warning was created)"}}
[debug] [2025-04-28T13:11:45.379Z] [runtime-status] [64026] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.13.0","resolution":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [64026] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"8.13.0\",\"resolution\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-04-28T13:11:45.379Z] [runtime-status] [64026] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.11.0","resolution":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-functions/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [64026] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.11.0\",\"resolution\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-functions/lib/index.js\"}"}}
[warn] ⚠  The Cloud Functions emulator requires the module "firebase-functions" to be version >3.13.1 so your version is too old. You can probably fix this by running "npm install firebase-functions@latest" in your functions directory. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"The Cloud Functions emulator requires the module \"firebase-functions\" to be version >3.13.1 so your version is too old. You can probably fix this by running \"npm install firebase-functions@latest\" in your functions directory."}}
[info] i  functions: Your functions could not be parsed due to an issue with your node_modules (see above) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Your functions could not be parsed due to an issue with your node_modules (see above)"}}
[debug] [2025-04-28T13:11:45.467Z] [runtime-status] [64026] Functions runtime initialized. {"cwd":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions","node_version":"22.11.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [64026] Functions runtime initialized. {\"cwd\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions\",\"node_version\":\"22.11.0\"}"}}
[debug] [2025-04-28T13:11:45.467Z] [runtime-status] [64026] Listening to port: /var/folders/b8/2ktxw5yj1xz8mylspf3xppwr0000gn/T/fire_emu_f59d5fe0ebe325c8.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [64026] Listening to port: /var/folders/b8/2ktxw5yj1xz8mylspf3xppwr0000gn/T/fire_emu_f59d5fe0ebe325c8.sock"}}
[debug] [2025-04-28T13:11:45.477Z] [worker-us-central1-api-b1ebc6df-8598-41cc-8539-e38279b5b795]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-b1ebc6df-8598-41cc-8539-e38279b5b795]: IDLE"}}
[debug] [2025-04-28T13:11:45.477Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-04-28T13:11:45.477Z] [worker-us-central1-api-b1ebc6df-8598-41cc-8539-e38279b5b795]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-b1ebc6df-8598-41cc-8539-e38279b5b795]: BUSY"}}
[info] >  Payment Request Recieved BOOM!!! for this amount >>>  79996 {"user":"Payment Request Recieved BOOM!!! for this amount >>>  79996","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment Request Recieved BOOM!!! for this amount >>>  79996"}}
[info] >  paymentRECEIVED >>>  { {"user":"paymentRECEIVED >>>  {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m paymentRECEIVED >>>  {"}}
[info] >    id: 'pi_3RIrTJJlvCjqT1Et0RFoi4W2', {"user":"  id: 'pi_3RIrTJJlvCjqT1Et0RFoi4W2',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   id: 'pi_3RIrTJJlvCjqT1Et0RFoi4W2',"}}
[info] >    object: 'payment_intent', {"user":"  object: 'payment_intent',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   object: 'payment_intent',"}}
[info] >    amount: 79996, {"user":"  amount: 79996,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   amount: 79996,"}}
[info] >    amount_capturable: 0, {"user":"  amount_capturable: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   amount_capturable: 0,"}}
[info] >    amount_details: { tip: {} }, {"user":"  amount_details: { tip: {} },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   amount_details: { tip: {} },"}}
[info] >    amount_received: 0, {"user":"  amount_received: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   amount_received: 0,"}}
[info] >    application: null, {"user":"  application: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   application: null,"}}
[info] >    application_fee_amount: null, {"user":"  application_fee_amount: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   application_fee_amount: null,"}}
[info] >    automatic_payment_methods: { allow_redirects: 'always', enabled: true }, {"user":"  automatic_payment_methods: { allow_redirects: 'always', enabled: true },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   automatic_payment_methods: { allow_redirects: 'always', enabled: true },"}}
[info] >    canceled_at: null, {"user":"  canceled_at: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   canceled_at: null,"}}
[info] >    cancellation_reason: null, {"user":"  cancellation_reason: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   cancellation_reason: null,"}}
[info] >    capture_method: 'automatic_async', {"user":"  capture_method: 'automatic_async',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   capture_method: 'automatic_async',"}}
[info] >    client_secret: 'pi_3RIrTJJlvCjqT1Et0RFoi4W2_secret_NCE1r8GG6h42EelCfOvjiVj47', {"user":"  client_secret: 'pi_3RIrTJJlvCjqT1Et0RFoi4W2_secret_NCE1r8GG6h42EelCfOvjiVj47',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   client_secret: 'pi_3RIrTJJlvCjqT1Et0RFoi4W2_secret_NCE1r8GG6h42EelCfOvjiVj47',"}}
[info] >    confirmation_method: 'automatic', {"user":"  confirmation_method: 'automatic',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   confirmation_method: 'automatic',"}}
[info] >    created: 1745845905, {"user":"  created: 1745845905,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   created: 1745845905,"}}
[info] >    currency: 'usd', {"user":"  currency: 'usd',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   currency: 'usd',"}}
[info] >    customer: null, {"user":"  customer: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   customer: null,"}}
[info] >    description: null, {"user":"  description: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   description: null,"}}
[info] >    invoice: null, {"user":"  invoice: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   invoice: null,"}}
[info] >    last_payment_error: null, {"user":"  last_payment_error: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   last_payment_error: null,"}}
[info] >    latest_charge: null, {"user":"  latest_charge: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   latest_charge: null,"}}
[info] >    livemode: false, {"user":"  livemode: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   livemode: false,"}}
[info] >    metadata: {}, {"user":"  metadata: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   metadata: {},"}}
[info] >    next_action: null, {"user":"  next_action: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   next_action: null,"}}
[info] >    on_behalf_of: null, {"user":"  on_behalf_of: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   on_behalf_of: null,"}}
[info] >    payment_method: null, {"user":"  payment_method: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method: null,"}}
[info] >    payment_method_configuration_details: { id: 'pmc_1R1R5nJlvCjqT1EtYHXN7Kcf', parent: null }, {"user":"  payment_method_configuration_details: { id: 'pmc_1R1R5nJlvCjqT1EtYHXN7Kcf', parent: null },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method_configuration_details: { id: 'pmc_1R1R5nJlvCjqT1EtYHXN7Kcf', parent: null },"}}
[info] >    payment_method_options: { {"user":"  payment_method_options: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method_options: {"}}
[info] >      affirm: {}, {"user":"    affirm: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     affirm: {},"}}
[info] >      amazon_pay: { express_checkout_element_session_id: null }, {"user":"    amazon_pay: { express_checkout_element_session_id: null },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     amazon_pay: { express_checkout_element_session_id: null },"}}
[info] >      card: { {"user":"    card: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     card: {"}}
[info] >        installments: null, {"user":"      installments: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       installments: null,"}}
[info] >        mandate_options: null, {"user":"      mandate_options: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       mandate_options: null,"}}
[info] >        network: null, {"user":"      network: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       network: null,"}}
[info] >        request_three_d_secure: 'automatic' {"user":"      request_three_d_secure: 'automatic'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       request_three_d_secure: 'automatic'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      cashapp: {}, {"user":"    cashapp: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     cashapp: {},"}}
[info] >      klarna: { preferred_locale: null }, {"user":"    klarna: { preferred_locale: null },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     klarna: { preferred_locale: null },"}}
[info] >      link: { persistent_token: null } {"user":"    link: { persistent_token: null }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     link: { persistent_token: null }"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    payment_method_types: [ 'card', 'klarna', 'link', 'affirm', 'cashapp', 'amazon_pay' ], {"user":"  payment_method_types: [ 'card', 'klarna', 'link', 'affirm', 'cashapp', 'amazon_pay' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method_types: [ 'card', 'klarna', 'link', 'affirm', 'cashapp', 'amazon_pay' ],"}}
[info] >    processing: null, {"user":"  processing: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   processing: null,"}}
[info] >    receipt_email: null, {"user":"  receipt_email: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   receipt_email: null,"}}
[info] >    review: null, {"user":"  review: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   review: null,"}}
[info] >    setup_future_usage: null, {"user":"  setup_future_usage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   setup_future_usage: null,"}}
[info] >    shipping: null, {"user":"  shipping: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   shipping: null,"}}
[info] >    source: null, {"user":"  source: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   source: null,"}}
[info] >    statement_descriptor: null, {"user":"  statement_descriptor: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statement_descriptor: null,"}}
[info] >    statement_descriptor_suffix: null, {"user":"  statement_descriptor_suffix: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statement_descriptor_suffix: null,"}}
[info] >    status: 'requires_payment_method', {"user":"  status: 'requires_payment_method',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   status: 'requires_payment_method',"}}
[info] >    transfer_data: null, {"user":"  transfer_data: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   transfer_data: null,"}}
[info] >    transfer_group: null {"user":"  transfer_group: null","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   transfer_group: null"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2025-04-28T13:11:46.166Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 688.280292ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 688.280292ms"}}
[debug] [2025-04-28T13:11:46.166Z] [worker-us-central1-api-b1ebc6df-8598-41cc-8539-e38279b5b795]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-b1ebc6df-8598-41cc-8539-e38279b5b795]: IDLE"}}
[debug] [2025-04-28T13:11:46.166Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-04-28T13:11:46.166Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-04-28T13:11:46.166Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T13:12:50.814Z] [work-queue] {"queuedWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T13:12:50.814Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T13:12:50.814Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T13:12:50.814Z"],"workRunningCount":1}
[debug] [2025-04-28T13:12:50.814Z] Accepted request POST /clone-f330b/us-central1/api/payments/create?total=0 --> us-central1-api
[debug] [2025-04-28T13:12:50.816Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-04-28T13:12:50.816Z] [functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0"}}
[debug] [2025-04-28T13:12:50.816Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-04-28T13:12:50.817Z] [worker-us-central1-api-b1ebc6df-8598-41cc-8539-e38279b5b795]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-b1ebc6df-8598-41cc-8539-e38279b5b795]: BUSY"}}
[info] >  Payment Request Recieved BOOM!!! for this amount >>>  0 {"user":"Payment Request Recieved BOOM!!! for this amount >>>  0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment Request Recieved BOOM!!! for this amount >>>  0"}}
[info] >  /Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39 {"user":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m /Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39"}}
[info] >          return new StripeInvalidRequestError(rawStripeError); {"user":"        return new StripeInvalidRequestError(rawStripeError);","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         return new StripeInvalidRequestError(rawStripeError);"}}
[info] >                 ^ {"user":"               ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents {"user":"StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents"}}
[info] >      at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16) {"user":"    at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16)"}}
[info] >      at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33) {"user":"    at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33)"}}
[info] >      at Object.onceWrapper (node:events:632:28) {"user":"    at Object.onceWrapper (node:events:632:28)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Object.onceWrapper (node:events:632:28)"}}
[info] >      at IncomingMessage.emit (node:events:530:35) {"user":"    at IncomingMessage.emit (node:events:530:35)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.emit (node:events:530:35)"}}
[info] >      at endReadableNT (node:internal/streams/readable:1698:12) {"user":"    at endReadableNT (node:internal/streams/readable:1698:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at endReadableNT (node:internal/streams/readable:1698:12)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:90:21) { {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {"}}
[info] >    type: 'StripeInvalidRequestError', {"user":"  type: 'StripeInvalidRequestError',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'StripeInvalidRequestError',"}}
[info] >    raw: { {"user":"  raw: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   raw: {"}}
[info] >      code: 'parameter_invalid_integer', {"user":"    code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 'parameter_invalid_integer',"}}
[info] >      doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >      message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents', {"user":"    message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents',"}}
[info] >      param: 'amount', {"user":"    param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     param: 'amount',"}}
[info] >      request_log_url: 'https://dashboard.stripe.com/test/logs/req_t0UcZnfKzCXgCf?t=1745845971', {"user":"    request_log_url: 'https://dashboard.stripe.com/test/logs/req_t0UcZnfKzCXgCf?t=1745845971',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     request_log_url: 'https://dashboard.stripe.com/test/logs/req_t0UcZnfKzCXgCf?t=1745845971',"}}
[info] >      type: 'invalid_request_error', {"user":"    type: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     type: 'invalid_request_error',"}}
[info] >      headers: { {"user":"    headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     headers: {"}}
[info] >        server: 'nginx', {"user":"      server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       server: 'nginx',"}}
[info] >        date: 'Mon, 28 Apr 2025 13:12:51 GMT', {"user":"      date: 'Mon, 28 Apr 2025 13:12:51 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       date: 'Mon, 28 Apr 2025 13:12:51 GMT',"}}
[info] >        'content-type': 'application/json', {"user":"      'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-type': 'application/json',"}}
[info] >        'content-length': '663', {"user":"      'content-length': '663',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-length': '663',"}}
[info] >        connection: 'keep-alive', {"user":"      connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       connection: 'keep-alive',"}}
[info] >        'access-control-allow-credentials': 'true', {"user":"      'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-credentials': 'true',"}}
[info] >        'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE', {"user":"      'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',"}}
[info] >        'access-control-allow-origin': '*', {"user":"      'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-origin': '*',"}}
[info] >        'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >        'access-control-max-age': '300', {"user":"      'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-max-age': '300',"}}
[info] >        'cache-control': 'no-cache, no-store', {"user":"      'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cache-control': 'no-cache, no-store',"}}
[info] >        'content-security-policy': "base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=PE3s1xjtjdj5-AYvM-CywdF73J0TenGXM3ZVtoqTsa6XMBjsgSFqrwkHskIzresKUOwm9vB5UmXrJLLV", {"user":"      'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=PE3s1xjtjdj5-AYvM-CywdF73J0TenGXM3ZVtoqTsa6XMBjsgSFqrwkHskIzresKUOwm9vB5UmXrJLLV\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=PE3s1xjtjdj5-AYvM-CywdF73J0TenGXM3ZVtoqTsa6XMBjsgSFqrwkHskIzresKUOwm9vB5UmXrJLLV\","}}
[info] >        'idempotency-key': '4b1dfd39-7397-4caa-aac9-e3e1405d3ed2', {"user":"      'idempotency-key': '4b1dfd39-7397-4caa-aac9-e3e1405d3ed2',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'idempotency-key': '4b1dfd39-7397-4caa-aac9-e3e1405d3ed2',"}}
[info] >        'original-request': 'req_t0UcZnfKzCXgCf', {"user":"      'original-request': 'req_t0UcZnfKzCXgCf',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'original-request': 'req_t0UcZnfKzCXgCf',"}}
[info] >        'request-id': 'req_t0UcZnfKzCXgCf', {"user":"      'request-id': 'req_t0UcZnfKzCXgCf',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'request-id': 'req_t0UcZnfKzCXgCf',"}}
[info] >        'stripe-version': '2025-02-24.acacia', {"user":"      'stripe-version': '2025-02-24.acacia',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'stripe-version': '2025-02-24.acacia',"}}
[info] >        vary: 'Origin', {"user":"      vary: 'Origin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       vary: 'Origin',"}}
[info] >        'x-stripe-priority-routing-enabled': 'true', {"user":"      'x-stripe-priority-routing-enabled': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-priority-routing-enabled': 'true',"}}
[info] >        'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"      'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >        'x-wc': 'ABGHI', {"user":"      'x-wc': 'ABGHI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-wc': 'ABGHI',"}}
[info] >        'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      statusCode: 400, {"user":"    statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     statusCode: 400,"}}
[info] >      requestId: 'req_t0UcZnfKzCXgCf' {"user":"    requestId: 'req_t0UcZnfKzCXgCf'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     requestId: 'req_t0UcZnfKzCXgCf'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    rawType: 'invalid_request_error', {"user":"  rawType: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   rawType: 'invalid_request_error',"}}
[info] >    code: 'parameter_invalid_integer', {"user":"  code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'parameter_invalid_integer',"}}
[info] >    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"  doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >    param: 'amount', {"user":"  param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   param: 'amount',"}}
[info] >    detail: undefined, {"user":"  detail: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   detail: undefined,"}}
[info] >    headers: { {"user":"  headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   headers: {"}}
[info] >      server: 'nginx', {"user":"    server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     server: 'nginx',"}}
[info] >      date: 'Mon, 28 Apr 2025 13:12:51 GMT', {"user":"    date: 'Mon, 28 Apr 2025 13:12:51 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     date: 'Mon, 28 Apr 2025 13:12:51 GMT',"}}
[info] >      'content-type': 'application/json', {"user":"    'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-type': 'application/json',"}}
[info] >      'content-length': '663', {"user":"    'content-length': '663',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-length': '663',"}}
[info] >      connection: 'keep-alive', {"user":"    connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     connection: 'keep-alive',"}}
[info] >      'access-control-allow-credentials': 'true', {"user":"    'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-credentials': 'true',"}}
[info] >      'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE', {"user":"    'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',"}}
[info] >      'access-control-allow-origin': '*', {"user":"    'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-origin': '*',"}}
[info] >      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"    'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >      'access-control-max-age': '300', {"user":"    'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-max-age': '300',"}}
[info] >      'cache-control': 'no-cache, no-store', {"user":"    'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'cache-control': 'no-cache, no-store',"}}
[info] >      'content-security-policy': "base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=PE3s1xjtjdj5-AYvM-CywdF73J0TenGXM3ZVtoqTsa6XMBjsgSFqrwkHskIzresKUOwm9vB5UmXrJLLV", {"user":"    'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=PE3s1xjtjdj5-AYvM-CywdF73J0TenGXM3ZVtoqTsa6XMBjsgSFqrwkHskIzresKUOwm9vB5UmXrJLLV\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=PE3s1xjtjdj5-AYvM-CywdF73J0TenGXM3ZVtoqTsa6XMBjsgSFqrwkHskIzresKUOwm9vB5UmXrJLLV\","}}
[info] >      'idempotency-key': '4b1dfd39-7397-4caa-aac9-e3e1405d3ed2', {"user":"    'idempotency-key': '4b1dfd39-7397-4caa-aac9-e3e1405d3ed2',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'idempotency-key': '4b1dfd39-7397-4caa-aac9-e3e1405d3ed2',"}}
[info] >      'original-request': 'req_t0UcZnfKzCXgCf', {"user":"    'original-request': 'req_t0UcZnfKzCXgCf',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'original-request': 'req_t0UcZnfKzCXgCf',"}}
[info] >      'request-id': 'req_t0UcZnfKzCXgCf', {"user":"    'request-id': 'req_t0UcZnfKzCXgCf',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'request-id': 'req_t0UcZnfKzCXgCf',"}}
[info] >      'stripe-version': '2025-02-24.acacia', {"user":"    'stripe-version': '2025-02-24.acacia',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'stripe-version': '2025-02-24.acacia',"}}
[info] >      vary: 'Origin', {"user":"    vary: 'Origin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     vary: 'Origin',"}}
[info] >      'x-stripe-priority-routing-enabled': 'true', {"user":"    'x-stripe-priority-routing-enabled': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-priority-routing-enabled': 'true',"}}
[info] >      'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"    'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >      'x-wc': 'ABGHI', {"user":"    'x-wc': 'ABGHI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-wc': 'ABGHI',"}}
[info] >      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"    'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    requestId: 'req_t0UcZnfKzCXgCf', {"user":"  requestId: 'req_t0UcZnfKzCXgCf',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   requestId: 'req_t0UcZnfKzCXgCf',"}}
[info] >    statusCode: 400, {"user":"  statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statusCode: 400,"}}
[info] >    charge: undefined, {"user":"  charge: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   charge: undefined,"}}
[info] >    decline_code: undefined, {"user":"  decline_code: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   decline_code: undefined,"}}
[info] >    payment_intent: undefined, {"user":"  payment_intent: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_intent: undefined,"}}
[info] >    payment_method: undefined, {"user":"  payment_method: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method: undefined,"}}
[info] >    setup_intent: undefined, {"user":"  setup_intent: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   setup_intent: undefined,"}}
[info] >    source: undefined {"user":"  source: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   source: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v22.11.0 {"user":"Node.js v22.11.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v22.11.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2025-04-28T13:12:51.184Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T13:12:51.185Z] [worker-us-central1-api-b1ebc6df-8598-41cc-8539-e38279b5b795]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-b1ebc6df-8598-41cc-8539-e38279b5b795]: exited"}}
[debug] [2025-04-28T13:12:51.185Z] [worker-us-central1-api-b1ebc6df-8598-41cc-8539-e38279b5b795]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-b1ebc6df-8598-41cc-8539-e38279b5b795]: FINISHED"}}
[debug] [2025-04-28T13:21:14.170Z] [work-queue] {"queuedWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T13:21:14.170Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T13:21:14.170Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T13:21:14.170Z"],"workRunningCount":1}
[debug] [2025-04-28T13:21:14.170Z] Accepted request POST /clone-f330b/us-central1/api/payments/create?total=39998 --> us-central1-api
[debug] [2025-04-28T13:21:14.174Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-04-28T13:21:14.174Z] [functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=39998, mapping to path=/payments/create?total=39998 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=39998, mapping to path=/payments/create?total=39998"}}
[debug] [2025-04-28T13:21:14.175Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2025-04-28T13:21:14.177Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2025-04-28T13:21:14.177Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[info] >  (node:65332) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead. {"user":"(node:65332) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m (node:65332) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead."}}
[info] >  (Use `node --trace-deprecation ...` to show where the warning was created) {"user":"(Use `node --trace-deprecation ...` to show where the warning was created)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m (Use `node --trace-deprecation ...` to show where the warning was created)"}}
[debug] [2025-04-28T13:21:14.905Z] [runtime-status] [65332] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.13.0","resolution":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [65332] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"8.13.0\",\"resolution\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-04-28T13:21:14.906Z] [runtime-status] [65332] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.11.0","resolution":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-functions/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [65332] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.11.0\",\"resolution\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-functions/lib/index.js\"}"}}
[warn] ⚠  The Cloud Functions emulator requires the module "firebase-functions" to be version >3.13.1 so your version is too old. You can probably fix this by running "npm install firebase-functions@latest" in your functions directory. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"The Cloud Functions emulator requires the module \"firebase-functions\" to be version >3.13.1 so your version is too old. You can probably fix this by running \"npm install firebase-functions@latest\" in your functions directory."}}
[info] i  functions: Your functions could not be parsed due to an issue with your node_modules (see above) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Your functions could not be parsed due to an issue with your node_modules (see above)"}}
[debug] [2025-04-28T13:21:14.986Z] [runtime-status] [65332] Functions runtime initialized. {"cwd":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions","node_version":"22.11.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [65332] Functions runtime initialized. {\"cwd\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions\",\"node_version\":\"22.11.0\"}"}}
[debug] [2025-04-28T13:21:14.986Z] [runtime-status] [65332] Listening to port: /var/folders/b8/2ktxw5yj1xz8mylspf3xppwr0000gn/T/fire_emu_2f7dc6d82ec93928.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [65332] Listening to port: /var/folders/b8/2ktxw5yj1xz8mylspf3xppwr0000gn/T/fire_emu_2f7dc6d82ec93928.sock"}}
[debug] [2025-04-28T13:21:14.995Z] [worker-us-central1-api-5426dddd-6f60-4c28-abd4-424adae7b307]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-5426dddd-6f60-4c28-abd4-424adae7b307]: IDLE"}}
[debug] [2025-04-28T13:21:14.995Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-04-28T13:21:14.995Z] [worker-us-central1-api-5426dddd-6f60-4c28-abd4-424adae7b307]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-5426dddd-6f60-4c28-abd4-424adae7b307]: BUSY"}}
[info] >  Payment Request Recieved BOOM!!! for this amount >>>  39998 {"user":"Payment Request Recieved BOOM!!! for this amount >>>  39998","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment Request Recieved BOOM!!! for this amount >>>  39998"}}
[info] >  paymentRECEIVED >>>  { {"user":"paymentRECEIVED >>>  {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m paymentRECEIVED >>>  {"}}
[info] >    id: 'pi_3RIrcVJlvCjqT1Et1jm6ZAh2', {"user":"  id: 'pi_3RIrcVJlvCjqT1Et1jm6ZAh2',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   id: 'pi_3RIrcVJlvCjqT1Et1jm6ZAh2',"}}
[info] >    object: 'payment_intent', {"user":"  object: 'payment_intent',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   object: 'payment_intent',"}}
[info] >    amount: 39998, {"user":"  amount: 39998,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   amount: 39998,"}}
[info] >    amount_capturable: 0, {"user":"  amount_capturable: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   amount_capturable: 0,"}}
[info] >    amount_details: { tip: {} }, {"user":"  amount_details: { tip: {} },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   amount_details: { tip: {} },"}}
[info] >    amount_received: 0, {"user":"  amount_received: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   amount_received: 0,"}}
[info] >    application: null, {"user":"  application: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   application: null,"}}
[info] >    application_fee_amount: null, {"user":"  application_fee_amount: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   application_fee_amount: null,"}}
[info] >    automatic_payment_methods: { allow_redirects: 'always', enabled: true }, {"user":"  automatic_payment_methods: { allow_redirects: 'always', enabled: true },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   automatic_payment_methods: { allow_redirects: 'always', enabled: true },"}}
[info] >    canceled_at: null, {"user":"  canceled_at: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   canceled_at: null,"}}
[info] >    cancellation_reason: null, {"user":"  cancellation_reason: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   cancellation_reason: null,"}}
[info] >    capture_method: 'automatic_async', {"user":"  capture_method: 'automatic_async',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   capture_method: 'automatic_async',"}}
[info] >    client_secret: 'pi_3RIrcVJlvCjqT1Et1jm6ZAh2_secret_XKaKV216EyXxt7YY6l4qxvLMY', {"user":"  client_secret: 'pi_3RIrcVJlvCjqT1Et1jm6ZAh2_secret_XKaKV216EyXxt7YY6l4qxvLMY',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   client_secret: 'pi_3RIrcVJlvCjqT1Et1jm6ZAh2_secret_XKaKV216EyXxt7YY6l4qxvLMY',"}}
[info] >    confirmation_method: 'automatic', {"user":"  confirmation_method: 'automatic',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   confirmation_method: 'automatic',"}}
[info] >    created: 1745846475, {"user":"  created: 1745846475,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   created: 1745846475,"}}
[info] >    currency: 'usd', {"user":"  currency: 'usd',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   currency: 'usd',"}}
[info] >    customer: null, {"user":"  customer: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   customer: null,"}}
[info] >    description: null, {"user":"  description: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   description: null,"}}
[info] >    invoice: null, {"user":"  invoice: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   invoice: null,"}}
[info] >    last_payment_error: null, {"user":"  last_payment_error: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   last_payment_error: null,"}}
[info] >    latest_charge: null, {"user":"  latest_charge: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   latest_charge: null,"}}
[info] >    livemode: false, {"user":"  livemode: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   livemode: false,"}}
[info] >    metadata: {}, {"user":"  metadata: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   metadata: {},"}}
[info] >    next_action: null, {"user":"  next_action: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   next_action: null,"}}
[info] >    on_behalf_of: null, {"user":"  on_behalf_of: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   on_behalf_of: null,"}}
[info] >    payment_method: null, {"user":"  payment_method: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method: null,"}}
[info] >    payment_method_configuration_details: { id: 'pmc_1R1R5nJlvCjqT1EtYHXN7Kcf', parent: null }, {"user":"  payment_method_configuration_details: { id: 'pmc_1R1R5nJlvCjqT1EtYHXN7Kcf', parent: null },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method_configuration_details: { id: 'pmc_1R1R5nJlvCjqT1EtYHXN7Kcf', parent: null },"}}
[info] >    payment_method_options: { {"user":"  payment_method_options: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method_options: {"}}
[info] >      affirm: {}, {"user":"    affirm: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     affirm: {},"}}
[info] >      amazon_pay: { express_checkout_element_session_id: null }, {"user":"    amazon_pay: { express_checkout_element_session_id: null },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     amazon_pay: { express_checkout_element_session_id: null },"}}
[info] >      card: { {"user":"    card: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     card: {"}}
[info] >        installments: null, {"user":"      installments: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       installments: null,"}}
[info] >        mandate_options: null, {"user":"      mandate_options: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       mandate_options: null,"}}
[info] >        network: null, {"user":"      network: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       network: null,"}}
[info] >        request_three_d_secure: 'automatic' {"user":"      request_three_d_secure: 'automatic'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       request_three_d_secure: 'automatic'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      cashapp: {}, {"user":"    cashapp: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     cashapp: {},"}}
[info] >      klarna: { preferred_locale: null }, {"user":"    klarna: { preferred_locale: null },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     klarna: { preferred_locale: null },"}}
[info] >      link: { persistent_token: null } {"user":"    link: { persistent_token: null }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     link: { persistent_token: null }"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    payment_method_types: [ 'card', 'klarna', 'link', 'affirm', 'cashapp', 'amazon_pay' ], {"user":"  payment_method_types: [ 'card', 'klarna', 'link', 'affirm', 'cashapp', 'amazon_pay' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method_types: [ 'card', 'klarna', 'link', 'affirm', 'cashapp', 'amazon_pay' ],"}}
[info] >    processing: null, {"user":"  processing: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   processing: null,"}}
[info] >    receipt_email: null, {"user":"  receipt_email: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   receipt_email: null,"}}
[info] >    review: null, {"user":"  review: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   review: null,"}}
[info] >    setup_future_usage: null, {"user":"  setup_future_usage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   setup_future_usage: null,"}}
[info] >    shipping: null, {"user":"  shipping: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   shipping: null,"}}
[info] >    source: null, {"user":"  source: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   source: null,"}}
[info] >    statement_descriptor: null, {"user":"  statement_descriptor: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statement_descriptor: null,"}}
[info] >    statement_descriptor_suffix: null, {"user":"  statement_descriptor_suffix: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statement_descriptor_suffix: null,"}}
[info] >    status: 'requires_payment_method', {"user":"  status: 'requires_payment_method',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   status: 'requires_payment_method',"}}
[info] >    transfer_data: null, {"user":"  transfer_data: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   transfer_data: null,"}}
[info] >    transfer_group: null {"user":"  transfer_group: null","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   transfer_group: null"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2025-04-28T13:21:15.771Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 776.440125ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 776.440125ms"}}
[debug] [2025-04-28T13:21:15.772Z] [worker-us-central1-api-5426dddd-6f60-4c28-abd4-424adae7b307]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-5426dddd-6f60-4c28-abd4-424adae7b307]: IDLE"}}
[debug] [2025-04-28T13:21:15.773Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-04-28T13:21:15.773Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-04-28T13:21:15.773Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T13:21:41.120Z] [work-queue] {"queuedWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T13:21:41.120Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T13:21:41.121Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T13:21:41.120Z"],"workRunningCount":1}
[debug] [2025-04-28T13:21:41.121Z] Accepted request POST /clone-f330b/us-central1/api/payments/create?total=0 --> us-central1-api
[debug] [2025-04-28T13:21:41.123Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-04-28T13:21:41.123Z] [functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0"}}
[debug] [2025-04-28T13:21:41.123Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-04-28T13:21:41.123Z] [worker-us-central1-api-5426dddd-6f60-4c28-abd4-424adae7b307]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-5426dddd-6f60-4c28-abd4-424adae7b307]: BUSY"}}
[info] >  Payment Request Recieved BOOM!!! for this amount >>>  0 {"user":"Payment Request Recieved BOOM!!! for this amount >>>  0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment Request Recieved BOOM!!! for this amount >>>  0"}}
[info] >  /Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39 {"user":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m /Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39"}}
[info] >          return new StripeInvalidRequestError(rawStripeError); {"user":"        return new StripeInvalidRequestError(rawStripeError);","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         return new StripeInvalidRequestError(rawStripeError);"}}
[info] >                 ^ {"user":"               ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents {"user":"StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents"}}
[info] >      at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16) {"user":"    at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16)"}}
[info] >      at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33) {"user":"    at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33)"}}
[info] >      at Object.onceWrapper (node:events:632:28) {"user":"    at Object.onceWrapper (node:events:632:28)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Object.onceWrapper (node:events:632:28)"}}
[info] >      at IncomingMessage.emit (node:events:530:35) {"user":"    at IncomingMessage.emit (node:events:530:35)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.emit (node:events:530:35)"}}
[info] >      at endReadableNT (node:internal/streams/readable:1698:12) {"user":"    at endReadableNT (node:internal/streams/readable:1698:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at endReadableNT (node:internal/streams/readable:1698:12)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:90:21) { {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {"}}
[info] >    type: 'StripeInvalidRequestError', {"user":"  type: 'StripeInvalidRequestError',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'StripeInvalidRequestError',"}}
[info] >    raw: { {"user":"  raw: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   raw: {"}}
[info] >      code: 'parameter_invalid_integer', {"user":"    code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 'parameter_invalid_integer',"}}
[info] >      doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >      message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents', {"user":"    message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents',"}}
[info] >      param: 'amount', {"user":"    param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     param: 'amount',"}}
[info] >      request_log_url: 'https://dashboard.stripe.com/test/logs/req_Hbs11feYxpbH0C?t=1745846501', {"user":"    request_log_url: 'https://dashboard.stripe.com/test/logs/req_Hbs11feYxpbH0C?t=1745846501',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     request_log_url: 'https://dashboard.stripe.com/test/logs/req_Hbs11feYxpbH0C?t=1745846501',"}}
[info] >      type: 'invalid_request_error', {"user":"    type: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     type: 'invalid_request_error',"}}
[info] >      headers: { {"user":"    headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     headers: {"}}
[info] >        server: 'nginx', {"user":"      server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       server: 'nginx',"}}
[info] >        date: 'Mon, 28 Apr 2025 13:21:41 GMT', {"user":"      date: 'Mon, 28 Apr 2025 13:21:41 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       date: 'Mon, 28 Apr 2025 13:21:41 GMT',"}}
[info] >        'content-type': 'application/json', {"user":"      'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-type': 'application/json',"}}
[info] >        'content-length': '663', {"user":"      'content-length': '663',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-length': '663',"}}
[info] >        connection: 'keep-alive', {"user":"      connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       connection: 'keep-alive',"}}
[info] >        'access-control-allow-credentials': 'true', {"user":"      'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-credentials': 'true',"}}
[info] >        'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE', {"user":"      'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',"}}
[info] >        'access-control-allow-origin': '*', {"user":"      'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-origin': '*',"}}
[info] >        'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >        'access-control-max-age': '300', {"user":"      'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-max-age': '300',"}}
[info] >        'cache-control': 'no-cache, no-store', {"user":"      'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cache-control': 'no-cache, no-store',"}}
[info] >        'content-security-policy': "base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=eyPXjZAs45V1jo6w2He8d9Oj23vMwBVNG2aXAGCGinSuQpJeEAYvIkZ6bdrWJGBp3siVQudswrPZNq1O", {"user":"      'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=eyPXjZAs45V1jo6w2He8d9Oj23vMwBVNG2aXAGCGinSuQpJeEAYvIkZ6bdrWJGBp3siVQudswrPZNq1O\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=eyPXjZAs45V1jo6w2He8d9Oj23vMwBVNG2aXAGCGinSuQpJeEAYvIkZ6bdrWJGBp3siVQudswrPZNq1O\","}}
[info] >        'idempotency-key': 'd6aa5884-4f0c-494c-9258-cbb3ef72f816', {"user":"      'idempotency-key': 'd6aa5884-4f0c-494c-9258-cbb3ef72f816',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'idempotency-key': 'd6aa5884-4f0c-494c-9258-cbb3ef72f816',"}}
[info] >        'original-request': 'req_Hbs11feYxpbH0C', {"user":"      'original-request': 'req_Hbs11feYxpbH0C',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'original-request': 'req_Hbs11feYxpbH0C',"}}
[info] >        'request-id': 'req_Hbs11feYxpbH0C', {"user":"      'request-id': 'req_Hbs11feYxpbH0C',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'request-id': 'req_Hbs11feYxpbH0C',"}}
[info] >        'stripe-version': '2025-02-24.acacia', {"user":"      'stripe-version': '2025-02-24.acacia',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'stripe-version': '2025-02-24.acacia',"}}
[info] >        vary: 'Origin', {"user":"      vary: 'Origin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       vary: 'Origin',"}}
[info] >        'x-stripe-priority-routing-enabled': 'true', {"user":"      'x-stripe-priority-routing-enabled': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-priority-routing-enabled': 'true',"}}
[info] >        'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"      'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >        'x-wc': 'ABGHI', {"user":"      'x-wc': 'ABGHI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-wc': 'ABGHI',"}}
[info] >        'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      statusCode: 400, {"user":"    statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     statusCode: 400,"}}
[info] >      requestId: 'req_Hbs11feYxpbH0C' {"user":"    requestId: 'req_Hbs11feYxpbH0C'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     requestId: 'req_Hbs11feYxpbH0C'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    rawType: 'invalid_request_error', {"user":"  rawType: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   rawType: 'invalid_request_error',"}}
[info] >    code: 'parameter_invalid_integer', {"user":"  code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'parameter_invalid_integer',"}}
[info] >    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"  doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >    param: 'amount', {"user":"  param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   param: 'amount',"}}
[info] >    detail: undefined, {"user":"  detail: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   detail: undefined,"}}
[info] >    headers: { {"user":"  headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   headers: {"}}
[info] >      server: 'nginx', {"user":"    server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     server: 'nginx',"}}
[info] >      date: 'Mon, 28 Apr 2025 13:21:41 GMT', {"user":"    date: 'Mon, 28 Apr 2025 13:21:41 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     date: 'Mon, 28 Apr 2025 13:21:41 GMT',"}}
[info] >      'content-type': 'application/json', {"user":"    'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-type': 'application/json',"}}
[info] >      'content-length': '663', {"user":"    'content-length': '663',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-length': '663',"}}
[info] >      connection: 'keep-alive', {"user":"    connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     connection: 'keep-alive',"}}
[info] >      'access-control-allow-credentials': 'true', {"user":"    'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-credentials': 'true',"}}
[info] >      'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE', {"user":"    'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',"}}
[info] >      'access-control-allow-origin': '*', {"user":"    'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-origin': '*',"}}
[info] >      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"    'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >      'access-control-max-age': '300', {"user":"    'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-max-age': '300',"}}
[info] >      'cache-control': 'no-cache, no-store', {"user":"    'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'cache-control': 'no-cache, no-store',"}}
[info] >      'content-security-policy': "base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=eyPXjZAs45V1jo6w2He8d9Oj23vMwBVNG2aXAGCGinSuQpJeEAYvIkZ6bdrWJGBp3siVQudswrPZNq1O", {"user":"    'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=eyPXjZAs45V1jo6w2He8d9Oj23vMwBVNG2aXAGCGinSuQpJeEAYvIkZ6bdrWJGBp3siVQudswrPZNq1O\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=eyPXjZAs45V1jo6w2He8d9Oj23vMwBVNG2aXAGCGinSuQpJeEAYvIkZ6bdrWJGBp3siVQudswrPZNq1O\","}}
[info] >      'idempotency-key': 'd6aa5884-4f0c-494c-9258-cbb3ef72f816', {"user":"    'idempotency-key': 'd6aa5884-4f0c-494c-9258-cbb3ef72f816',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'idempotency-key': 'd6aa5884-4f0c-494c-9258-cbb3ef72f816',"}}
[info] >      'original-request': 'req_Hbs11feYxpbH0C', {"user":"    'original-request': 'req_Hbs11feYxpbH0C',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'original-request': 'req_Hbs11feYxpbH0C',"}}
[info] >      'request-id': 'req_Hbs11feYxpbH0C', {"user":"    'request-id': 'req_Hbs11feYxpbH0C',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'request-id': 'req_Hbs11feYxpbH0C',"}}
[info] >      'stripe-version': '2025-02-24.acacia', {"user":"    'stripe-version': '2025-02-24.acacia',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'stripe-version': '2025-02-24.acacia',"}}
[info] >      vary: 'Origin', {"user":"    vary: 'Origin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     vary: 'Origin',"}}
[info] >      'x-stripe-priority-routing-enabled': 'true', {"user":"    'x-stripe-priority-routing-enabled': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-priority-routing-enabled': 'true',"}}
[info] >      'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"    'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >      'x-wc': 'ABGHI', {"user":"    'x-wc': 'ABGHI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-wc': 'ABGHI',"}}
[info] >      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"    'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    requestId: 'req_Hbs11feYxpbH0C', {"user":"  requestId: 'req_Hbs11feYxpbH0C',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   requestId: 'req_Hbs11feYxpbH0C',"}}
[info] >    statusCode: 400, {"user":"  statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statusCode: 400,"}}
[info] >    charge: undefined, {"user":"  charge: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   charge: undefined,"}}
[info] >    decline_code: undefined, {"user":"  decline_code: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   decline_code: undefined,"}}
[info] >    payment_intent: undefined, {"user":"  payment_intent: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_intent: undefined,"}}
[info] >    payment_method: undefined, {"user":"  payment_method: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method: undefined,"}}
[info] >    setup_intent: undefined, {"user":"  setup_intent: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   setup_intent: undefined,"}}
[info] >    source: undefined {"user":"  source: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   source: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v22.11.0 {"user":"Node.js v22.11.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v22.11.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2025-04-28T13:21:41.475Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T13:21:41.475Z] [worker-us-central1-api-5426dddd-6f60-4c28-abd4-424adae7b307]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-5426dddd-6f60-4c28-abd4-424adae7b307]: exited"}}
[debug] [2025-04-28T13:21:41.475Z] [worker-us-central1-api-5426dddd-6f60-4c28-abd4-424adae7b307]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-5426dddd-6f60-4c28-abd4-424adae7b307]: FINISHED"}}
[debug] [2025-04-28T13:26:51.108Z] [work-queue] {"queuedWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T13:26:51.107Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T13:26:51.108Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T13:26:51.107Z"],"workRunningCount":1}
[debug] [2025-04-28T13:26:51.108Z] Accepted request POST /clone-f330b/us-central1/api/payments/create?total=39998 --> us-central1-api
[debug] [2025-04-28T13:26:51.112Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-04-28T13:26:51.113Z] [functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=39998, mapping to path=/payments/create?total=39998 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=39998, mapping to path=/payments/create?total=39998"}}
[debug] [2025-04-28T13:26:51.113Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2025-04-28T13:26:51.116Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2025-04-28T13:26:51.116Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[info] >  (node:66111) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead. {"user":"(node:66111) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m (node:66111) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead."}}
[info] >  (Use `node --trace-deprecation ...` to show where the warning was created) {"user":"(Use `node --trace-deprecation ...` to show where the warning was created)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m (Use `node --trace-deprecation ...` to show where the warning was created)"}}
[debug] [2025-04-28T13:26:51.880Z] [runtime-status] [66111] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.13.0","resolution":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [66111] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"8.13.0\",\"resolution\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-04-28T13:26:51.880Z] [runtime-status] [66111] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.11.0","resolution":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-functions/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [66111] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.11.0\",\"resolution\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-functions/lib/index.js\"}"}}
[warn] ⚠  The Cloud Functions emulator requires the module "firebase-functions" to be version >3.13.1 so your version is too old. You can probably fix this by running "npm install firebase-functions@latest" in your functions directory. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"The Cloud Functions emulator requires the module \"firebase-functions\" to be version >3.13.1 so your version is too old. You can probably fix this by running \"npm install firebase-functions@latest\" in your functions directory."}}
[info] i  functions: Your functions could not be parsed due to an issue with your node_modules (see above) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Your functions could not be parsed due to an issue with your node_modules (see above)"}}
[debug] [2025-04-28T13:26:51.964Z] [runtime-status] [66111] Functions runtime initialized. {"cwd":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions","node_version":"22.11.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [66111] Functions runtime initialized. {\"cwd\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions\",\"node_version\":\"22.11.0\"}"}}
[debug] [2025-04-28T13:26:51.964Z] [runtime-status] [66111] Listening to port: /var/folders/b8/2ktxw5yj1xz8mylspf3xppwr0000gn/T/fire_emu_3ab951c8ee8fe445.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [66111] Listening to port: /var/folders/b8/2ktxw5yj1xz8mylspf3xppwr0000gn/T/fire_emu_3ab951c8ee8fe445.sock"}}
[debug] [2025-04-28T13:26:52.038Z] [worker-us-central1-api-893a47c2-fb7b-490e-9304-4523a43d72da]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-893a47c2-fb7b-490e-9304-4523a43d72da]: IDLE"}}
[debug] [2025-04-28T13:26:52.038Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-04-28T13:26:52.038Z] [worker-us-central1-api-893a47c2-fb7b-490e-9304-4523a43d72da]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-893a47c2-fb7b-490e-9304-4523a43d72da]: BUSY"}}
[info] >  Payment Request Recieved BOOM!!! for this amount >>>  39998 {"user":"Payment Request Recieved BOOM!!! for this amount >>>  39998","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment Request Recieved BOOM!!! for this amount >>>  39998"}}
[info] >  paymentRECEIVED >>>  { {"user":"paymentRECEIVED >>>  {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m paymentRECEIVED >>>  {"}}
[info] >    id: 'pi_3RIrhwJlvCjqT1Et1BXZlYfZ', {"user":"  id: 'pi_3RIrhwJlvCjqT1Et1BXZlYfZ',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   id: 'pi_3RIrhwJlvCjqT1Et1BXZlYfZ',"}}
[info] >    object: 'payment_intent', {"user":"  object: 'payment_intent',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   object: 'payment_intent',"}}
[info] >    amount: 39998, {"user":"  amount: 39998,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   amount: 39998,"}}
[info] >    amount_capturable: 0, {"user":"  amount_capturable: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   amount_capturable: 0,"}}
[info] >    amount_details: { tip: {} }, {"user":"  amount_details: { tip: {} },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   amount_details: { tip: {} },"}}
[info] >    amount_received: 0, {"user":"  amount_received: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   amount_received: 0,"}}
[info] >    application: null, {"user":"  application: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   application: null,"}}
[info] >    application_fee_amount: null, {"user":"  application_fee_amount: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   application_fee_amount: null,"}}
[info] >    automatic_payment_methods: { allow_redirects: 'always', enabled: true }, {"user":"  automatic_payment_methods: { allow_redirects: 'always', enabled: true },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   automatic_payment_methods: { allow_redirects: 'always', enabled: true },"}}
[info] >    canceled_at: null, {"user":"  canceled_at: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   canceled_at: null,"}}
[info] >    cancellation_reason: null, {"user":"  cancellation_reason: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   cancellation_reason: null,"}}
[info] >    capture_method: 'automatic_async', {"user":"  capture_method: 'automatic_async',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   capture_method: 'automatic_async',"}}
[info] >    client_secret: 'pi_3RIrhwJlvCjqT1Et1BXZlYfZ_secret_d38z3QpV5OViuHiY7j5403bNO', {"user":"  client_secret: 'pi_3RIrhwJlvCjqT1Et1BXZlYfZ_secret_d38z3QpV5OViuHiY7j5403bNO',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   client_secret: 'pi_3RIrhwJlvCjqT1Et1BXZlYfZ_secret_d38z3QpV5OViuHiY7j5403bNO',"}}
[info] >    confirmation_method: 'automatic', {"user":"  confirmation_method: 'automatic',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   confirmation_method: 'automatic',"}}
[info] >    created: 1745846812, {"user":"  created: 1745846812,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   created: 1745846812,"}}
[info] >    currency: 'usd', {"user":"  currency: 'usd',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   currency: 'usd',"}}
[info] >    customer: null, {"user":"  customer: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   customer: null,"}}
[info] >    description: null, {"user":"  description: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   description: null,"}}
[info] >    invoice: null, {"user":"  invoice: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   invoice: null,"}}
[info] >    last_payment_error: null, {"user":"  last_payment_error: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   last_payment_error: null,"}}
[info] >    latest_charge: null, {"user":"  latest_charge: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   latest_charge: null,"}}
[info] >    livemode: false, {"user":"  livemode: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   livemode: false,"}}
[info] >    metadata: {}, {"user":"  metadata: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   metadata: {},"}}
[info] >    next_action: null, {"user":"  next_action: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   next_action: null,"}}
[info] >    on_behalf_of: null, {"user":"  on_behalf_of: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   on_behalf_of: null,"}}
[info] >    payment_method: null, {"user":"  payment_method: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method: null,"}}
[info] >    payment_method_configuration_details: { id: 'pmc_1R1R5nJlvCjqT1EtYHXN7Kcf', parent: null }, {"user":"  payment_method_configuration_details: { id: 'pmc_1R1R5nJlvCjqT1EtYHXN7Kcf', parent: null },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method_configuration_details: { id: 'pmc_1R1R5nJlvCjqT1EtYHXN7Kcf', parent: null },"}}
[info] >    payment_method_options: { {"user":"  payment_method_options: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method_options: {"}}
[info] >      affirm: {}, {"user":"    affirm: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     affirm: {},"}}
[info] >      amazon_pay: { express_checkout_element_session_id: null }, {"user":"    amazon_pay: { express_checkout_element_session_id: null },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     amazon_pay: { express_checkout_element_session_id: null },"}}
[info] >      card: { {"user":"    card: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     card: {"}}
[info] >        installments: null, {"user":"      installments: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       installments: null,"}}
[info] >        mandate_options: null, {"user":"      mandate_options: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       mandate_options: null,"}}
[info] >        network: null, {"user":"      network: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       network: null,"}}
[info] >        request_three_d_secure: 'automatic' {"user":"      request_three_d_secure: 'automatic'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       request_three_d_secure: 'automatic'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      cashapp: {}, {"user":"    cashapp: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     cashapp: {},"}}
[info] >      klarna: { preferred_locale: null }, {"user":"    klarna: { preferred_locale: null },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     klarna: { preferred_locale: null },"}}
[info] >      link: { persistent_token: null } {"user":"    link: { persistent_token: null }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     link: { persistent_token: null }"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    payment_method_types: [ 'card', 'klarna', 'link', 'affirm', 'cashapp', 'amazon_pay' ], {"user":"  payment_method_types: [ 'card', 'klarna', 'link', 'affirm', 'cashapp', 'amazon_pay' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method_types: [ 'card', 'klarna', 'link', 'affirm', 'cashapp', 'amazon_pay' ],"}}
[info] >    processing: null, {"user":"  processing: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   processing: null,"}}
[info] >    receipt_email: null, {"user":"  receipt_email: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   receipt_email: null,"}}
[info] >    review: null, {"user":"  review: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   review: null,"}}
[info] >    setup_future_usage: null, {"user":"  setup_future_usage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   setup_future_usage: null,"}}
[info] >    shipping: null, {"user":"  shipping: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   shipping: null,"}}
[info] >    source: null, {"user":"  source: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   source: null,"}}
[info] >    statement_descriptor: null, {"user":"  statement_descriptor: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statement_descriptor: null,"}}
[info] >    statement_descriptor_suffix: null, {"user":"  statement_descriptor_suffix: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statement_descriptor_suffix: null,"}}
[info] >    status: 'requires_payment_method', {"user":"  status: 'requires_payment_method',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   status: 'requires_payment_method',"}}
[info] >    transfer_data: null, {"user":"  transfer_data: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   transfer_data: null,"}}
[info] >    transfer_group: null {"user":"  transfer_group: null","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   transfer_group: null"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2025-04-28T13:26:52.719Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 680.386125ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 680.386125ms"}}
[debug] [2025-04-28T13:26:52.719Z] [worker-us-central1-api-893a47c2-fb7b-490e-9304-4523a43d72da]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-893a47c2-fb7b-490e-9304-4523a43d72da]: IDLE"}}
[debug] [2025-04-28T13:26:52.719Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-04-28T13:26:52.719Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-04-28T13:26:52.719Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T13:27:45.386Z] [work-queue] {"queuedWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T13:27:45.386Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T13:27:45.386Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T13:27:45.386Z"],"workRunningCount":1}
[debug] [2025-04-28T13:27:45.386Z] Accepted request POST /clone-f330b/us-central1/api/payments/create?total=0 --> us-central1-api
[debug] [2025-04-28T13:27:45.388Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-04-28T13:27:45.388Z] [functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0"}}
[debug] [2025-04-28T13:27:45.388Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-04-28T13:27:45.389Z] [worker-us-central1-api-893a47c2-fb7b-490e-9304-4523a43d72da]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-893a47c2-fb7b-490e-9304-4523a43d72da]: BUSY"}}
[info] >  Payment Request Recieved BOOM!!! for this amount >>>  0 {"user":"Payment Request Recieved BOOM!!! for this amount >>>  0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment Request Recieved BOOM!!! for this amount >>>  0"}}
[info] >  /Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39 {"user":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m /Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39"}}
[info] >          return new StripeInvalidRequestError(rawStripeError); {"user":"        return new StripeInvalidRequestError(rawStripeError);","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         return new StripeInvalidRequestError(rawStripeError);"}}
[info] >                 ^ {"user":"               ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents {"user":"StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents"}}
[info] >      at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16) {"user":"    at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16)"}}
[info] >      at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33) {"user":"    at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33)"}}
[info] >      at Object.onceWrapper (node:events:632:28) {"user":"    at Object.onceWrapper (node:events:632:28)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Object.onceWrapper (node:events:632:28)"}}
[info] >      at IncomingMessage.emit (node:events:530:35) {"user":"    at IncomingMessage.emit (node:events:530:35)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.emit (node:events:530:35)"}}
[info] >      at endReadableNT (node:internal/streams/readable:1698:12) {"user":"    at endReadableNT (node:internal/streams/readable:1698:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at endReadableNT (node:internal/streams/readable:1698:12)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:90:21) { {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {"}}
[info] >    type: 'StripeInvalidRequestError', {"user":"  type: 'StripeInvalidRequestError',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'StripeInvalidRequestError',"}}
[info] >    raw: { {"user":"  raw: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   raw: {"}}
[info] >      code: 'parameter_invalid_integer', {"user":"    code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 'parameter_invalid_integer',"}}
[info] >      doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >      message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents', {"user":"    message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents',"}}
[info] >      param: 'amount', {"user":"    param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     param: 'amount',"}}
[info] >      request_log_url: 'https://dashboard.stripe.com/test/logs/req_MiYqAYYqU3mqiK?t=1745846865', {"user":"    request_log_url: 'https://dashboard.stripe.com/test/logs/req_MiYqAYYqU3mqiK?t=1745846865',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     request_log_url: 'https://dashboard.stripe.com/test/logs/req_MiYqAYYqU3mqiK?t=1745846865',"}}
[info] >      type: 'invalid_request_error', {"user":"    type: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     type: 'invalid_request_error',"}}
[info] >      headers: { {"user":"    headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     headers: {"}}
[info] >        server: 'nginx', {"user":"      server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       server: 'nginx',"}}
[info] >        date: 'Mon, 28 Apr 2025 13:27:45 GMT', {"user":"      date: 'Mon, 28 Apr 2025 13:27:45 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       date: 'Mon, 28 Apr 2025 13:27:45 GMT',"}}
[info] >        'content-type': 'application/json', {"user":"      'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-type': 'application/json',"}}
[info] >        'content-length': '663', {"user":"      'content-length': '663',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-length': '663',"}}
[info] >        connection: 'keep-alive', {"user":"      connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       connection: 'keep-alive',"}}
[info] >        'access-control-allow-credentials': 'true', {"user":"      'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-credentials': 'true',"}}
[info] >        'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE', {"user":"      'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',"}}
[info] >        'access-control-allow-origin': '*', {"user":"      'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-origin': '*',"}}
[info] >        'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >        'access-control-max-age': '300', {"user":"      'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-max-age': '300',"}}
[info] >        'cache-control': 'no-cache, no-store', {"user":"      'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cache-control': 'no-cache, no-store',"}}
[info] >        'content-security-policy': "base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=u339KKapRSG5hOGW8RKrJHczjVy2eZYh7IXDOfiTGUdOjceD1tP2SMjzRHZVv4LiiS6r832_2LWjGXbj", {"user":"      'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=u339KKapRSG5hOGW8RKrJHczjVy2eZYh7IXDOfiTGUdOjceD1tP2SMjzRHZVv4LiiS6r832_2LWjGXbj\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=u339KKapRSG5hOGW8RKrJHczjVy2eZYh7IXDOfiTGUdOjceD1tP2SMjzRHZVv4LiiS6r832_2LWjGXbj\","}}
[info] >        'idempotency-key': 'c362a61b-a38a-4c9a-8f2e-ead1260bacc7', {"user":"      'idempotency-key': 'c362a61b-a38a-4c9a-8f2e-ead1260bacc7',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'idempotency-key': 'c362a61b-a38a-4c9a-8f2e-ead1260bacc7',"}}
[info] >        'original-request': 'req_MiYqAYYqU3mqiK', {"user":"      'original-request': 'req_MiYqAYYqU3mqiK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'original-request': 'req_MiYqAYYqU3mqiK',"}}
[info] >        'request-id': 'req_MiYqAYYqU3mqiK', {"user":"      'request-id': 'req_MiYqAYYqU3mqiK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'request-id': 'req_MiYqAYYqU3mqiK',"}}
[info] >        'stripe-version': '2025-02-24.acacia', {"user":"      'stripe-version': '2025-02-24.acacia',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'stripe-version': '2025-02-24.acacia',"}}
[info] >        vary: 'Origin', {"user":"      vary: 'Origin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       vary: 'Origin',"}}
[info] >        'x-stripe-priority-routing-enabled': 'true', {"user":"      'x-stripe-priority-routing-enabled': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-priority-routing-enabled': 'true',"}}
[info] >        'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"      'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >        'x-wc': 'ABGHI', {"user":"      'x-wc': 'ABGHI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-wc': 'ABGHI',"}}
[info] >        'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      statusCode: 400, {"user":"    statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     statusCode: 400,"}}
[info] >      requestId: 'req_MiYqAYYqU3mqiK' {"user":"    requestId: 'req_MiYqAYYqU3mqiK'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     requestId: 'req_MiYqAYYqU3mqiK'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    rawType: 'invalid_request_error', {"user":"  rawType: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   rawType: 'invalid_request_error',"}}
[info] >    code: 'parameter_invalid_integer', {"user":"  code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'parameter_invalid_integer',"}}
[info] >    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"  doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >    param: 'amount', {"user":"  param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   param: 'amount',"}}
[info] >    detail: undefined, {"user":"  detail: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   detail: undefined,"}}
[info] >    headers: { {"user":"  headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   headers: {"}}
[info] >      server: 'nginx', {"user":"    server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     server: 'nginx',"}}
[info] >      date: 'Mon, 28 Apr 2025 13:27:45 GMT', {"user":"    date: 'Mon, 28 Apr 2025 13:27:45 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     date: 'Mon, 28 Apr 2025 13:27:45 GMT',"}}
[info] >      'content-type': 'application/json', {"user":"    'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-type': 'application/json',"}}
[info] >      'content-length': '663', {"user":"    'content-length': '663',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-length': '663',"}}
[info] >      connection: 'keep-alive', {"user":"    connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     connection: 'keep-alive',"}}
[info] >      'access-control-allow-credentials': 'true', {"user":"    'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-credentials': 'true',"}}
[info] >      'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE', {"user":"    'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',"}}
[info] >      'access-control-allow-origin': '*', {"user":"    'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-origin': '*',"}}
[info] >      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"    'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >      'access-control-max-age': '300', {"user":"    'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-max-age': '300',"}}
[info] >      'cache-control': 'no-cache, no-store', {"user":"    'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'cache-control': 'no-cache, no-store',"}}
[info] >      'content-security-policy': "base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=u339KKapRSG5hOGW8RKrJHczjVy2eZYh7IXDOfiTGUdOjceD1tP2SMjzRHZVv4LiiS6r832_2LWjGXbj", {"user":"    'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=u339KKapRSG5hOGW8RKrJHczjVy2eZYh7IXDOfiTGUdOjceD1tP2SMjzRHZVv4LiiS6r832_2LWjGXbj\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=u339KKapRSG5hOGW8RKrJHczjVy2eZYh7IXDOfiTGUdOjceD1tP2SMjzRHZVv4LiiS6r832_2LWjGXbj\","}}
[info] >      'idempotency-key': 'c362a61b-a38a-4c9a-8f2e-ead1260bacc7', {"user":"    'idempotency-key': 'c362a61b-a38a-4c9a-8f2e-ead1260bacc7',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'idempotency-key': 'c362a61b-a38a-4c9a-8f2e-ead1260bacc7',"}}
[info] >      'original-request': 'req_MiYqAYYqU3mqiK', {"user":"    'original-request': 'req_MiYqAYYqU3mqiK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'original-request': 'req_MiYqAYYqU3mqiK',"}}
[info] >      'request-id': 'req_MiYqAYYqU3mqiK', {"user":"    'request-id': 'req_MiYqAYYqU3mqiK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'request-id': 'req_MiYqAYYqU3mqiK',"}}
[info] >      'stripe-version': '2025-02-24.acacia', {"user":"    'stripe-version': '2025-02-24.acacia',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'stripe-version': '2025-02-24.acacia',"}}
[info] >      vary: 'Origin', {"user":"    vary: 'Origin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     vary: 'Origin',"}}
[info] >      'x-stripe-priority-routing-enabled': 'true', {"user":"    'x-stripe-priority-routing-enabled': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-priority-routing-enabled': 'true',"}}
[info] >      'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"    'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >      'x-wc': 'ABGHI', {"user":"    'x-wc': 'ABGHI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-wc': 'ABGHI',"}}
[info] >      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"    'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    requestId: 'req_MiYqAYYqU3mqiK', {"user":"  requestId: 'req_MiYqAYYqU3mqiK',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   requestId: 'req_MiYqAYYqU3mqiK',"}}
[info] >    statusCode: 400, {"user":"  statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statusCode: 400,"}}
[info] >    charge: undefined, {"user":"  charge: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   charge: undefined,"}}
[info] >    decline_code: undefined, {"user":"  decline_code: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   decline_code: undefined,"}}
[info] >    payment_intent: undefined, {"user":"  payment_intent: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_intent: undefined,"}}
[info] >    payment_method: undefined, {"user":"  payment_method: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method: undefined,"}}
[info] >    setup_intent: undefined, {"user":"  setup_intent: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   setup_intent: undefined,"}}
[info] >    source: undefined {"user":"  source: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   source: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v22.11.0 {"user":"Node.js v22.11.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v22.11.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2025-04-28T13:27:45.741Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T13:27:45.741Z] [worker-us-central1-api-893a47c2-fb7b-490e-9304-4523a43d72da]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-893a47c2-fb7b-490e-9304-4523a43d72da]: exited"}}
[debug] [2025-04-28T13:27:45.741Z] [worker-us-central1-api-893a47c2-fb7b-490e-9304-4523a43d72da]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-893a47c2-fb7b-490e-9304-4523a43d72da]: FINISHED"}}
[debug] [2025-04-28T13:29:51.793Z] [work-queue] {"queuedWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T13:29:51.793Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T13:29:51.794Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T13:29:51.793Z"],"workRunningCount":1}
[debug] [2025-04-28T13:29:51.794Z] Accepted request POST /clone-f330b/us-central1/api/payments/create?total=25096 --> us-central1-api
[debug] [2025-04-28T13:29:51.799Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-04-28T13:29:51.799Z] [functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=25096, mapping to path=/payments/create?total=25096 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=25096, mapping to path=/payments/create?total=25096"}}
[debug] [2025-04-28T13:29:51.800Z] [worker-pool] Cleaned up workers for us-central1-api: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-api: 1 --> 0"}}
[debug] [2025-04-28T13:29:51.802Z] [worker-pool] addWorker(us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-api)"}}
[debug] [2025-04-28T13:29:51.802Z] [worker-pool] Adding worker with key us-central1-api, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-api, total=1"}}
[info] >  (node:66695) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead. {"user":"(node:66695) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m (node:66695) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead."}}
[info] >  (Use `node --trace-deprecation ...` to show where the warning was created) {"user":"(Use `node --trace-deprecation ...` to show where the warning was created)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m (Use `node --trace-deprecation ...` to show where the warning was created)"}}
[debug] [2025-04-28T13:29:52.448Z] [runtime-status] [66695] Resolved module firebase-admin {"declared":true,"installed":true,"version":"8.13.0","resolution":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [66695] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"8.13.0\",\"resolution\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2025-04-28T13:29:52.449Z] [runtime-status] [66695] Resolved module firebase-functions {"declared":true,"installed":true,"version":"3.11.0","resolution":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-functions/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [66695] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"3.11.0\",\"resolution\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/firebase-functions/lib/index.js\"}"}}
[warn] ⚠  The Cloud Functions emulator requires the module "firebase-functions" to be version >3.13.1 so your version is too old. You can probably fix this by running "npm install firebase-functions@latest" in your functions directory. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"The Cloud Functions emulator requires the module \"firebase-functions\" to be version >3.13.1 so your version is too old. You can probably fix this by running \"npm install firebase-functions@latest\" in your functions directory."}}
[info] i  functions: Your functions could not be parsed due to an issue with your node_modules (see above) {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Your functions could not be parsed due to an issue with your node_modules (see above)"}}
[debug] [2025-04-28T13:29:52.530Z] [runtime-status] [66695] Functions runtime initialized. {"cwd":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions","node_version":"22.11.0"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [66695] Functions runtime initialized. {\"cwd\":\"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions\",\"node_version\":\"22.11.0\"}"}}
[debug] [2025-04-28T13:29:52.530Z] [runtime-status] [66695] Listening to port: /var/folders/b8/2ktxw5yj1xz8mylspf3xppwr0000gn/T/fire_emu_4193182ab192fd80.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[runtime-status] [66695] Listening to port: /var/folders/b8/2ktxw5yj1xz8mylspf3xppwr0000gn/T/fire_emu_4193182ab192fd80.sock"}}
[debug] [2025-04-28T13:29:52.615Z] [worker-us-central1-api-87b9e79c-eb21-4ddb-9b66-4e364551960d]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-87b9e79c-eb21-4ddb-9b66-4e364551960d]: IDLE"}}
[debug] [2025-04-28T13:29:52.615Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-04-28T13:29:52.615Z] [worker-us-central1-api-87b9e79c-eb21-4ddb-9b66-4e364551960d]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-87b9e79c-eb21-4ddb-9b66-4e364551960d]: BUSY"}}
[info] >  Payment Request Recieved BOOM!!! for this amount >>>  25096 {"user":"Payment Request Recieved BOOM!!! for this amount >>>  25096","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment Request Recieved BOOM!!! for this amount >>>  25096"}}
[info] >  paymentRECEIVED >>>  { {"user":"paymentRECEIVED >>>  {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m paymentRECEIVED >>>  {"}}
[info] >    id: 'pi_3RIrkrJlvCjqT1Et09hUpz9M', {"user":"  id: 'pi_3RIrkrJlvCjqT1Et09hUpz9M',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   id: 'pi_3RIrkrJlvCjqT1Et09hUpz9M',"}}
[info] >    object: 'payment_intent', {"user":"  object: 'payment_intent',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   object: 'payment_intent',"}}
[info] >    amount: 25096, {"user":"  amount: 25096,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   amount: 25096,"}}
[info] >    amount_capturable: 0, {"user":"  amount_capturable: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   amount_capturable: 0,"}}
[info] >    amount_details: { tip: {} }, {"user":"  amount_details: { tip: {} },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   amount_details: { tip: {} },"}}
[info] >    amount_received: 0, {"user":"  amount_received: 0,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   amount_received: 0,"}}
[info] >    application: null, {"user":"  application: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   application: null,"}}
[info] >    application_fee_amount: null, {"user":"  application_fee_amount: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   application_fee_amount: null,"}}
[info] >    automatic_payment_methods: { allow_redirects: 'always', enabled: true }, {"user":"  automatic_payment_methods: { allow_redirects: 'always', enabled: true },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   automatic_payment_methods: { allow_redirects: 'always', enabled: true },"}}
[info] >    canceled_at: null, {"user":"  canceled_at: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   canceled_at: null,"}}
[info] >    cancellation_reason: null, {"user":"  cancellation_reason: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   cancellation_reason: null,"}}
[info] >    capture_method: 'automatic_async', {"user":"  capture_method: 'automatic_async',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   capture_method: 'automatic_async',"}}
[info] >    client_secret: 'pi_3RIrkrJlvCjqT1Et09hUpz9M_secret_rZxfaVRJ08yXmuxEs0Zc3xTpu', {"user":"  client_secret: 'pi_3RIrkrJlvCjqT1Et09hUpz9M_secret_rZxfaVRJ08yXmuxEs0Zc3xTpu',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   client_secret: 'pi_3RIrkrJlvCjqT1Et09hUpz9M_secret_rZxfaVRJ08yXmuxEs0Zc3xTpu',"}}
[info] >    confirmation_method: 'automatic', {"user":"  confirmation_method: 'automatic',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   confirmation_method: 'automatic',"}}
[info] >    created: 1745846993, {"user":"  created: 1745846993,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   created: 1745846993,"}}
[info] >    currency: 'usd', {"user":"  currency: 'usd',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   currency: 'usd',"}}
[info] >    customer: null, {"user":"  customer: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   customer: null,"}}
[info] >    description: null, {"user":"  description: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   description: null,"}}
[info] >    invoice: null, {"user":"  invoice: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   invoice: null,"}}
[info] >    last_payment_error: null, {"user":"  last_payment_error: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   last_payment_error: null,"}}
[info] >    latest_charge: null, {"user":"  latest_charge: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   latest_charge: null,"}}
[info] >    livemode: false, {"user":"  livemode: false,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   livemode: false,"}}
[info] >    metadata: {}, {"user":"  metadata: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   metadata: {},"}}
[info] >    next_action: null, {"user":"  next_action: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   next_action: null,"}}
[info] >    on_behalf_of: null, {"user":"  on_behalf_of: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   on_behalf_of: null,"}}
[info] >    payment_method: null, {"user":"  payment_method: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method: null,"}}
[info] >    payment_method_configuration_details: { id: 'pmc_1R1R5nJlvCjqT1EtYHXN7Kcf', parent: null }, {"user":"  payment_method_configuration_details: { id: 'pmc_1R1R5nJlvCjqT1EtYHXN7Kcf', parent: null },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method_configuration_details: { id: 'pmc_1R1R5nJlvCjqT1EtYHXN7Kcf', parent: null },"}}
[info] >    payment_method_options: { {"user":"  payment_method_options: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method_options: {"}}
[info] >      affirm: {}, {"user":"    affirm: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     affirm: {},"}}
[info] >      amazon_pay: { express_checkout_element_session_id: null }, {"user":"    amazon_pay: { express_checkout_element_session_id: null },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     amazon_pay: { express_checkout_element_session_id: null },"}}
[info] >      card: { {"user":"    card: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     card: {"}}
[info] >        installments: null, {"user":"      installments: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       installments: null,"}}
[info] >        mandate_options: null, {"user":"      mandate_options: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       mandate_options: null,"}}
[info] >        network: null, {"user":"      network: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       network: null,"}}
[info] >        request_three_d_secure: 'automatic' {"user":"      request_three_d_secure: 'automatic'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       request_three_d_secure: 'automatic'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      cashapp: {}, {"user":"    cashapp: {},","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     cashapp: {},"}}
[info] >      klarna: { preferred_locale: null }, {"user":"    klarna: { preferred_locale: null },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     klarna: { preferred_locale: null },"}}
[info] >      link: { persistent_token: null } {"user":"    link: { persistent_token: null }","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     link: { persistent_token: null }"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    payment_method_types: [ 'card', 'klarna', 'link', 'affirm', 'cashapp', 'amazon_pay' ], {"user":"  payment_method_types: [ 'card', 'klarna', 'link', 'affirm', 'cashapp', 'amazon_pay' ],","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method_types: [ 'card', 'klarna', 'link', 'affirm', 'cashapp', 'amazon_pay' ],"}}
[info] >    processing: null, {"user":"  processing: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   processing: null,"}}
[info] >    receipt_email: null, {"user":"  receipt_email: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   receipt_email: null,"}}
[info] >    review: null, {"user":"  review: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   review: null,"}}
[info] >    setup_future_usage: null, {"user":"  setup_future_usage: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   setup_future_usage: null,"}}
[info] >    shipping: null, {"user":"  shipping: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   shipping: null,"}}
[info] >    source: null, {"user":"  source: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   source: null,"}}
[info] >    statement_descriptor: null, {"user":"  statement_descriptor: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statement_descriptor: null,"}}
[info] >    statement_descriptor_suffix: null, {"user":"  statement_descriptor_suffix: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statement_descriptor_suffix: null,"}}
[info] >    status: 'requires_payment_method', {"user":"  status: 'requires_payment_method',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   status: 'requires_payment_method',"}}
[info] >    transfer_data: null, {"user":"  transfer_data: null,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   transfer_data: null,"}}
[info] >    transfer_group: null {"user":"  transfer_group: null","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   transfer_group: null"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2025-04-28T13:29:53.301Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-api" in 686.138042ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finished \"us-central1-api\" in 686.138042ms"}}
[debug] [2025-04-28T13:29:53.302Z] [worker-us-central1-api-87b9e79c-eb21-4ddb-9b66-4e364551960d]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-87b9e79c-eb21-4ddb-9b66-4e364551960d]: IDLE"}}
[debug] [2025-04-28T13:29:53.302Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2025-04-28T13:29:53.302Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2025-04-28T13:29:53.302Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T13:30:15.418Z] [work-queue] {"queuedWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T13:30:15.418Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T13:30:15.418Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/clone-f330b/us-central1/api/payments/create-2025-04-28T13:30:15.418Z"],"workRunningCount":1}
[debug] [2025-04-28T13:30:15.418Z] Accepted request POST /clone-f330b/us-central1/api/payments/create?total=0 --> us-central1-api
[debug] [2025-04-28T13:30:15.419Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2025-04-28T13:30:15.420Z] [functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0 {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/clone-f330b/us-central1/api/payments/create?total=0, mapping to path=/payments/create?total=0"}}
[debug] [2025-04-28T13:30:15.420Z] [worker-pool] submitRequest(triggerId=us-central1-api) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-api)"}}
[info] i  functions: Beginning execution of "us-central1-api" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Beginning execution of \"us-central1-api\""}}
[debug] [2025-04-28T13:30:15.420Z] [worker-us-central1-api-87b9e79c-eb21-4ddb-9b66-4e364551960d]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-87b9e79c-eb21-4ddb-9b66-4e364551960d]: BUSY"}}
[info] >  Payment Request Recieved BOOM!!! for this amount >>>  0 {"user":"Payment Request Recieved BOOM!!! for this amount >>>  0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Payment Request Recieved BOOM!!! for this amount >>>  0"}}
[info] >  /Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39 {"user":"/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m /Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39"}}
[info] >          return new StripeInvalidRequestError(rawStripeError); {"user":"        return new StripeInvalidRequestError(rawStripeError);","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m         return new StripeInvalidRequestError(rawStripeError);"}}
[info] >                 ^ {"user":"               ^","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m                ^"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents {"user":"StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m StripeInvalidRequestError: The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents"}}
[info] >      at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16) {"user":"    at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at StripeError.generate (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/Error.js:39:16)"}}
[info] >      at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33) {"user":"    at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.<anonymous> (/Users/dhruvpatel/Projects/amazon-clone/frontend/functions/node_modules/stripe/lib/StripeResource.js:190:33)"}}
[info] >      at Object.onceWrapper (node:events:632:28) {"user":"    at Object.onceWrapper (node:events:632:28)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Object.onceWrapper (node:events:632:28)"}}
[info] >      at IncomingMessage.emit (node:events:530:35) {"user":"    at IncomingMessage.emit (node:events:530:35)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at IncomingMessage.emit (node:events:530:35)"}}
[info] >      at endReadableNT (node:internal/streams/readable:1698:12) {"user":"    at endReadableNT (node:internal/streams/readable:1698:12)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at endReadableNT (node:internal/streams/readable:1698:12)"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:90:21) { {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {"}}
[info] >    type: 'StripeInvalidRequestError', {"user":"  type: 'StripeInvalidRequestError',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   type: 'StripeInvalidRequestError',"}}
[info] >    raw: { {"user":"  raw: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   raw: {"}}
[info] >      code: 'parameter_invalid_integer', {"user":"    code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     code: 'parameter_invalid_integer',"}}
[info] >      doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >      message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents', {"user":"    message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     message: 'The amount must be greater than or equal to the minimum charge amount allowed for your account and the currency set (https://docs.stripe.com/currencies#minimum-and-maximum-charge-amounts).  If you want to save a Payment Method for future use without an immediate payment, use a Setup Intent instead: https://docs.stripe.com/payments/setup-intents',"}}
[info] >      param: 'amount', {"user":"    param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     param: 'amount',"}}
[info] >      request_log_url: 'https://dashboard.stripe.com/test/logs/req_h4xwEtZ928ug3A?t=1745847015', {"user":"    request_log_url: 'https://dashboard.stripe.com/test/logs/req_h4xwEtZ928ug3A?t=1745847015',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     request_log_url: 'https://dashboard.stripe.com/test/logs/req_h4xwEtZ928ug3A?t=1745847015',"}}
[info] >      type: 'invalid_request_error', {"user":"    type: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     type: 'invalid_request_error',"}}
[info] >      headers: { {"user":"    headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     headers: {"}}
[info] >        server: 'nginx', {"user":"      server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       server: 'nginx',"}}
[info] >        date: 'Mon, 28 Apr 2025 13:30:15 GMT', {"user":"      date: 'Mon, 28 Apr 2025 13:30:15 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       date: 'Mon, 28 Apr 2025 13:30:15 GMT',"}}
[info] >        'content-type': 'application/json', {"user":"      'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-type': 'application/json',"}}
[info] >        'content-length': '663', {"user":"      'content-length': '663',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-length': '663',"}}
[info] >        connection: 'keep-alive', {"user":"      connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       connection: 'keep-alive',"}}
[info] >        'access-control-allow-credentials': 'true', {"user":"      'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-credentials': 'true',"}}
[info] >        'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE', {"user":"      'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',"}}
[info] >        'access-control-allow-origin': '*', {"user":"      'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-allow-origin': '*',"}}
[info] >        'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >        'access-control-max-age': '300', {"user":"      'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'access-control-max-age': '300',"}}
[info] >        'cache-control': 'no-cache, no-store', {"user":"      'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'cache-control': 'no-cache, no-store',"}}
[info] >        'content-security-policy': "base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=u339KKapRSG5hOGW8RKrJHczjVy2eZYh7IXDOfiTGUdOjceD1tP2SMjzRHZVv4LiiS6r832_2LWjGXbj", {"user":"      'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=u339KKapRSG5hOGW8RKrJHczjVy2eZYh7IXDOfiTGUdOjceD1tP2SMjzRHZVv4LiiS6r832_2LWjGXbj\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=u339KKapRSG5hOGW8RKrJHczjVy2eZYh7IXDOfiTGUdOjceD1tP2SMjzRHZVv4LiiS6r832_2LWjGXbj\","}}
[info] >        'idempotency-key': '17213849-3469-4b46-8232-ccde6bcf2a9a', {"user":"      'idempotency-key': '17213849-3469-4b46-8232-ccde6bcf2a9a',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'idempotency-key': '17213849-3469-4b46-8232-ccde6bcf2a9a',"}}
[info] >        'original-request': 'req_h4xwEtZ928ug3A', {"user":"      'original-request': 'req_h4xwEtZ928ug3A',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'original-request': 'req_h4xwEtZ928ug3A',"}}
[info] >        'request-id': 'req_h4xwEtZ928ug3A', {"user":"      'request-id': 'req_h4xwEtZ928ug3A',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'request-id': 'req_h4xwEtZ928ug3A',"}}
[info] >        'stripe-version': '2025-02-24.acacia', {"user":"      'stripe-version': '2025-02-24.acacia',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'stripe-version': '2025-02-24.acacia',"}}
[info] >        vary: 'Origin', {"user":"      vary: 'Origin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       vary: 'Origin',"}}
[info] >        'x-stripe-priority-routing-enabled': 'true', {"user":"      'x-stripe-priority-routing-enabled': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-priority-routing-enabled': 'true',"}}
[info] >        'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"      'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >        'x-wc': 'ABGHI', {"user":"      'x-wc': 'ABGHI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'x-wc': 'ABGHI',"}}
[info] >        'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m       'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >      }, {"user":"    },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     },"}}
[info] >      statusCode: 400, {"user":"    statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     statusCode: 400,"}}
[info] >      requestId: 'req_h4xwEtZ928ug3A' {"user":"    requestId: 'req_h4xwEtZ928ug3A'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     requestId: 'req_h4xwEtZ928ug3A'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    rawType: 'invalid_request_error', {"user":"  rawType: 'invalid_request_error',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   rawType: 'invalid_request_error',"}}
[info] >    code: 'parameter_invalid_integer', {"user":"  code: 'parameter_invalid_integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'parameter_invalid_integer',"}}
[info] >    doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer', {"user":"  doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   doc_url: 'https://stripe.com/docs/error-codes/parameter-invalid-integer',"}}
[info] >    param: 'amount', {"user":"  param: 'amount',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   param: 'amount',"}}
[info] >    detail: undefined, {"user":"  detail: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   detail: undefined,"}}
[info] >    headers: { {"user":"  headers: {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   headers: {"}}
[info] >      server: 'nginx', {"user":"    server: 'nginx',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     server: 'nginx',"}}
[info] >      date: 'Mon, 28 Apr 2025 13:30:15 GMT', {"user":"    date: 'Mon, 28 Apr 2025 13:30:15 GMT',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     date: 'Mon, 28 Apr 2025 13:30:15 GMT',"}}
[info] >      'content-type': 'application/json', {"user":"    'content-type': 'application/json',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-type': 'application/json',"}}
[info] >      'content-length': '663', {"user":"    'content-length': '663',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-length': '663',"}}
[info] >      connection: 'keep-alive', {"user":"    connection: 'keep-alive',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     connection: 'keep-alive',"}}
[info] >      'access-control-allow-credentials': 'true', {"user":"    'access-control-allow-credentials': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-credentials': 'true',"}}
[info] >      'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE', {"user":"    'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-methods': 'GET, HEAD, PUT, PATCH, POST, DELETE',"}}
[info] >      'access-control-allow-origin': '*', {"user":"    'access-control-allow-origin': '*',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-allow-origin': '*',"}}
[info] >      'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required', {"user":"    'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-expose-headers': 'Request-Id, Stripe-Manage-Version, Stripe-Should-Retry, X-Stripe-External-Auth-Required, X-Stripe-Privileged-Session-Required',"}}
[info] >      'access-control-max-age': '300', {"user":"    'access-control-max-age': '300',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'access-control-max-age': '300',"}}
[info] >      'cache-control': 'no-cache, no-store', {"user":"    'cache-control': 'no-cache, no-store',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'cache-control': 'no-cache, no-store',"}}
[info] >      'content-security-policy': "base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=u339KKapRSG5hOGW8RKrJHczjVy2eZYh7IXDOfiTGUdOjceD1tP2SMjzRHZVv4LiiS6r832_2LWjGXbj", {"user":"    'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=u339KKapRSG5hOGW8RKrJHczjVy2eZYh7IXDOfiTGUdOjceD1tP2SMjzRHZVv4LiiS6r832_2LWjGXbj\",","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'content-security-policy': \"base-uri 'none'; default-src 'none'; form-action 'none'; frame-ancestors 'none'; img-src 'self'; script-src 'self' 'report-sample'; style-src 'self'; worker-src 'none'; upgrade-insecure-requests; report-uri https://q.stripe.com/csp-violation?q=u339KKapRSG5hOGW8RKrJHczjVy2eZYh7IXDOfiTGUdOjceD1tP2SMjzRHZVv4LiiS6r832_2LWjGXbj\","}}
[info] >      'idempotency-key': '17213849-3469-4b46-8232-ccde6bcf2a9a', {"user":"    'idempotency-key': '17213849-3469-4b46-8232-ccde6bcf2a9a',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'idempotency-key': '17213849-3469-4b46-8232-ccde6bcf2a9a',"}}
[info] >      'original-request': 'req_h4xwEtZ928ug3A', {"user":"    'original-request': 'req_h4xwEtZ928ug3A',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'original-request': 'req_h4xwEtZ928ug3A',"}}
[info] >      'request-id': 'req_h4xwEtZ928ug3A', {"user":"    'request-id': 'req_h4xwEtZ928ug3A',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'request-id': 'req_h4xwEtZ928ug3A',"}}
[info] >      'stripe-version': '2025-02-24.acacia', {"user":"    'stripe-version': '2025-02-24.acacia',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'stripe-version': '2025-02-24.acacia',"}}
[info] >      vary: 'Origin', {"user":"    vary: 'Origin',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     vary: 'Origin',"}}
[info] >      'x-stripe-priority-routing-enabled': 'true', {"user":"    'x-stripe-priority-routing-enabled': 'true',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-priority-routing-enabled': 'true',"}}
[info] >      'x-stripe-routing-context-priority-tier': 'api-testmode', {"user":"    'x-stripe-routing-context-priority-tier': 'api-testmode',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-stripe-routing-context-priority-tier': 'api-testmode',"}}
[info] >      'x-wc': 'ABGHI', {"user":"    'x-wc': 'ABGHI',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'x-wc': 'ABGHI',"}}
[info] >      'strict-transport-security': 'max-age=63072000; includeSubDomains; preload' {"user":"    'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m     'strict-transport-security': 'max-age=63072000; includeSubDomains; preload'"}}
[info] >    }, {"user":"  },","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   },"}}
[info] >    requestId: 'req_h4xwEtZ928ug3A', {"user":"  requestId: 'req_h4xwEtZ928ug3A',","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   requestId: 'req_h4xwEtZ928ug3A',"}}
[info] >    statusCode: 400, {"user":"  statusCode: 400,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   statusCode: 400,"}}
[info] >    charge: undefined, {"user":"  charge: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   charge: undefined,"}}
[info] >    decline_code: undefined, {"user":"  decline_code: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   decline_code: undefined,"}}
[info] >    payment_intent: undefined, {"user":"  payment_intent: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_intent: undefined,"}}
[info] >    payment_method: undefined, {"user":"  payment_method: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   payment_method: undefined,"}}
[info] >    setup_intent: undefined, {"user":"  setup_intent: undefined,","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   setup_intent: undefined,"}}
[info] >    source: undefined {"user":"  source: undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m   source: undefined"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[info] >   {"user":"","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m "}}
[info] >  Node.js v22.11.0 {"user":"Node.js v22.11.0","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"\u001b[90m> \u001b[39m Node.js v22.11.0"}}
[error] i  Request to function failed: Error: socket hang up {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"Request to function failed: Error: socket hang up"}}
[debug] [2025-04-28T13:30:15.788Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2025-04-28T13:30:15.788Z] [worker-us-central1-api-87b9e79c-eb21-4ddb-9b66-4e364551960d]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-87b9e79c-eb21-4ddb-9b66-4e364551960d]: exited"}}
[debug] [2025-04-28T13:30:15.788Z] [worker-us-central1-api-87b9e79c-eb21-4ddb-9b66-4e364551960d]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-api"},"extension":{},"message":"[worker-us-central1-api-87b9e79c-eb21-4ddb-9b66-4e364551960d]: FINISHED"}}
